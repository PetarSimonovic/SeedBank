(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{101:function(e,t,n){"use strict";n.r(t);var a=n(4),r=n.n(a),o=n(54),s=n.n(o),c=n(0),i=n(1),l=n(9),u=n(2),d=n(3),j=n(55),b=n.n(j).a.create({baseURL:"/api"}),h={addUser:function(e){return b.post("/user",e)},getUser:function(e){return b.get("/user/".concat(e))},updateGarden:function(e,t){return b.put("/user/".concat(e),t)}},p=function e(){Object(c.a)(this,e),this.type="generic_plant",this.bloom=1,this.leafColour="#ff006e",this.stemColour="#ffbe0b",this.flowerColour="#55dde0"};function O(){var e=new Date,t=e.getDate(),n=e.getMonth()+1,a=e.getFullYear();return{year:a,month:n,day:t,stamp:"".concat(a,"/").concat(n,"/").concat(t)}}var f=n(8),m=n(13),g=n(5);var v=function(e){var t=Object(a.useRef)(),n=Object(a.useState)(!1),r=Object(m.a)(n,2),o=(r[0],r[1]),s=Object(a.useState)(!1),c=Object(m.a)(s,2);return c[0],c[1],Object(g.jsxs)("mesh",Object(f.a)(Object(f.a)({},e),{},{ref:t,scale:1,onClick:function(t){return e.sowPlant(t)},onPointerOver:function(e){return o(!0)},onPointerOut:function(e){return o(!1)},children:[Object(g.jsx)("cylinderGeometry",{args:e.args}),Object(g.jsx)("meshToonMaterial",{color:"#a7c957"})]}))};function x(e){for(var t=e.world,n=[],a=0;a<t.stalactites.length;a++){var r=t.stalactites[a];n.push(Object(g.jsx)(w,{sowPlant:e.sowPlant,args:r.geometry,position:r.position,colour:r.colour},ve()))}return n}function w(e){var t=Object(a.useRef)(),n=Object(m.a)(e.args,4),r=n[0],o=(n[1],n[2]),s=n[3];return Object(g.jsx)("group",{children:Object(g.jsxs)("mesh",Object(f.a)(Object(f.a)({},e),{},{ref:t,scale:1,onClick:function(e){return function(e){e.stopPropagation()}(e)},children:[Object(g.jsx)("cylinderGeometry",{args:e.args}),Object(g.jsx)("meshToonMaterial",{color:e.colour}),Object(g.jsx)(v,{sowPlant:e.sowPlant,position:[0,o/2,0],args:[r,r,.01,s]})]}))})}var y=function(e){var t=Object(a.useRef)();return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)("mesh",Object(f.a)(Object(f.a)({},e),{},{ref:t,scale:1,children:x(e)}))})};function C(e){console.log("Plant props");var t=Object(m.a)(e.position,3),n=t[0],a=t[1],r=t[2];console.log(n),console.log(a),console.log(r);var o=function(e){switch(e){case"generic_plant":return{bloom:1,leafColour:"#377F34",stemColour:"#499B4A",flowerColour:"#832134"};case"tulip":return{bloom:2,leafColour:"#2D5A27",stemColour:"#567d46",flowerColour:"#ff878d"};default:return}}(e.type),s=o.bloom,c=o.leafColour,i=o.stemColour,l=o.flowerColour,u=e.growth;u>=s&&(u=s);for(var d=u/12,j=[Object(g.jsx)(k,{},ve()),Object(g.jsx)(N,{stemColour:i,stemLength:d},ve())],b=0;b<=u;b++)j.push(Object(g.jsx)(S,{color:c,position:[.02,.1+b/18,.05]},ve()),Object(g.jsx)(S,{color:c,position:[-.02,.1+b/18,-.05]},ve()));return u>=s&&j.push(Object(g.jsx)(U,{color:l,position:[0,.1+u/11,0]},ve())),j}function k(e){var t=Object(a.useRef)();return Object(g.jsxs)("mesh",Object(f.a)(Object(f.a)({},e),{},{ref:t,children:[Object(g.jsx)("dodecahedronGeometry",{args:[.035,2]}),Object(g.jsx)("meshToonMaterial",{color:"#947352"})]}))}function N(e){var t=Object(a.useRef)();return Object(g.jsxs)("mesh",Object(f.a)(Object(f.a)({},e),{},{ref:t,children:[Object(g.jsx)("cylinderGeometry",{args:[.01,.03,.3+e.stemLength,12]}),Object(g.jsx)("meshToonMaterial",{color:e.stemColour})]}))}function S(e){var t=Object(a.useRef)();return Object(g.jsxs)("mesh",Object(f.a)(Object(f.a)({},e),{},{ref:t,children:[Object(g.jsx)("cylinderGeometry",{args:[.02,.05,.02,6]}),Object(g.jsx)("meshToonMaterial",{color:e.color})]}))}function U(e){var t=Object(a.useRef)();return Object(g.jsxs)("mesh",Object(f.a)(Object(f.a)({},e),{},{ref:t,children:[Object(g.jsx)("dodecahedronGeometry",{args:[.06]}),Object(g.jsx)("meshToonMaterial",{color:e.color})]}))}var P,W,R=function(e){e.x,e.y,e.z;var t=Object(a.useRef)();return Object(g.jsx)("group",{children:Object(g.jsx)("mesh",Object(f.a)(Object(f.a)({},e),{},{ref:t,onClick:function(t){return function(t){t.stopPropagation(),console.log("This plant is:"),console.log(e)}(t)},scale:.2,children:C(e)}))})},T=n(15),G=n(12),I=G.a.button(P||(P=Object(T.a)(["\ncolor: palevioletred;\nfont-size: 1em;\nmargin: 1em;\npadding: 0.25em 1em;\nborder: 2px solid palevioletred;\nborder-radius: 3px;\n"]))),D=G.a.div(W||(W=Object(T.a)(["\n  background-color: lightgrey;\n  "])));var A=function(e){return Object(g.jsxs)(D,{children:[Object(g.jsx)(I,{onClick:function(t){return e.selectSeed("generic_plant")},children:" Generic Plant "}),Object(g.jsx)(I,{onClick:function(t){return e.selectSeed("tulip")},children:" Tulip "})]})},M=(n(53),n(21));var E=function(e){return Object(g.jsxs)(M.a,{id:"canvas",camera:{position:[0,2,3.5],lookat:[0,0,0]},children:[Object(g.jsx)(z,{}),Object(g.jsxs)(a.Suspense,{fallback:console.log("loading"),children:[Object(g.jsx)(y,{sowPlant:e.sowPlant,position:[0,0,0],world:e.world}),e.plants]}),Object(g.jsx)(J,{}),Object(g.jsx)(_,{})]})},L=n(104);Object(M.b)({OrbitControls:L.a});var z=function(){var e=Object(M.d)(),t=e.camera,n=e.gl.domElement,r=Object(a.useRef)();return Object(M.c)((function(e){return r.current.update()})),Object(g.jsx)("orbitControls",{ref:r,position:[0,-10,0],args:[t,n],autoRotate:!0,autoRotateSpeed:.2,enabled:!0})};var J=function(e){Object(a.useRef)();var t=Object(a.useRef)();return Object(g.jsx)("group",{children:Object(g.jsx)("mesh",Object(f.a)(Object(f.a)({ref:t},e),{},{children:Object(g.jsx)("directionalLight",{position:[0,.5,1],intensity:.7})}))})},F=n(106);function _(e){return Object(g.jsx)(F.a,Object(f.a)({turbidity:.01,distance:45e4,sunPosition:[0,1,0],inclination:.47,elevation:.6,exposure:.3,mieDirectionalG:.04,mieCoefficient:.0045,rayleigh:.1,azimuth:.6},e))}var B,Y,H=G.a.button(B||(B=Object(T.a)(["\ncolor: palevioletred;\nfont-size: 1em;\nmargin: 1em;\npadding: 0.25em 1em;\nborder: 2px solid palevioletred;\nborder-radius: 3px;\n"]))),V=G.a.div(Y||(Y=Object(T.a)(["\n  background-color: lightgrey;\n  "])));var q,K,Q,X,Z,$,ee=function(e){return Object(g.jsxs)(V,{children:[Object(g.jsx)(H,{onClick:e.newWorld,children:" New World "}),Object(g.jsx)(H,{onClick:e.saveWorld,children:" Save World "})]})},te=n.p+"static/media/seedbankProto.6cdc7966.png",ne=G.a.a.attrs({className:"navbar-brand"})(q||(q=Object(T.a)([""]))),ae=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(g.jsx)(ne,{href:"https://example.com",children:Object(g.jsx)("img",{src:te,height:"50",alt:"seedbank"})})}}]),n}(a.Component),re=ae,oe=n(31),se=(G.a.div.attrs({className:"collpase navbar-collapse"})(K||(K=Object(T.a)([""]))),G.a.div.attrs({className:"navbar-nav mr-auto"})(Q||(Q=Object(T.a)([""]))),G.a.div.attrs({className:"collpase navbar-collapse"})(X||(X=Object(T.a)([""]))),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(g.jsxs)(r.a.Fragment,{children:[Object(g.jsx)(oe.b,{to:"/",className:"navbar-brand",children:"SeedBank"}),Object(g.jsx)(oe.b,{to:"/",className:"navbar-brand",children:this.props.user})]})}}]),n}(a.Component)),ce=se,ie=(G.a.div.attrs({className:"container"})(Z||(Z=Object(T.a)([""]))),G.a.nav.attrs({className:"navbar navbar-expand-lg navbar-dark bg-dark"})($||($=Object(T.a)(["\n    margin-bottom: 20 px;\n"])))),le=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(g.jsxs)(ie,{height:"50%",children:[Object(g.jsx)(re,{}),Object(g.jsx)(ce,{user:this.props.user,setUser:this.props.setUser})]})}}]),n}(a.Component),ue=le;function de(e){for(var t=[],n=O(Date()).stamp,a=0;a<e.length;a++){var r=e[a],o=je(r.date,n);t.push(Object(g.jsx)(R,{growth:o,date:r.date,position:r.position,type:r.type},r.key))}return console.log(t),t}function je(e,t){console.log("Plant date is"),console.log(e.stamp),console.log("Today is"),console.log(t);var n=function(e,t){var n=new Date(e),a=new Date(t).getTime()-n.getTime();return console.log("Time diff"),console.log(a),Math.round(a/864e5)}(e.stamp,t);return console.log("".concat(n," days have passed")),n}var be=n(14),he=n.n(be),pe=n(18);function Oe(e,t,n,a){return fe.apply(this,arguments)}function fe(){return(fe=Object(pe.a)(he.a.mark((function e(t,n,a,r){var o,s,c,i,l;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=me(n),s={garden:o},c={world:JSON.stringify(a)},l={garden:s,world:c,worldChosen:i={worldChosen:r}},console.log("PAYLOAD"),console.log(l),console.log(i),console.log("Attempting to save garden"),e.next=11,h.updateGarden(t,l).then((function(e){console.log("Garden updated successfully")}));case 11:console.log("SAVED GARDEN"),console.log(o);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function me(e){for(var t=[],n=0;n<e.length;n++){var a=e[n].key,r=e[n].props,o={key:a,growth:r.growth,date:r.date,position:r.position,type:r.type};t.push(o)}return t}var ge=n(105);function ve(){return Object(ge.a)()}var xe=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we();Object(c.a)(this,e),this.stalactites=t};function we(){for(var e=[],t=0,n=0;n<10;n++)e.push(ke(t)),t+=.1;return e}function ye(e){return Math.random()*(e.max-e.min)+e.min}function Ce(){var e;return(e=["#6C6460","#8a817c","#6c757d"])[Math.floor(Math.random()*e.length)]}function ke(e){return{geometry:Ne(e),position:Se(e),colour:Ce()}}function Ne(e){var t={max:.8-e,min:.01};return[ye({max:2-e,min:1-e}),ye(t),ye({max:2.3,min:1}),ye({max:12,min:6})]}function Se(e){var t={max:0+e,min:1+e},n={max:.5,min:-.5};return[ye(n),-ye(t),ye(n)]}n(99);var Ue,Pe,We,Re,Te,Ge,Ie,De,Ae,Me,Ee,Le,ze=G.a.h1.attrs({className:"h1"})(Ue||(Ue=Object(T.a)([""]))),Je=G.a.div.attrs({className:"form-group"})(Pe||(Pe=Object(T.a)(["\n    margin: 0 30px;\n"]))),Fe=G.a.label(We||(We=Object(T.a)(["\n    margin: 5px;\n"]))),_e=G.a.input.attrs({className:"form-control"})(Re||(Re=Object(T.a)(["\n    margin: 5px;\n"]))),Be=G.a.button.attrs({className:"btn btn-primary"})(Te||(Te=Object(T.a)(["\n    margin: 15px 15px 15px 5px;\n"]))),Ye=G.a.a.attrs({className:"btn btn-danger"})(Ge||(Ge=Object(T.a)(["\n    margin: 15px 15px 15px 5px;\n"]))),He=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).handleChangeInputName=function(){var e=Object(pe.a)(he.a.mark((function e(t){var n;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.value,a.setState({name:n});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleChangeInputEmail=function(){var e=Object(pe.a)(he.a.mark((function e(t){var n;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.value,a.setState({email:n});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleChangeInputPassword=function(){var e=Object(pe.a)(he.a.mark((function e(t){var n;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.value,a.setState({password:n});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleAddUser=Object(pe.a)(he.a.mark((function e(){var t,n,r,o,s,c,i;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state,n=t.name,r=t.email,o=t.password,s=new xe,c=JSON.stringify(s),!1,i={name:n,email:r,password:o,world:c,worldChosen:false},e.next=7,h.addUser(i).then((function(e){window.alert("User added"),a.setState({name:"",email:"",password:""}),console.log("Result is"),a.props.setUser(n,e.data.id,[],s,!1)}));case 7:case"end":return e.stop()}}),e)}))),a.state={name:"",email:"",password:""},a}return Object(i.a)(n,[{key:"render",value:function(){var e=this.state,t=e.name,n=e.email,a=e.password;return Object(g.jsxs)(Je,{children:[Object(g.jsx)(ze,{children:"Sign Up"}),Object(g.jsx)(Fe,{children:"Name: "}),Object(g.jsx)(_e,{type:"text",value:t,onChange:this.handleChangeInputName}),Object(g.jsx)(Fe,{children:"Email: "}),Object(g.jsx)(_e,{type:"text",value:n,onChange:this.handleChangeInputEmail}),Object(g.jsx)(Fe,{children:"Password: "}),Object(g.jsx)(_e,{type:"text",value:a,onChange:this.handleChangeInputPassword}),Object(g.jsx)(Be,{onClick:this.handleAddUser,children:"Sign Up"}),Object(g.jsx)(Ye,{href:"/movies/list",children:"Cancel"})]})}}]),n}(a.Component),Ve=He,qe=G.a.h1.attrs({className:"h1"})(Ie||(Ie=Object(T.a)([""]))),Ke=G.a.div.attrs({className:"form-group"})(De||(De=Object(T.a)(["\n    margin: 0 30px;\n"]))),Qe=G.a.label(Ae||(Ae=Object(T.a)(["\n    margin: 5px;\n"]))),Xe=G.a.input.attrs({className:"form-control"})(Me||(Me=Object(T.a)(["\n    margin: 5px;\n"]))),Ze=G.a.button.attrs({className:"btn btn-primary"})(Ee||(Ee=Object(T.a)(["\n    margin: 15px 15px 15px 5px;\n"]))),$e=(G.a.a.attrs({className:"btn btn-danger"})(Le||(Le=Object(T.a)(["\n    margin: 15px 15px 15px 5px;\n"]))),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).handleChangeInputName=function(){var e=Object(pe.a)(he.a.mark((function e(t){var n;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.value,a.setState({name:n});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleChangeInputPassword=function(){var e=Object(pe.a)(he.a.mark((function e(t){var n;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.value,a.setState({password:n});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleGetUser=Object(pe.a)(he.a.mark((function e(){return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.getUser(a.state.name).then((function(e){if(console.log(e),console.log("Name is "+e.data.data.name),a.state.password===e.data.data.password){window.alert("Logged in");var t=e.data.data.name,n=e.data.data._id,r=de(e.data.data.garden),o=Object.assign(JSON.parse(e.data.data.world)),s=e.data.data.worldChosen;console.log("Loaded world"),console.log(o),a.props.setUser(t,n,r,o,s)}else window.alert("Incorrect password")}));case 2:case"end":return e.stop()}}),e)}))),a.state={name:"",email:"",password:""},a}return Object(i.a)(n,[{key:"render",value:function(){var e=this.state,t=e.name,n=(e.email,e.password);return Object(g.jsxs)(Ke,{children:[Object(g.jsx)(qe,{children:"Log In"}),Object(g.jsx)(Qe,{children:"Name: "}),Object(g.jsx)(Xe,{type:"text",value:t,onChange:this.handleChangeInputName}),Object(g.jsx)(Qe,{children:"Password: "}),Object(g.jsx)(Xe,{type:"text",value:n,onChange:this.handleChangeInputPassword}),Object(g.jsx)(Ze,{onClick:this.handleGetUser,children:"Log In"})]})}}]),n}(a.Component)),et=$e,tt=n(17);var nt=function(e){var t=Object(a.useState)(e.garden),n=Object(m.a)(t,2),r=n[0],o=n[1],s=Object(a.useState)(null),c=Object(m.a)(s,2),i=c[0],l=c[1];return Object(a.useEffect)((function(){console.log("Calling saveGarden"),Oe(e.id,r,e.world,e.worldChosen)})),Object(g.jsxs)("div",{className:"App",children:[Object(g.jsx)(E,{plants:r,world:e.world,sowPlant:function(e){if(i){var t=function(e,t){var n=[e.point.x,e.point.y,e.point.z],a=ve(),r=O(),o=new p;console.log("plantData is:"),console.log(o);var s=Object(g.jsx)(R,{growth:0,date:r,position:n,type:t},a);return console.log("New Plant"),console.log(s),s}(e,i);l(null),o((function(e){return[t].concat(Object(tt.a)(e))}))}}}),e.worldChosen?Object(g.jsx)(A,{className:"App-header",selectSeed:function(e){console.log(e),l(e),console.log(i)}}):Object(g.jsx)(ee,{className:"App-header",newWorld:e.newWorld,saveWorld:e.saveWorld})]})},at=(n(100),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={userName:"",id:0,garden:[],world:{},chosenWorld:!1},a.setUser=a.setUser.bind(Object(l.a)(a)),a.newWorld=a.newWorld.bind(Object(l.a)(a)),a.saveWorld=a.saveWorld.bind(Object(l.a)(a)),a.connecToServer=a.connecToServer.bind(Object(l.a)(a)),a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.connecToServer()}},{key:"connecToServer",value:function(){fetch("/")}},{key:"setUser",value:function(e,t,n,a,r){console.log("SETTING USER"),console.log("WORLD IS"),console.log(a),console.log("CHOSEN?"),console.log(r),this.setState({userName:e,id:t,garden:n,world:a,worldChosen:r}),console.log("User is "+this.state.id+" "+this.state.userName),console.log(this.state.garden)}},{key:"newWorld",value:function(){var e=new xe;this.setState({world:e})}},{key:"saveWorld",value:function(){this.setState({worldChosen:!0}),Oe(this.state.id,[],this.state.world,!0)}},{key:"render",value:function(){return Object(g.jsxs)("div",{style:{position:"relative",width:"100%",height:"100%"},children:[Object(g.jsx)(oe.a,{children:Object(g.jsx)(ue,{user:this.state.userName,setUser:this.setUser})}),this.state.userName?Object(g.jsx)(nt,{id:this.state.id,newWorld:this.newWorld,world:this.state.world,worldChosen:this.state.worldChosen,saveWorld:this.saveWorld,garden:this.state.garden}):Object(g.jsxs)("div",{children:[Object(g.jsx)(et,{setUser:this.setUser})," ",Object(g.jsx)(Ve,{setUser:this.setUser})]})]})}}]),n}(r.a.Component));s.a.render(Object(g.jsx)(at,{}),document.getElementById("root"))},53:function(e,t,n){},99:function(e,t,n){}},[[101,1,2]]]);
//# sourceMappingURL=main.7d3b391a.chunk.js.map
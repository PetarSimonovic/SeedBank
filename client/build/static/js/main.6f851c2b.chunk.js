(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{100:function(e,t,n){"use strict";n.r(t);var o=n(2),r=n.n(o),a=n(57),c=n.n(a),s=n(0),i=n(3),l=n(11),u=n(4),d=n(5),f=n(10),j=n.n(f),b=n(14),h=n(58),p=n.n(h).a.create({baseURL:"/api"}),O={addUser:function(e){return p.post("/user",e)},getUser:function(e){return p.get("/user/".concat(e))},updateGarden:function(e,t){return p.put("/user/".concat(e),t)},addBalloons:function(e){return p.post("/balloons",e)},getBalloons:function(e){return p.get("/balloons/".concat(e))},updateBalloons:function(e,t){return p.put("/balloons/".concat(e),t)},getFriends:function(e){return p.get("/friends/".concat(e))},addFriends:function(e){return p.post("/friends",e)},getFriendByName:function(e,t){return p.get("/friend/".concat(e,"/").concat(t))},addSeeds:function(e){return p.post("/seeds",e)},getSeeds:function(e){return p.get("/seeds/".concat(e))},updateSeeds:function(e,t,n){return p.put("/seeds/".concat(e,"/").concat(t),n)},addPlant:function(e){return p.post("/plants",e)},getPlants:function(e){return p.get("/plants/".concat(e))},updatePlant:function(e,t){return p.put("/plants/".concat(e),t)}};function g(){return(g=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("SAVING PLANT "),console.log(t),t.date=JSON.stringify(t.date),e.next=5,O.addPlant(t).then((function(e){console.log("PLANT SAVED")}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){return m=Object(b.a)(j.a.mark((function e(t,n){var o,r,a=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=a.length>2&&void 0!==a[2]?a[2]:0,console.log("In addSeeds "+n),r=new Bt(t,n,o),console.log(r),e.next=6,O.addSeeds(r).then((function(e){console.log("packet of ".concat(n," seeds added!"))}));case 6:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}function x(e,t){for(var n=0;n<t.length;n++){if(t[n].type===e.type)return!0}return!1}var v=[{type:"generic_plant",quantity:3},{type:"tulip",quantity:3},{type:"sunflower",quantity:3},{type:"crocus",quantity:3},{type:"snowdrop",quantity:3},{type:"rose",quantity:3},{type:"venusFlyTrap",quantity:3}];function y(e,t){var n=new Date(e),o=new Date(t).getTime()-n.getTime();return Math.round(o/864e5)}var w=n(104);function S(){return Object(w.a)()}var C=n(7),k=n(12),N=n(1);function E(e,t){for(var n=[],o=(e.removeBalloon,e.updateSeeds),r=e.acceptFriend,a=e.seeds,c=function(e){var c=t[e];c.type;n.push(Object(N.jsx)(M,{balloonId:c.balloonId,seeds:a,position:c.position,index:e,handleClick:function(e){"friendRequest"===c.type?r(c.sender):o(c.quantity,c.type)},updateBalloons:jt,colour:c.colour,type:c.type,sender:c.sender,quantity:c.quantity,message:c.message},c.balloonId))},s=0;s<t.length;s++)c(s);return n}var I=function(e){var t=Object(o.useRef)(),n=Object(o.useState)([]),r=Object(k.a)(n,2),a=r[0],c=r[1];return Object(o.useEffect)((function(){(function(e,t,n,o){return Ze.apply(this,arguments)})(e.seeds,e.lastLogin,e.userId,e.today).then((function(e){return c(e)}))}),[]),Object(N.jsx)(N.Fragment,{children:Object(N.jsx)("mesh",Object(C.a)(Object(C.a)({},e),{},{ref:t,scale:1,children:E(e,a)}))})},R=n(102),P=n(105),U=n(20);function D(e){var t="#293241",n="#b1b5c8",r=Object(o.useRef)();return Object(N.jsx)("mesh",Object(C.a)(Object(C.a)({},e),{},{ref:r,scale:.8,children:Object(N.jsxs)(P.a,{fontSize:.2,outlineWidth:.2,outlineColor:n,color:t,children:[" ",e.displayMessage||"introBalloon"===e.type?e.message:""," "]})}))}function T(e){var t=Object(o.useRef)();return Object(U.c)((function(e,n){return t.current.rotation.y+=.01})),Object(N.jsxs)("mesh",Object(C.a)(Object(C.a)({},e),{},{ref:t,scale:1,children:[Object(N.jsx)("dodecahedronGeometry",{args:[.153,8]}),Object(N.jsx)("meshToonMaterial",{color:e.colour})]}))}function B(e){var t=Object(o.useRef)();return Object(U.c)((function(e,n){return t.current.rotation.y+=.01})),Object(N.jsxs)("mesh",Object(C.a)(Object(C.a)({},e),{},{ref:t,scale:1,children:[Object(N.jsx)("cylinderGeometry",{args:[.005,.005,.5,3]}),Object(N.jsx)("meshToonMaterial",{color:"#16161D"})]}))}function W(e){var t=Object(o.useRef)();return Object(U.c)((function(e,n){return t.current.rotation.y+=.01})),Object(N.jsxs)("mesh",Object(C.a)(Object(C.a)({},e),{},{ref:t,scale:1,children:[Object(N.jsx)("cylinderGeometry",{args:[.15,-.01,.3,16]}),Object(N.jsx)("meshToonMaterial",{color:e.colour})]}))}function F(e){var t=Object(o.useRef)();return Object(U.c)((function(e,n){return t.current.rotation.y+=.01})),Object(N.jsxs)("mesh",Object(C.a)(Object(C.a)({},e),{},{ref:t,scale:1,children:[Object(N.jsx)("boxGeometry",{args:[.15,.15,.15]}),Object(N.jsx)("meshToonMaterial",{color:"#7f5539"})]}))}var M=function(e){var t=Object(o.useRef)(),n=Object(o.useState)(!1),r=Object(k.a)(n,2),a=r[0],c=r[1],s=Object(o.useState)(!1),i=Object(k.a)(s,2),l=i[0],u=i[1];return Object(o.useEffect)((function(){"introBalloon"!==e.type&&(c(a),u(l))}),[]),Object(N.jsx)("group",{children:Object(N.jsxs)("mesh",Object(C.a)(Object(C.a)({},e),{},{ref:t,scale:.8,onClick:function(){a||(e.handleClick(),"introBalloon"!==e.type&&(c((function(e){return!e})),jt(e.balloonId))),u((function(e){return!e}))},children:[Object(N.jsx)(T,{colour:e.colour}),Object(N.jsx)(W,{colour:e.colour,position:[0,-.18,0]}),Object(N.jsx)(B,{position:[0,-.15,0]}),Object(N.jsx)(F,{position:[0,-.48,0]}),Object(N.jsx)(R.a,{follow:!0,lockX:!1,lockY:!1,lockZ:!1,children:Object(N.jsx)(D,{type:e.type,displayMessage:l,position:[0,-.9,0],claimed:a,message:e.message})})]}))})};function A(e){for(var t=["#db504a","#ff6f59","#ffe200","#9bf6ff","#ffd6a5","#caffbf","#ffc6ff","#bdb2ff","#e9ff70","#ff70a6","#ff9770","#c64664","#54428e","#ef476f","#eb5e28"],n=[],o=0;o<e.seeds.length;o++){var r=-.3+Math.cos(Math.PI*o/t.length),a=1+Math.sin(Math.PI*o/t.length);n.push(Object(N.jsx)(L,{buyBalloon:e.buyBalloon,textColour:"#293241",outline:t[o],position:[r,a,0]},S()))}return n}function L(e){var t=Object(o.useRef)(),n=Object(o.useState)(1),r=Object(k.a)(n,2),a=r[0],c=r[1];return Object(N.jsx)("mesh",Object(C.a)(Object(C.a)({},e),{},{ref:t,scale:a,onClick:function(t){return function(t){t.stopPropagation(),e.buyBalloon(e.outline),c(.95),setTimeout((function(){c(1)}),100)}(t)},children:Object(N.jsx)(R.a,{position:e.position,follow:!0,lockX:!1,lockY:!1,lockZ:!1,children:Object(N.jsx)(P.a,{fontSize:.07,outlineWidth:.07+.05,outlineColor:e.outline,color:e.textColour,children:"\xa31"})})}))}var q=function(e){var t=Object(o.useRef)();return Object(N.jsx)("mesh",Object(C.a)(Object(C.a)({},e),{},{ref:t,scale:1,onClick:function(){},children:A(e)}))};var G=[.5,2.8,5];function Y(e){switch(e){case 0:lt();return"   | | ".concat("\n"," \\__/ ");case 1:return"Choose Seed";case 2:return"Send friend request";case 3:return"Buy balloon";default:return"hello"}}function X(e,t){switch(e){case 1:return Object(N.jsx)(Xe,{seeds:t.seeds,selectSeed:t.selectSeed,toggleSeeds:t.toggleSeeds,chosenSeed:t.chosenSeed});case 2:return Object(N.jsx)(oe,{handleSubmit:t.sendFriendRequest});case 3:if(t.seeds.length>0)return Object(N.jsx)(q,{seeds:t.seeds,buyBalloon:t.buyBalloon});default:return""}}var z=function(e){var t=Object(o.useRef)(),n=Object(o.useState)(0),r=Object(k.a)(n,2),a=r[0],c=r[1],s="#293241",i="#b1b5c8";return Object(N.jsxs)("mesh",Object(C.a)(Object(C.a)({},e),{},{ref:t,scale:1,onClick:function(){c(a>=3?0:function(e){return e+1})},children:[Object(N.jsx)(R.a,{position:G,follow:!0,lockX:!1,lockY:!1,lockZ:!1,children:Object(N.jsx)(P.a,{fontSize:.5,outlineWidth:.5,outlineColor:i,color:s,children:Y(a)})}),X(a,e)]}))},_=n(17),J="abcdefghijklmnopqrstuvwxyz0123456789".split(""),Z="#293241",V="#b1b5c8",H="#b1b5c8",K="#293241",Q=.1;function $(e,t,n,o,r){for(var a=[],c=.5,s=3,i=1,l=0;l<J.length;l++){var u=J[l];c+=.3,a.push(Object(N.jsx)(ee,{buildSentence:t,character:u,fontX:c,fontY:s},S())),i%8===0&&(s-=.3,c=.5),i++}return a.push(Object(N.jsx)(te,{handleClick:n,fontX:c+.3,fontY:s,character:"X"},S())),a.push(Object(N.jsx)(te,{handleClick:r,fontX:c+.6,fontY:s,character:"+"},S())),a.push(Object(N.jsx)(ne,{sentence:o,fontX:.8,fontY:s-.3},S())),a}function ee(e){var t=Object(o.useRef)();return Object(N.jsx)("mesh",Object(C.a)(Object(C.a)({},e),{},{ref:t,onClick:function(t){return function(t,n){t.stopPropagation(),e.buildSentence(n)}(t,e.character)},children:Object(N.jsx)(R.a,{follow:!0,lockX:!1,lockY:!1,lockZ:!1,children:Object(N.jsx)(P.a,{fontSize:Q,position:[e.fontX,e.fontY,1],outlineWidth:Q,outlineColor:V,color:Z,children:e.character})})}))}function te(e){var t=Object(o.useRef)();return Object(N.jsx)("mesh",Object(C.a)(Object(C.a)({},e),{},{ref:t,onClick:function(t){return function(t){t.stopPropagation(),e.handleClick()}(t)},children:Object(N.jsx)(R.a,{follow:!0,lockX:!1,lockY:!1,lockZ:!1,children:Object(N.jsx)(P.a,{fontSize:Q,position:[e.fontX,e.fontY,1],outlineWidth:Q,outlineColor:K,color:H,children:e.character})})}))}function ne(e){var t=Object(o.useRef)();return Object(N.jsx)("mesh",Object(C.a)(Object(C.a)({},e),{},{ref:t,onClick:function(t){return function(e,t){e.stopPropagation()}(t,e.character)},children:Object(N.jsx)(R.a,{follow:!0,lockX:!1,lockY:!1,lockZ:!1,children:Object(N.jsx)(P.a,{fontSize:Q,position:[e.fontX,e.fontY,1],outlineWidth:Q,outlineColor:K,color:H,children:e.sentence})})}))}var oe=function(e){var t=Object(o.useState)([]),n=Object(k.a)(t,2),r=n[0],a=n[1],c=Object(o.useState)(""),s=Object(k.a)(c,2),i=s[0],l=s[1],u=Object(o.useState)(!1),d=Object(k.a)(u,2),f=d[0],j=d[1];return Object(o.useEffect)((function(){l(r.join("")),j(f)})),Object(o.useRef)(),Object(N.jsxs)(N.Fragment,{children:[f?Object(N.jsx)(ne,{sentence:i,fontX:.8,fontY:1.8},S()):$(e,(function(e){a((function(t){return[].concat(Object(_.a)(t),[e])}))}),(function(){var e=r.length-1;a((function(t){return t.filter((function(t,n){return n!==e}))}))}),i,(function(){j(!0),e.handleSubmit(i)}))," />"]})},re=n(103);Object(U.b)({OrbitControls:re.a});var ae=function(){var e=Object(U.d)(),t=e.camera,n=e.gl.domElement,r=Object(o.useRef)();return Object(U.c)((function(e){return r.current.update()})),Object(N.jsx)("orbitControls",{ref:r,position:[0,-10,0],args:[t,n],autoRotate:!1,autoRotateSpeed:.2,enabled:!0})};var ce=function(e){var t=Object(o.useRef)();return Object(N.jsxs)("mesh",Object(C.a)(Object(C.a)({},e),{},{ref:t,scale:1,children:[Object(N.jsx)("cylinderGeometry",{args:e.args}),Object(N.jsx)("meshToonMaterial",{color:"#a7c957"})]}))},se=n(106);function ie(e){return Object(N.jsx)(se.a,Object(C.a)({turbidity:.01,distance:45e4,sunPosition:[0,1,0],inclination:.47,elevation:.6,exposure:.3,mieDirectionalG:.04,mieCoefficient:.0045,rayleigh:.1,azimuth:.6},e))}function le(e,t){for(var n=[],o=0;o<t.length;o++){var r=t[o];n.push(Object(N.jsx)(he,{sendPlant:e.sendPlant,friend:!0,position:r.position,name:r.name,friendId:r.friendId,world:r.world},S()))}return n}var ue=function(e){var t=Object(o.useState)([]),n=Object(k.a)(t,2),r=n[0],a=n[1],c=Object(o.useRef)();return Object(o.useEffect)((function(){(function(e){return $e.apply(this,arguments)})(e.userId).then((function(e){return a(e)}))}),[]),Object(N.jsx)(N.Fragment,{children:Object(N.jsx)("mesh",Object(C.a)(Object(C.a)({},e),{},{ref:c,scale:1,children:le(e,r)}))})};var de=function(e){var t=Object(o.useRef)();return Object(N.jsxs)("mesh",Object(C.a)(Object(C.a)({},e),{},{ref:t,scale:1,onClick:function(t){return e.sowPlant(t)},children:[Object(N.jsx)("cylinderGeometry",{args:e.args}),Object(N.jsx)("meshToonMaterial",{color:"#a7c957"})]}))};function fe(e){for(var t=e.world,n=[],o=0;o<t.stalactites.length;o++){var r=t.stalactites[o];n.push(Object(N.jsx)(je,{friend:e.friend,sowPlant:e.sowPlant,args:r.geometry,position:r.position,colour:r.colour},S()))}return n}function je(e){var t=Object(o.useRef)(),n=Object(k.a)(e.args,4),r=n[0],a=(n[1],n[2]),c=n[3];return Object(N.jsx)("group",{children:Object(N.jsxs)("mesh",Object(C.a)(Object(C.a)({},e),{},{ref:t,scale:1,onClick:function(t){return function(t){e.friend?console.log("friend island click"):t.stopPropagation()}(t)},children:[Object(N.jsx)("cylinderGeometry",{args:e.args}),Object(N.jsx)("meshToonMaterial",{color:e.colour}),e.friend?Object(N.jsx)(ce,{position:[0,a/2,0],args:[r,r,.01,c]}):Object(N.jsx)(de,{sowPlant:e.sowPlant,position:[0,a/2,0],args:[r,r,.01,c]})]}))})}function be(e){var t="#293241",n="#b1b5c8",r=Object(o.useRef)();return Object(N.jsx)("mesh",Object(C.a)(Object(C.a)({},e),{},{ref:r,scale:.8,children:Object(N.jsxs)(P.a,{fontSize:1.2,outlineWidth:1,outlineColor:n,color:t,children:[" ",e.name," "]})}))}var he=function(e){var t=Object(o.useRef)(),n=Object(o.useState)(!0),r=Object(k.a)(n,2),a=r[0],c=r[1];return Object(o.useEffect)((function(){c(a)})),Object(N.jsx)(N.Fragment,{children:Object(N.jsxs)("mesh",Object(C.a)(Object(C.a)({},e),{},{ref:t,scale:1,onClick:function(t){return function(t){e.friend&&(t.stopPropagation(),e.sendPlant(e.name,e.friendId))}(t)},children:[fe(e),a&&e.friend?Object(N.jsx)(be,{name:e.name,position:[0,2,0]}):""]}))})};var pe,Oe,ge=function(e){var t=Object(o.useRef)();return Object(N.jsx)(N.Fragment,{children:Object(N.jsxs)("mesh",Object(C.a)(Object(C.a)({},e),{},{ref:t,scale:1,children:[Object(N.jsx)(M,{type:"introBalloon",position:[-.6,2,0],handleClick:e.newWorld,colour:"#ee6055",message:"New garden"}),Object(N.jsx)(M,{type:"introBalloon",position:[.6,2,0],handleClick:e.saveWorld,colour:"#ffd97d",message:"Save garden"})]}))})},me=n(18),xe=n(19),ve=n.p+"static/media/seedbankProto.6cdc7966.png",ye=xe.a.a.attrs({className:"navbar-brand"})(pe||(pe=Object(me.a)([""]))),we=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(N.jsx)(ye,{href:"https://example.com",children:Object(N.jsx)("img",{src:ve,height:"50",alt:"seedbank"})})}}]),n}(o.Component),Se=we,Ce=n(33),ke=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(N.jsxs)(r.a.Fragment,{children:[Object(N.jsx)(Ce.b,{to:"/",className:"navbar-brand",children:"SeedBank"}),Object(N.jsx)(Ce.b,{to:"/",className:"navbar-brand",children:this.props.user})]})}}]),n}(o.Component),Ne=ke,Ee=xe.a.nav.attrs({className:"navbar navbar-expand-lg navbar-dark bg-dark"})(Oe||(Oe=Object(me.a)(["\n    margin-bottom: 20 px;\n"]))),Ie=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(N.jsxs)(Ee,{height:"50%",children:[Object(N.jsx)(Se,{}),Object(N.jsx)(Ne,{user:this.props.user,setUser:this.props.setUser})]})}}]),n}(o.Component),Re=Ie;function Pe(e){var t=Object(k.a)(e.position,3),n=(t[0],t[1],t[2],function(e){switch(e){case"generic_plant":return{bloom:1,leafColour:"#377F34",stemColour:"#499B4A",flowerColour:"#832134"};case"tulip":return{bloom:2,leafColour:"#2D5A27",stemColour:"#567d46",flowerColour:"#ff878d"};case"sunflower":return{bloom:4,leafColour:"#75ae92",stemColour:"#82ac80",flowerColour:"#f8ec89"};case"crocus":return{bloom:1,leafColour:"#76c893",stemColour:"#52b69a",flowerColour:"#3a0ca3"};case"snowdrop":return{bloom:1,leafColour:"#76c893",stemColour:"#52b69a",flowerColour:"#f8f9fa"};case"rose":return{bloom:5,leafColour:"#499B4A",stemColour:"#75ae92",flowerColour:"#9e0059"};case"venusFlyTrap":return{bloom:7,leafColour:"#ccd5ae",stemColour:"#ccd5ae",flowerColour:"#ccd5ae"};default:return}}(e.type)),o=n.bloom,r=n.leafColour,a=n.stemColour,c=n.flowerColour,s=e.growth;s>=o&&(s=o);for(var i=s/24,l=[Object(N.jsx)(Ue,{},S()),Object(N.jsx)(De,{stemColour:a,stemLength:i,position:[0,.05,0]},S())],u=0;u<=s;u++)l.push(Object(N.jsx)(Te,{color:r,position:[.02,.1+u/18,.05]},S()),Object(N.jsx)(Te,{color:r,position:[-.02,.1+u/18,-.05]},S()));return s>=o&&l.push(Object(N.jsx)(Be,{color:c,position:[0,.1+s/11,0]},S())),l}function Ue(e){var t=Object(o.useRef)();return Object(N.jsxs)("mesh",Object(C.a)(Object(C.a)({},e),{},{ref:t,children:[Object(N.jsx)("dodecahedronGeometry",{args:[.035,2]}),Object(N.jsx)("meshToonMaterial",{color:"#947352"})]}))}function De(e){var t=Object(o.useRef)();return Object(N.jsxs)("mesh",Object(C.a)(Object(C.a)({},e),{},{ref:t,scale:.5,children:[Object(N.jsx)("cylinderGeometry",{args:[.01,.03,.3+e.stemLength,12]}),Object(N.jsx)("meshToonMaterial",{color:e.stemColour})]}))}function Te(e){var t=Object(o.useRef)();return Object(N.jsxs)("mesh",Object(C.a)(Object(C.a)({},e),{},{ref:t,children:[Object(N.jsx)("cylinderGeometry",{args:[.02,.05,.02,6]}),Object(N.jsx)("meshToonMaterial",{color:e.color})]}))}function Be(e){var t=Object(o.useRef)();return Object(N.jsxs)("mesh",Object(C.a)(Object(C.a)({},e),{},{ref:t,children:[Object(N.jsx)("dodecahedronGeometry",{args:[.06]}),Object(N.jsx)("meshToonMaterial",{color:e.color})]}))}var We=function(e){var t=Object(o.useRef)();return Object(N.jsx)("group",{children:Object(N.jsx)("mesh",Object(C.a)(Object(C.a)({},e),{},{ref:t,onClick:function(t){return function(t){t.stopPropagation(),console.log("This plant is:"),console.log(e)}(t)},scale:.2,children:Pe(e)}))})},Fe={type:"#293241",outline:"#b1b5c8"},Me={type:"#b1b5c8",outline:"#293241"};function Ae(e){for(var t=[],n=e.seeds.sort(),o=0;o<n.length;o++){var r=n[o];if(0!==r.quantity){var a=.5+Math.sin(Math.PI*o/n.length),c=2+Math.cos(Math.PI*o/(1.9*n.length)),s={};s=r.type===e.chosenSeed?Me:Fe,t.push(Object(N.jsx)(Le,{position:[a,c,0],selectSeed:e.selectSeed,toggleSeeds:e.toggleSeeds,seed:r,colours:s,index:o},S()))}}return 0===t.length&&t.push(Object(N.jsx)(qe,{colours:Fe,index:1},S())),t}function Le(e){var t=e.seed,n=Object(o.useRef)(),r=Object(o.useState)(!1),a=Object(k.a)(r,2);a[0],a[1];return Object(N.jsx)("mesh",Object(C.a)(Object(C.a)({},e),{},{ref:n,children:Object(N.jsx)(R.a,{follow:!0,lockX:!1,lockY:!1,lockZ:!1,children:Object(N.jsxs)(P.a,{fontSize:.12,onClick:function(n){return function(n){n.stopPropagation(),console.log("Clicked on SeedCloud!"),console.log(t.type),console.log(e.index),e.selectSeed(t.type,e.index)}(n)},outlineWidth:.12,outlineColor:e.colours.outline,color:e.colours.type,rotation:[0,0,0],children:[t.type," ","\n","x ",t.quantity]})})}))}function qe(e){var t=Object(o.useRef)();return Object(N.jsx)("mesh",Object(C.a)(Object(C.a)({},e),{},{ref:t,children:Object(N.jsx)(R.a,{follow:!0,lockX:!1,lockY:!1,lockZ:!1,children:Object(N.jsx)(P.a,{fontSize:.25,position:[1,3,1],outlineWidth:.25,outlineColor:e.colours.outline,color:e.colours.type,rotation:[0,0,0],children:"No seeds available"})})}))}var Ge,Ye,Xe=function(e){var t=Object(o.useRef)();return Object(N.jsx)(N.Fragment,{children:Object(N.jsx)("mesh",Object(C.a)(Object(C.a)({},e),{},{ref:t,scale:1,children:Ae(e)}))})};xe.a.button(Ge||(Ge=Object(me.a)(["\ncolor: palevioletred;\nfont-size: 1em;\nmargin: 1em;\npadding: 0.25em 1em;\nborder: 2px solid palevioletred;\nborder-radius: 3px;\n"]))),xe.a.div(Ye||(Ye=Object(me.a)(["\n  background-color: lightgrey;\n  "])));var ze=function(e){Object(o.useRef)();var t=Object(o.useRef)();return Object(N.jsx)("group",{children:Object(N.jsx)("mesh",Object(C.a)(Object(C.a)({ref:t},e),{},{children:Object(N.jsx)("directionalLight",{position:[0,.5,1],intensity:.7})}))})};function _e(e){return Object(N.jsx)(We,{plantId:e.plantId,growth:e.growth,date:e.date,position:e.position,type:e.type},S())}var Je=function e(t,n,o,r){Object(s.a)(this,e),this.userId=t,this.friendId=n,this.friendName=o,this.friendWorld=r};function Ze(){return(Ze=Object(b.a)(j.a.mark((function e(t,n,o,r){var a,c,s,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=y(n,r),console.log("DATE DIFFERENCE in loadBalloons: "+a),e.next=4,O.getBalloons(o);case 4:return c=e.sent,s=c.data.data,i=Ve(s),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ve(e){for(var t=[],n=0;n<e.length;n++){var o=e[n];o.balloonId=o._id,o.claimed||t.push(Object.assign(new pt,o))}return t}var He={max:20,min:-20},Ke={max:10,min:-10},Qe={max:-10,min:-30};function $e(){return($e=Object(b.a)(j.a.mark((function e(t){var n,o,r,a,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("LOADING FRIENDS FOR "+t),e.next=3,O.getFriends(t);case 3:for(n=e.sent,o=n.data.data,r=[],a=0;a<o.length;a++)c=o[a],r.push({friendId:c.friendId,name:c.friendName,world:JSON.parse(c.friendWorld),position:[ft(He),ft(Ke),ft(Qe)]});return e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function et(){return(et=Object(b.a)(j.a.mark((function e(t){var n,o,r,a,c,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("LOADING GARDEN for "+t),e.next=3,O.getPlants(t);case 3:for(n=e.sent,o=n.data.data,r=[],a=lt(Date()).stamp,c=0;c<o.length;c++)console.log("LOADED PLANT IS"),(s=o[c]).date=JSON.parse(s.date),s.growth=tt(s.date,a),console.log(s),r.push(Object.assign(new gt,s));return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tt(e,t){return console.log(e.stamp),console.log(t),y(e.stamp,t)}function nt(){return(nt=Object(b.a)(j.a.mark((function e(t){var n,o,r,a,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("LOADING Seeds FOR "+t),e.next=3,O.getSeeds(t);case 3:for(n=e.sent,o=n.data.data,console.log(o),r=[],a=0;a<o.length;a++)c=o[a],r.push({type:c.type,quantity:c.quantity});return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ot(){return(ot=Object(b.a)(j.a.mark((function e(t,n,o){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!0,e.next=3,O.getFriendByName(o,t).then((function(e){console.log("Already friends?"),console.log(e),e.data.data.friendName!==o||e.data.data.userId!==t?rt(t,n,o):console.log("YES ALREADY FRIENDS")}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rt(e,t,n){return at.apply(this,arguments)}function at(){return(at=Object(b.a)(j.a.mark((function e(t,n,o){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Making friend request to "+o+"from userName"),e.next=3,O.getUser(o).then((function(e){ut(e.data.data._id,"friendRequest",1,"".concat(n," wants to connect!"),n)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ct(){return(ct=Object(b.a)(j.a.mark((function e(t,n,o,r){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.getUser(o).then((function(e){var o=e.data.data._id,a=e.data.data.world,c=e.data.data.name,s=new Je(o,t,n,JSON.stringify(r)),i=new Je(t,o,c,a);O.addFriends(s).then((function(e){console.log("ME ".concat(s.friendName," is friends with ").concat(i.friendName))})),O.addFriends(i).then((function(e){console.log('"FRIEND "'.concat(i.friendName," is friends with ").concat(s.friendName))}))}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function st(e){return e[Math.floor(Math.random()*e.length)]}function it(){return(it=Object(b.a)(j.a.mark((function e(t,n,o){var r,a,c,s,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={world:JSON.stringify(n)},a={worldChosen:o},c=lt(),s={lastLogin:c.stamp},i={world:r,worldChosen:a,lastLogin:s},console.log(i),e.next=8,O.updateGarden(t,i).then((function(e){console.log(e),console.log("Garden updated successfully")}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lt(){var e=new Date,t=e.getDate(),n=e.getMonth()+1,o=e.getFullYear();return{year:o,month:n,day:t,stamp:"".concat(o,"/").concat(n,"/").concat(t)}}function ut(e,t,n,o){return dt.apply(this,arguments)}function dt(){return dt=Object(b.a)(j.a.mark((function e(t,n,o,r){var a,c,s,i=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>4&&void 0!==i[4]?i[4]:"SeedBank",c=i.length>5&&void 0!==i[5]?i[5]:st(["#db504a","#ff6f59","#ffe200","#9bf6ff","#ffd6a5","#caffbf","#ffc6ff","#bdb2ff","#e9ff70","#ff70a6","#ff9770","#c64664","#54428e","#ef476f","#eb5e28"]),console.log("In sendBalloon "+n),s=new pt(t,n,o,r,a,c),console.log(s),e.next=7,O.addBalloons(s).then((function(e){console.log("".concat(n," balloon sent!"))}));case 7:case"end":return e.stop()}}),e)}))),dt.apply(this,arguments)}function ft(e){return Math.random()*(e.max-e.min)+e.min}function jt(e){return bt.apply(this,arguments)}function bt(){return(bt=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),console.log("In UPDATED!"),e.next=4,O.updateBalloons(t,{}).then((function(e){console.log("Balloon updated successfully")}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ht(){return(ht=Object(b.a)(j.a.mark((function e(t,n){var o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("In UPDATED SEEDS!"),console.log(t),console.log(n.type),o={quantity:n.quantity},e.next=6,O.updateSeeds(t,n.type,o).then((function(e){console.log("Seed updated successfully")}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var pt=function e(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"SeedBank",c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:st(["#db504a","#ff6f59","#ffe200","#9bf6ff","#ffd6a5","#caffbf","#ffc6ff","#bdb2ff","#e9ff70","#ff70a6","#ff9770","#c64664","#54428e","#ef476f","#eb5e28"]);Object(s.a)(this,e),this.balloonId=S(),this.userId=t,this.colour=c,this.position=Ot(),this.type=n,this.quantity=o,this.message=r,this.claimed=!1,this.sender=a};function Ot(){return[ft({max:2,min:-2}),ft({max:1.8,min:1.5}),ft({max:1.8,min:-1.8})]}var gt=function e(t,n,o){Object(s.a)(this,e),this.userId=t,this.type=o,this.growth=0,this.position=n,this.date=lt(),this.plantId=S()},mt=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xt();Object(s.a)(this,e),this.stalactites=t};function xt(){for(var e=[],t=0,n=0;n<10;n++)e.push(vt(t)),t+=.1;return e}function vt(e){return{geometry:yt(e),position:wt(e),colour:st(["#6C6460","#8a817c","#6c757d"])}}function yt(e){var t={max:.8-e,min:.01};return[ft({max:1.3-e,min:1-e}),ft(t),ft({max:2.3,min:1}),ft({max:12,min:6})]}function wt(e){var t={max:0+e,min:1+e},n={max:.5,min:-.5};return[ft(n),-ft(t),ft(n)]}var St,Ct,kt,Nt,Et,It,Rt,Pt,Ut,Dt,Tt,Bt=function e(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Object(s.a)(this,e),this.userId=t,this.type=n,this.quantity=o},Wt=(n(97),xe.a.h1.attrs({className:"h1"})(St||(St=Object(me.a)([""])))),Ft=xe.a.div.attrs({className:"form-group"})(Ct||(Ct=Object(me.a)(["\n    margin: 0 30px;\n"]))),Mt=xe.a.label(kt||(kt=Object(me.a)(["\n    margin: 5px;\n"]))),At=xe.a.input.attrs({className:"form-control"})(Nt||(Nt=Object(me.a)(["\n    margin: 5px;\n"]))),Lt=xe.a.button.attrs({className:"btn btn-primary"})(Et||(Et=Object(me.a)(["\n    margin: 15px 15px 15px 5px;\n"]))),qt=xe.a.a.attrs({className:"btn btn-danger"})(It||(It=Object(me.a)(["\n    margin: 15px 15px 15px 5px;\n"]))),Gt=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var o;return Object(s.a)(this,n),(o=t.call(this,e)).handleChangeInputName=function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.value,o.setState({name:n});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o.handleChangeInputEmail=function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.value,o.setState({email:n});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o.handleChangeInputPassword=function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.value,o.setState({password:n});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o.handleAddUser=Object(b.a)(j.a.mark((function e(){var t,n,r,a,c,s,i,l,u,d,f,b,h;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.state,n=t.name,r=t.email,a=t.password,c="",s=new mt,i=JSON.stringify(s),!1,l=lt(),u=l.stamp,!0,d={name:n,email:r,password:a,world:i,worldChosen:false,lastLogin:u,newUser:true},console.log(d),f=!1,e.next=13,O.getUser(n).then((function(e){204===e.status?f=!0:window.alert("Username taken")}));case 13:if(o.setState({name:"",email:"",password:""}),!f){e.next=26;break}return e.next=17,O.addUser(d).then((function(e){window.alert("User added"),o.props.setUser(n,e.data.id,s,!1,u),c=e.data.id}));case 17:return console.log("ID is"),console.log(c),b=new pt(c,"generic_plant",3,"Welcome! 3 generic_plant ".concat("\n"," seeds - go plant!")),h=new pt(c,"tulip",3,"Welcome! 3 tulip ".concat("\n"," seeds - get planting!")),console.log(b),e.next=24,O.addBalloons(b).then((function(e){console.log("Welcome balloon one added")}));case 24:return e.next=26,O.addBalloons(h).then((function(e){console.log("Welcome balloon two added")}));case 26:case"end":return e.stop()}}),e)}))),o.state={name:"",email:"",password:""},o}return Object(i.a)(n,[{key:"render",value:function(){var e=this.state,t=e.name,n=e.email,o=e.password;return Object(N.jsxs)(Ft,{children:[Object(N.jsx)(Wt,{children:"Sign Up"}),Object(N.jsx)(Mt,{children:"Name: "}),Object(N.jsx)(At,{type:"text",value:t,onChange:this.handleChangeInputName}),Object(N.jsx)(Mt,{children:"Email: "}),Object(N.jsx)(At,{type:"text",value:n,onChange:this.handleChangeInputEmail}),Object(N.jsx)(Mt,{children:"Password: "}),Object(N.jsx)(At,{type:"text",value:o,onChange:this.handleChangeInputPassword}),Object(N.jsx)(Lt,{onClick:this.handleAddUser,children:"Sign Up"}),Object(N.jsx)(qt,{href:"/movies/list",children:"Cancel"})]})}}]),n}(o.Component),Yt=Gt,Xt=xe.a.h1.attrs({className:"h1"})(Rt||(Rt=Object(me.a)([""]))),zt=xe.a.div.attrs({className:"form-group"})(Pt||(Pt=Object(me.a)(["\n    margin: 0 30px;\n"]))),_t=xe.a.label(Ut||(Ut=Object(me.a)(["\n    margin: 5px;\n"]))),Jt=xe.a.input.attrs({className:"form-control"})(Dt||(Dt=Object(me.a)(["\n    margin: 5px;\n"]))),Zt=xe.a.button.attrs({className:"btn btn-primary"})(Tt||(Tt=Object(me.a)(["\n    margin: 15px 15px 15px 5px;\n"]))),Vt=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var o;return Object(s.a)(this,n),(o=t.call(this,e)).handleChangeInputName=function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.value,o.setState({name:n});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o.handleChangeInputPassword=function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.value,o.setState({password:n});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o.handleGetUser=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.getUser(o.state.name).then((function(e){if(console.log(e),204===e.status)window.alert("No user found");else if(o.state.password===e.data.data.password){var t=e.data.data.name,n=e.data.data._id,r=JSON.parse(e.data.data.world),a=e.data.data.worldChosen,c=e.data.data.lastLogin;window.alert("Welcome back ".concat(t)),o.props.setUser(t,n,r,a,c,!1)}else window.alert("Incorrect password")}));case 2:case"end":return e.stop()}}),e)}))),o.state={name:"",email:"",password:""},o}return Object(i.a)(n,[{key:"render",value:function(){var e=this.state,t=e.name,n=(e.email,e.password);return Object(N.jsxs)(zt,{children:[Object(N.jsx)(Xt,{children:"Log In"}),Object(N.jsx)(_t,{children:"Name: "}),Object(N.jsx)(Jt,{type:"text",value:t,onChange:this.handleChangeInputName}),Object(N.jsx)(_t,{children:"Password: "}),Object(N.jsx)(Jt,{type:"text",value:n,onChange:this.handleChangeInputPassword}),Object(N.jsx)(Zt,{onClick:this.handleGetUser,children:"Log In"})]})}}]),n}(o.Component),Ht=Vt;n(98);var Kt=function(e){var t=Object(o.useState)([]),n=Object(k.a)(t,2),r=n[0],a=n[1],c=Object(o.useState)([]),s=Object(k.a)(c,2),i=s[0],l=s[1],u=Object(o.useState)(""),d=Object(k.a)(u,2),f=d[0],j=d[1],b=Object(o.useState)(null),h=Object(k.a)(b,2),p=(h[0],h[1]),O=Object(o.useState)([]),y=Object(k.a)(O,2);y[0],y[1],Object(o.useEffect)((function(){(function(e){return nt.apply(this,arguments)})(e.id).then((function(e){return l(e)}))}),[]),Object(o.useEffect)((function(){console.log("USE EFFECT SEEDS!"),console.log("UPDATED SEEDS ARE:"),console.log(i)}),[i]),Object(o.useEffect)((function(){(function(e){return et.apply(this,arguments)})(e.id).then((function(e){return a(function(e){for(var t=[],n=0;n<e.length;n++){var o=e[n];t.push(_e(o))}return t}(e))}))}),[]),Object(o.useEffect)((function(){console.log("USE EFFECT PLANTS!"),console.log("NOW CHECKING ACHIEVEMENTS"),console.log(r.length),r.length%5===0&&0!==r.length?C():console.log(!1)}),[r]);var w=function(){console.log("REMOVE SEED"),j(""),S(-1,f),console.log(i)},S=function(t,n){console.log("UPDATE SEEDS...");var o=i.findIndex((function(e){return e.type===n}));if(-1===o)console.log("NEW SEED in UPDATE SEEDS"),console.log("adding newSeed "+n),l((function(e){return[].concat(Object(_.a)(e),[{type:n,quantity:t}])})),function(e,t){m.apply(this,arguments)}(e.id,n,t);else{console.log("INCREMENT SEEDS");var r=i[o];console.log(r),r.quantity+=t,l((function(e){return[].concat(Object(_.a)(e.filter((function(e){return e.type!==n}))),[r])})),function(e,t){ht.apply(this,arguments)}(e.id,r)}p(null)},C=function(){console.log("CHECK ACHIEVEMENTS");var t=r.length/5;if(i.length<t+2){var n=function(e,t,n){console.log("ACHIEVEMENT CALCULATOR:"),console.log(e);var o=!0,r={};if(e.length===v.length){var a=st(e);return console.log("bonusSeeds"),ut(t,a.type,3,"".concat(n," plants! Bonus ").concat(a.type," seeds!")),null}for(;o;)o=x(r=st(v),e);return ut(t,r.type,3,"".concat(n," plants! ","\n"," ").concat(r.type," unlocked!")),r}(i,e.id,r.length);null!==n&&S(0,n.type)}};return Object(N.jsx)("div",{className:"App",children:Object(N.jsxs)(U.a,{id:"canvas",camera:{position:[0,2,3.5]},children:[Object(N.jsx)(ae,{}),Object(N.jsxs)(o.Suspense,{fallback:console.log("loading"),children:[Object(N.jsx)(he,{friend:!1,sowPlant:function(t){if(f){console.log("SOW PLANT");var n=[t.point.x,t.point.y,t.point.z],o=new gt(e.id,n,f),r=_e(o);a((function(e){return[r].concat(Object(_.a)(e))})),w(),function(e){g.apply(this,arguments)}(o)}},position:[0,0,0],world:e.world,seeds:i}),r,Object(N.jsx)(ze,{}),Object(N.jsx)(ie,{}),Object(N.jsx)(ue,{sendPlant:function(t,n){if(f){var o="".concat(e.userName," sent you ","\n"," a ").concat(f," seed!");ut(n,f,1,o,e.userName),console.log("Sending ".concat(f," to ").concat(t," ").concat(n)),w()}else console.log("No seed selected")},userId:e.id})]}),e.worldChosen?Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(I,{updateSeeds:S,acceptFriend:function(t){!function(e,t,n,o){ct.apply(this,arguments)}(e.id,e.userName,t,e.world)},userId:e.id,today:e.today,lastLogin:e.lastLogin,seeds:i}),Object(N.jsx)(z,{seeds:i,chosenSeed:f,buyBalloon:function(t){var n=st(i),o="Bought: ".concat(n.type," x 3!");ut(e.id,n.type,3,o,"SeedBank",t)},position:[0,-.8,1],sendFriendRequest:function(t){!function(e,t,n){ot.apply(this,arguments)}(e.id,e.userName,t,e.world)},selectSeed:function(e,t){i[t];i[t].quantity>0&&(j(e),p(t))}})]}):Object(N.jsx)(ge,{saveWorld:e.saveWorld,newWorld:e.newWorld})]})})},Qt=(n(99),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var o;return Object(s.a)(this,n),(o=t.call(this,e)).state={userName:"",id:0,world:{},chosenWorld:!1,lastLogin:"",newUser:!0},o.setUser=o.setUser.bind(Object(l.a)(o)),o.newWorld=o.newWorld.bind(Object(l.a)(o)),o.saveWorld=o.saveWorld.bind(Object(l.a)(o)),o.connecToServer=o.connecToServer.bind(Object(l.a)(o)),o}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.connecToServer()}},{key:"connecToServer",value:function(){fetch("/")}},{key:"setUser",value:function(e,t,n,o,r,a){this.setState({userName:e,id:t,world:n,worldChosen:o,lastLogin:r,today:lt().stamp,newUser:a})}},{key:"newWorld",value:function(){var e=new mt;this.setState({world:e})}},{key:"saveWorld",value:function(){this.setState({worldChosen:!0}),function(e,t,n){it.apply(this,arguments)}(this.state.id,this.state.world,!0)}},{key:"render",value:function(){return Object(N.jsxs)("div",{style:{position:"relative",width:"100%",height:"100%"},children:[Object(N.jsx)(Ce.a,{children:Object(N.jsx)(Re,{user:this.state.userName,setUser:this.setUser})}),this.state.userName?Object(N.jsx)(Kt,{id:this.state.id,userName:this.state.userName,newWorld:this.newWorld,world:this.state.world,worldChosen:this.state.worldChosen,saveWorld:this.saveWorld,lastLogin:this.state.lastLogin,today:this.state.today}):Object(N.jsxs)("div",{children:[Object(N.jsx)(Ht,{setUser:this.setUser}),Object(N.jsx)(Yt,{setUser:this.setUser})]})]})}}]),n}(r.a.Component)),$t=Qt;c.a.render(Object(N.jsx)($t,{}),document.getElementById("root"))},97:function(e,t,n){},98:function(e,t,n){}},[[100,1,2]]]);
//# sourceMappingURL=main.6f851c2b.chunk.js.map
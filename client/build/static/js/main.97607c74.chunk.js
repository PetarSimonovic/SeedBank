(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{100:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(58),s=n.n(o),c=n(0),i=n(3),l=n(10),u=n(4),j=n(5);function d(e){var t,n=!0,a={};if(e.length===h.length)return e;for(;n;)n=b(a=(t=h)[Math.floor(Math.random()*t.length)],e);return function(e,t,n){for(var a=[],r=0;r<e.length;r++){var o=e[r];o.type===t.type&&(console.log(t),o.quantity+=t.quantity,console.log(o)),a.push(o)}n&&a.push(t);return a}(e,a,!0)}function b(e,t){for(var n=0;n<t.length;n++){if(t[n].type===e.type)return!0}return!1}var h=[{type:"generic_plant",quantity:3},{type:"tulip",quantity:3},{type:"sunflower",quantity:3},{type:"crocus",quantity:3},{type:"snowdrop",quantity:3},{type:"rose",quantity:3},{type:"venusFlyTrap",quantity:3}];function O(e,t){var n=new Date(e),a=new Date(t).getTime()-n.getTime();return Math.round(a/864e5)}var f=n(105);function p(){return Object(f.a)()}var m=n(8),g=n(2);function x(e){for(var t=[],n=e.balloons,a=e.removeBalloon,r=e.updateSeeds,o=e.seeds,s=function(e){var s=n[e];t.push(Object(g.jsx)(U,{claimed:s.claimed,seeds:o,position:s.position,index:e,handleClick:function(t){if(!s.claimed){var n=Math.floor(Math.random()*o.length);r(3,n),a(e)}},colour:s.colour},p()))},c=0;c<n.length;c++)s(c);return t}var v=function(e){var t=Object(a.useRef)();return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)("mesh",Object(m.a)(Object(m.a)({},e),{},{ref:t,scale:1,children:x(e)}))})},y=n(102),w=n(106),C=n(20);function k(e){var t=Object(a.useRef)();return Object(g.jsxs)("mesh",Object(m.a)(Object(m.a)({},e),{},{ref:t,scale:1,children:[Object(g.jsx)("dodecahedronGeometry",{args:[.153,8]}),Object(g.jsx)("meshToonMaterial",{color:e.colour})]}))}function S(e){var t=Object(a.useRef)();return Object(g.jsxs)("mesh",Object(m.a)(Object(m.a)({},e),{},{ref:t,scale:1,children:[Object(g.jsx)("cylinderGeometry",{args:[.005,.005,.5,3]}),Object(g.jsx)("meshToonMaterial",{color:"#16161D"})]}))}function N(e){var t=Object(a.useRef)();return Object(g.jsxs)("mesh",Object(m.a)(Object(m.a)({},e),{},{ref:t,scale:1,children:[Object(g.jsx)("cylinderGeometry",{args:[.15,-.01,.3,16]}),Object(g.jsx)("meshToonMaterial",{color:e.colour})]}))}function R(e){var t=Object(a.useRef)();return Object(g.jsxs)("mesh",Object(m.a)(Object(m.a)({},e),{},{ref:t,scale:1,children:[Object(g.jsx)("boxGeometry",{args:[.15,.15,.15]}),Object(g.jsx)("meshToonMaterial",{color:"#7f5539"})]}))}var U=function(e){var t=Object(a.useRef)(),n="#293241",r="#b1b5c8";return Object(C.c)((function(e,n){return t.current.rotation.y+=.01})),Object(g.jsx)("group",{children:Object(g.jsxs)("mesh",Object(m.a)(Object(m.a)({},e),{},{ref:t,scale:.8,onClick:e.handleClick,children:[Object(g.jsx)(k,{colour:e.colour}),Object(g.jsx)(N,{colour:e.colour,position:[0,-.18,0]}),Object(g.jsx)(S,{position:[0,-.15,0]}),Object(g.jsx)(R,{position:[0,-.48,0]}),Object(g.jsx)(y.a,{follow:!0,lockX:!1,lockY:!1,lockZ:!1,children:Object(g.jsxs)(w.a,{position:[0,-.7,0],fontSize:.09,outlineWidth:.04,outlineColor:r,color:n,claimed:!0,children:[" ",e.message," "]})})]}))})},M=n(103);Object(C.b)({OrbitControls:M.a});var P=function(){var e=Object(C.d)(),t=e.camera,n=e.gl.domElement,r=Object(a.useRef)();return Object(C.c)((function(e){return r.current.update()})),Object(g.jsx)("orbitControls",{ref:r,position:[0,-10,0],args:[t,n],autoRotate:!0,autoRotateSpeed:.2,enabled:!0})},T=n(107);function G(e){return Object(g.jsx)(T.a,Object(m.a)({turbidity:.01,distance:45e4,sunPosition:[0,1,0],inclination:.47,elevation:.6,exposure:.3,mieDirectionalG:.04,mieCoefficient:.0045,rayleigh:.1,azimuth:.6},e))}n(49);var L=function(e){var t=Object(a.useRef)();return Object(g.jsxs)("mesh",Object(m.a)(Object(m.a)({},e),{},{ref:t,scale:1,onClick:function(t){return e.sowPlant(t)},children:[Object(g.jsx)("cylinderGeometry",{args:e.args}),Object(g.jsx)("meshToonMaterial",{color:"#a7c957"})]}))};var W,I,q=function(e){var t=Object(a.useRef)();return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("mesh",Object(m.a)(Object(m.a)({},e),{},{ref:t,scale:1,children:[Object(g.jsx)(U,{position:[-.6,2,0],handleClick:e.newWorld,colour:"#ee6055",message:"New world"}),Object(g.jsx)(U,{position:[.6,2,0],handleClick:e.saveWorld,colour:"#ffd97d",message:"Save world"})]}))})},E=n(16),D=n(17),A=n.p+"static/media/seedbankProto.6cdc7966.png",F=D.a.a.attrs({className:"navbar-brand"})(W||(W=Object(E.a)([""]))),z=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(g.jsx)(F,{href:"https://example.com",children:Object(g.jsx)("img",{src:A,height:"50",alt:"seedbank"})})}}]),n}(a.Component),B=z,J=n(32),X=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(g.jsxs)(r.a.Fragment,{children:[Object(g.jsx)(J.b,{to:"/",className:"navbar-brand",children:"SeedBank"}),Object(g.jsx)(J.b,{to:"/",className:"navbar-brand",children:this.props.user})]})}}]),n}(a.Component),Y=X,Z=D.a.nav.attrs({className:"navbar navbar-expand-lg navbar-dark bg-dark"})(I||(I=Object(E.a)(["\n    margin-bottom: 20 px;\n"]))),_=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(g.jsxs)(Z,{height:"50%",children:[Object(g.jsx)(B,{}),Object(g.jsx)(Y,{user:this.props.user,setUser:this.props.setUser})]})}}]),n}(a.Component),V=_;var H=function(e){var t=Ge();return Object(g.jsx)(y.a,{position:[.5,1,6],args:[20,200],follow:!0,lockX:!1,lockY:!1,lockZ:!1,children:Object(g.jsxs)(w.a,{fontSize:.5,color:"#857c8d",children:[t.day," ",t.month," ",t.year]})})},K=n(11);function Q(e){var t=Object(K.a)(e.position,3),n=(t[0],t[1],t[2],function(e){switch(e){case"generic_plant":return{bloom:1,leafColour:"#377F34",stemColour:"#499B4A",flowerColour:"#832134"};case"tulip":return{bloom:2,leafColour:"#2D5A27",stemColour:"#567d46",flowerColour:"#ff878d"};case"sunflower":return{bloom:4,leafColour:"#75ae92",stemColour:"#82ac80",flowerColour:"#f8ec89"};case"crocus":return{bloom:1,leafColour:"#76c893",stemColour:"#52b69a",flowerColour:"#3a0ca3"};case"snowdrop":return{bloom:1,leafColour:"#76c893",stemColour:"#52b69a",flowerColour:"#f8f9fa"};case"rose":return{bloom:5,leafColour:"#499B4A",stemColour:"#75ae92",flowerColour:"#9e0059"};case"venusFlyTrap":return{bloom:7,leafColour:"#ccd5ae",stemColour:"#ccd5ae",flowerColour:"#ccd5ae"};default:return}}(e.type)),a=n.bloom,r=n.leafColour,o=n.stemColour,s=n.flowerColour,c=e.growth;c>=a&&(c=a);for(var i=c/24,l=[Object(g.jsx)($,{},p()),Object(g.jsx)(ee,{stemColour:o,stemLength:i,position:[0,.05,0]},p())],u=0;u<=c;u++)l.push(Object(g.jsx)(te,{color:r,position:[.02,.1+u/18,.05]},p()),Object(g.jsx)(te,{color:r,position:[-.02,.1+u/18,-.05]},p()));return c>=a&&l.push(Object(g.jsx)(ne,{color:s,position:[0,.1+c/11,0]},p())),l}function $(e){var t=Object(a.useRef)();return Object(g.jsxs)("mesh",Object(m.a)(Object(m.a)({},e),{},{ref:t,children:[Object(g.jsx)("dodecahedronGeometry",{args:[.035,2]}),Object(g.jsx)("meshToonMaterial",{color:"#947352"})]}))}function ee(e){var t=Object(a.useRef)();return Object(g.jsxs)("mesh",Object(m.a)(Object(m.a)({},e),{},{ref:t,scale:.5,children:[Object(g.jsx)("cylinderGeometry",{args:[.01,.03,.3+e.stemLength,12]}),Object(g.jsx)("meshToonMaterial",{color:e.stemColour})]}))}function te(e){var t=Object(a.useRef)();return Object(g.jsxs)("mesh",Object(m.a)(Object(m.a)({},e),{},{ref:t,children:[Object(g.jsx)("cylinderGeometry",{args:[.02,.05,.02,6]}),Object(g.jsx)("meshToonMaterial",{color:e.color})]}))}function ne(e){var t=Object(a.useRef)();return Object(g.jsxs)("mesh",Object(m.a)(Object(m.a)({},e),{},{ref:t,children:[Object(g.jsx)("dodecahedronGeometry",{args:[.06]}),Object(g.jsx)("meshToonMaterial",{color:e.color})]}))}var ae=function(e){var t=Object(a.useRef)();return Object(g.jsx)("group",{children:Object(g.jsx)("mesh",Object(m.a)(Object(m.a)({},e),{},{ref:t,onClick:function(t){return function(t){t.stopPropagation(),console.log("This plant is:"),console.log(e)}(t)},scale:.2,children:Q(e)}))})},re=n(104),oe={type:"#293241",outline:"#b1b5c8"},se={type:"#b1b5c8",outline:"#293241"};function ce(e){if(console.log("PROPS in SEEDSELECTORS"),console.log(e),!e.seedList)return[];for(var t=[],n=0,a=0;a<e.seeds.length;a++){console.log("Generating seedselectors"),console.log("INDEX "+a);var r=e.seeds[a];if(0!==r.quantity){n++;var o={};o=r.type===e.chosenSeed?se:oe,t.push(Object(g.jsx)(le,{selectSeed:e.selectSeed,seed:r,colours:o,index:a,textPosition:n,position:[0,0,0]}))}}return 0===t.length&&t.push(Object(g.jsx)(ue,{colours:oe,index:1})),t}function ie(e){var t=Object(a.useRef)(),n=Object(a.useState)(1),r=Object(K.a)(n,2),o=r[0],s=r[1],c=function(){s(.97),e.toggleSeeds(),setTimeout((function(){s(1)}),100)};return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)("mesh",Object(m.a)(Object(m.a)({},e),{},{ref:t,onClick:c,scale:o,children:Object(g.jsx)(re.a,Object(m.a)(Object(m.a)({onClick:c,args:[.2,.2,.2],radius:.05,smoothness:4},e),{},{children:Object(g.jsx)("meshToonMaterial",{attach:"material",color:"#212529"})}))}))})}function le(e){var t=e.seed,n=Object(a.useRef)(),r=Object(a.useState)(!1),o=Object(K.a)(r,2);o[0],o[1];return Object(g.jsx)("mesh",Object(m.a)(Object(m.a)({},e),{},{ref:n,children:Object(g.jsx)(y.a,{follow:!0,lockX:!1,lockY:!1,lockZ:!1,children:Object(g.jsxs)(w.a,{fontSize:.05,onClick:function(n){return function(n){n.stopPropagation(),console.log(t.type),e.selectSeed(t.type,e.index)}(n)},position:[.5,e.textPosition/4,0],outlineWidth:.04,outlineColor:e.colours.outline,color:e.colours.type,rotation:[0,0,0],children:["seed: ",t.type," ","\n","quantity: ",t.quantity]})})}))}function ue(e){var t=Object(a.useRef)();return Object(g.jsx)("mesh",Object(m.a)(Object(m.a)({},e),{},{ref:t,children:Object(g.jsx)(y.a,{follow:!0,lockX:!1,lockY:!1,lockZ:!1,children:Object(g.jsx)(w.a,{fontSize:.05,position:[.5,e.index/4,0],outlineWidth:.04,outlineColor:e.colours.outline,color:e.colours.type,rotation:[0,0,0],children:"No seeds available"})})}))}function je(e){var t=Object(a.useRef)();return Object(g.jsx)("group",{children:Object(g.jsxs)("mesh",Object(m.a)(Object(m.a)({},e),{},{ref:t,scale:1,onClick:function(e){return function(e){e.stopPropagation()}(e)},children:[Object(g.jsx)("cylinderGeometry",{args:[.2,.01,.5,12]}),Object(g.jsx)("meshToonMaterial",{color:"#6c757d"})]}))})}var de,be,he=function(e){var t=Object(a.useRef)();return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("mesh",Object(m.a)(Object(m.a)({},e),{},{ref:t,scale:1,children:[Object(g.jsx)(je,{seeds:e.seeds,selectSeed:e.selectSeed}),Object(g.jsx)(ie,{position:[0,.1,0],toggleSeeds:e.toggleSeeds}),ce(e)]}))})};D.a.button(de||(de=Object(E.a)(["\ncolor: palevioletred;\nfont-size: 1em;\nmargin: 1em;\npadding: 0.25em 1em;\nborder: 2px solid palevioletred;\nborder-radius: 3px;\n"]))),D.a.div(be||(be=Object(E.a)(["\n  background-color: lightgrey;\n  "])));var Oe=function(e){Object(a.useRef)();var t=Object(a.useRef)();return Object(g.jsx)("group",{children:Object(g.jsx)("mesh",Object(m.a)(Object(m.a)({ref:t},e),{},{children:Object(g.jsx)("directionalLight",{position:[0,.5,1],intensity:.7})}))})};function fe(e){for(var t=e.world,n=[],a=0;a<t.stalactites.length;a++){var r=t.stalactites[a];n.push(Object(g.jsx)(pe,{sowPlant:e.sowPlant,args:r.geometry,position:r.position,colour:r.colour},p()))}return n}function pe(e){var t=Object(a.useRef)(),n=Object(K.a)(e.args,4),r=n[0],o=(n[1],n[2]),s=n[3];return Object(g.jsx)("group",{children:Object(g.jsxs)("mesh",Object(m.a)(Object(m.a)({},e),{},{ref:t,scale:1,onClick:function(e){return function(e){e.stopPropagation()}(e)},children:[Object(g.jsx)("cylinderGeometry",{args:e.args}),Object(g.jsx)("meshToonMaterial",{color:e.colour}),Object(g.jsx)(L,{sowPlant:e.sowPlant,position:[0,o/2,0],args:[r,r,.01,s]})]}))})}var me,ge,xe=function(e){var t=Object(a.useRef)();return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)("mesh",Object(m.a)(Object(m.a)({},e),{},{ref:t,scale:1,children:fe(e)}))})};D.a.button(me||(me=Object(E.a)(["\ncolor: palevioletred;\nfont-size: 1em;\nmargin: 1em;\npadding: 0.25em 1em;\nborder: 2px solid palevioletred;\nborder-radius: 3px;\n"]))),D.a.div(ge||(ge=Object(E.a)(["\n  background-color: lightgrey;\n  "])));function ve(e){for(var t=[],n=Ge(Date()).stamp,a=0;a<e.length;a++){var r=e[a],o=ye(r.date,n);t.push(Object(g.jsx)(ae,{growth:o,date:r.date,position:r.position,type:r.type},r.key))}return console.log(t),t}function ye(e,t){return console.log(e.stamp),console.log(t),O(e.stamp,t)}function we(e){return e[Math.floor(Math.random()*e.length)]}var Ce=n(14),ke=n.n(Ce),Se=n(19),Ne=n(66),Re=n.n(Ne).a.create({baseURL:"/api"}),Ue={addUser:function(e){return Re.post("/user",e)},getUser:function(e){return Re.get("/user/".concat(e))},updateGarden:function(e,t){return Re.put("/user/".concat(e),t)}};function Me(e,t,n,a,r){return Pe.apply(this,arguments)}function Pe(){return(Pe=Object(Se.a)(ke.a.mark((function e(t,n,a,r,o){var s,c,i,l,u,j,d,b;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=Te(n),c={garden:s},i={world:JSON.stringify(a)},l={seeds:o},u={worldChosen:r},j=Ge(),d={lastLogin:j.stamp},b={garden:c,world:i,worldChosen:u,seeds:l,lastLogin:d},console.log("Attempting to save garden"),e.next=11,Ue.updateGarden(t,b).then((function(e){console.log("Garden updated successfully")}));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Te(e){for(var t=[],n=0;n<e.length;n++){var a=e[n].key,r=e[n].props,o={key:a,growth:r.growth,date:r.date,position:r.position,type:r.type};t.push(o)}return t}function Ge(){var e=new Date,t=e.getDate(),n=e.getMonth()+1,a=e.getFullYear();return{year:a,month:n,day:t,stamp:"".concat(a,"/").concat(n,"/").concat(t)}}function Le(e){return Math.random()*(e.max-e.min)+e.min}var We=function e(t){Object(c.a)(this,e),this.id=p(),this.colour=we(["#db504a","#ff6f59","#ffe200","#9bf6ff","#ffd6a5","#caffbf","#ffc6ff","#bdb2ff","#e9ff70","#ff70a6","#ff9770"]),this.position=function(){var e={max:1.8,min:1.5},t={max:1.8,min:-1.8};return[Le({max:2,min:-2}),Le(e),Le(t)]}(),this.claimed=!1};var Ie=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe();Object(c.a)(this,e),this.stalactites=t};function qe(){for(var e=[],t=0,n=0;n<10;n++)e.push(Ee(t)),t+=.1;return e}function Ee(e){return{geometry:De(e),position:Ae(e),colour:we(["#6C6460","#8a817c","#6c757d"])}}function De(e){var t={max:.8-e,min:.01};return[Le({max:1.3-e,min:1-e}),Le(t),Le({max:2.3,min:1}),Le({max:12,min:6})]}function Ae(e){var t={max:0+e,min:1+e},n={max:.5,min:-.5};return[Le(n),-Le(t),Le(n)]}n(98);var Fe,ze,Be,Je,Xe,Ye,Ze,_e,Ve,He,Ke,Qe=D.a.h1.attrs({className:"h1"})(Fe||(Fe=Object(E.a)([""]))),$e=D.a.div.attrs({className:"form-group"})(ze||(ze=Object(E.a)(["\n    margin: 0 30px;\n"]))),et=D.a.label(Be||(Be=Object(E.a)(["\n    margin: 5px;\n"]))),tt=D.a.input.attrs({className:"form-control"})(Je||(Je=Object(E.a)(["\n    margin: 5px;\n"]))),nt=D.a.button.attrs({className:"btn btn-primary"})(Xe||(Xe=Object(E.a)(["\n    margin: 15px 15px 15px 5px;\n"]))),at=D.a.a.attrs({className:"btn btn-danger"})(Ye||(Ye=Object(E.a)(["\n    margin: 15px 15px 15px 5px;\n"]))),rt=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).handleChangeInputName=function(){var e=Object(Se.a)(ke.a.mark((function e(t){var n;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.value,a.setState({name:n});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleChangeInputEmail=function(){var e=Object(Se.a)(ke.a.mark((function e(t){var n;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.value,a.setState({email:n});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleChangeInputPassword=function(){var e=Object(Se.a)(ke.a.mark((function e(t){var n;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.value,a.setState({password:n});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleAddUser=Object(Se.a)(ke.a.mark((function e(){var t,n,r,o,s,c,i,l,u,j;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state,n=t.name,r=t.email,o=t.password,s=new Ie,c=JSON.stringify(s),i=[{type:"generic_plant",quantity:3},{type:"tulip",quantity:3}],!1,l=Ge(),u=l.stamp,j={name:n,email:r,password:o,world:c,worldChosen:false,seeds:i,lastLogin:u},console.log(j),e.next=11,Ue.addUser(j).then((function(e){window.alert("User added"),a.setState({name:"",email:"",password:""}),console.log("SEEDS on SIGN UP"),console.log(i),a.props.setUser(n,e.data.id,[],s,!1,i,u)}));case 11:case"end":return e.stop()}}),e)}))),a.state={name:"",email:"",password:""},a}return Object(i.a)(n,[{key:"render",value:function(){var e=this.state,t=e.name,n=e.email,a=e.password;return Object(g.jsxs)($e,{children:[Object(g.jsx)(Qe,{children:"Sign Up"}),Object(g.jsx)(et,{children:"Name: "}),Object(g.jsx)(tt,{type:"text",value:t,onChange:this.handleChangeInputName}),Object(g.jsx)(et,{children:"Email: "}),Object(g.jsx)(tt,{type:"text",value:n,onChange:this.handleChangeInputEmail}),Object(g.jsx)(et,{children:"Password: "}),Object(g.jsx)(tt,{type:"text",value:a,onChange:this.handleChangeInputPassword}),Object(g.jsx)(nt,{onClick:this.handleAddUser,children:"Sign Up"}),Object(g.jsx)(at,{href:"/movies/list",children:"Cancel"})]})}}]),n}(a.Component),ot=rt,st=D.a.h1.attrs({className:"h1"})(Ze||(Ze=Object(E.a)([""]))),ct=D.a.div.attrs({className:"form-group"})(_e||(_e=Object(E.a)(["\n    margin: 0 30px;\n"]))),it=D.a.label(Ve||(Ve=Object(E.a)(["\n    margin: 5px;\n"]))),lt=D.a.input.attrs({className:"form-control"})(He||(He=Object(E.a)(["\n    margin: 5px;\n"]))),ut=D.a.button.attrs({className:"btn btn-primary"})(Ke||(Ke=Object(E.a)(["\n    margin: 15px 15px 15px 5px;\n"]))),jt=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).handleChangeInputName=function(){var e=Object(Se.a)(ke.a.mark((function e(t){var n;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.value,a.setState({name:n});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleChangeInputPassword=function(){var e=Object(Se.a)(ke.a.mark((function e(t){var n;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.value,a.setState({password:n});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleGetUser=Object(Se.a)(ke.a.mark((function e(){return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue.getUser(a.state.name).then((function(e){if(console.log(e),console.log("Name is "+e.data.data.name),a.state.password===e.data.data.password){var t=e.data.data.name,n=e.data.data._id,r=ve(e.data.data.garden),o=JSON.parse(e.data.data.world),s=e.data.data.seeds,c=e.data.data.worldChosen,i=e.data.data.lastLogin;window.alert("Welcome back ".concat(t)),a.props.setUser(t,n,r,o,c,s,i)}else window.alert("Incorrect password")}));case 2:case"end":return e.stop()}}),e)}))),a.state={name:"",email:"",password:""},a}return Object(i.a)(n,[{key:"render",value:function(){var e=this.state,t=e.name,n=(e.email,e.password);return Object(g.jsxs)(ct,{children:[Object(g.jsx)(st,{children:"Log In"}),Object(g.jsx)(it,{children:"Name: "}),Object(g.jsx)(lt,{type:"text",value:t,onChange:this.handleChangeInputName}),Object(g.jsx)(it,{children:"Password: "}),Object(g.jsx)(lt,{type:"text",value:n,onChange:this.handleChangeInputPassword}),Object(g.jsx)(ut,{onClick:this.handleGetUser,children:"Log In"})]})}}]),n}(a.Component),dt=jt,bt=n(13),ht=n(18);var Ot=function(e){var t,n=Object(a.useState)(e.garden),r=Object(K.a)(n,2),o=r[0],s=r[1],c=Object(a.useState)(""),i=Object(K.a)(c,2),l=i[0],u=i[1],j=Object(a.useState)(e.seeds),b=Object(K.a)(j,2),h=b[0],f=b[1],m=Object(a.useState)(null),x=Object(K.a)(m,2),y=x[0],w=x[1],k=Object(a.useState)(function(e,t,n,a){O(n,a);var r=[];return O(n,a)>0&&(console.log("BALLOON COMING!"),r.push(new We)),r}(0,0,e.lastLogin,e.today)),S=Object(K.a)(k,2),N=S[0],R=S[1],U=Object(a.useState)(!1),M=Object(K.a)(U,2),T=M[0],L=M[1],W=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y,n=Object(ht.a)(h);n[t].quantity+=e,f(n),w(null)};return Object(a.useEffect)((function(){console.log("Calling saveGarden"),Me(e.id,o,e.world,e.worldChosen,h),L(T),function(){var e=o.length%5,t=o.length/5;if(0===e&&o.length>0&&h.length<t+2){console.log("Achievement!");var n=d(h);console.log("New seeds is"),console.log(n),f(n)}}()})),Object(g.jsx)("div",{className:"App",children:Object(g.jsxs)(C.a,{id:"canvas",camera:{position:[0,2,3.5]},children:[Object(g.jsx)(P,{}),Object(g.jsxs)(a.Suspense,{fallback:console.log("loading"),children:[Object(g.jsx)(xe,{sowPlant:function(e){if(l){var t=function(e,t){console.log("In createPlant");var n=[e.point.x,e.point.y,e.point.z],a=p(),r=Ge();return Object(g.jsx)(ae,{growth:0,date:r,position:n,type:t},a)}(e,l);u(""),s((function(e){return[t].concat(Object(ht.a)(e))})),W(-1)}},position:[0,0,0],world:e.world,seeds:h}),o,Object(g.jsx)(v,{removeBalloon:function(e){var t=N[e];console.log("REMOVED BALLOON"),console.log(t),t.claimed=!0,R((function(e){return[e.filter((function(e){return e.id!==t.id})),t]}))},updateSeeds:W,balloons:N,seeds:h}),Object(g.jsx)(Oe,{}),Object(g.jsx)(G,{}),Object(g.jsx)(H,{today:e.today})]}),e.worldChosen?Object(g.jsx)(he,(t={seeds:h,chosenSeed:l,seedList:T,position:[-1,-1,1.9],selectSeed:function(e,t){h[t];h[t].quantity>0&&(u(e),w(t))}},Object(bt.a)(t,"chosenSeed",l),Object(bt.a)(t,"toggleSeeds",(function(){L((function(e){return!e})),console.log("TOGGLE "+T)})),t)):Object(g.jsx)(q,{saveWorld:e.saveWorld,newWorld:e.newWorld})]})})},ft=(n(99),function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={userName:"",id:0,garden:[],world:{},chosenWorld:!1,seeds:[],lastLogin:""},a.setUser=a.setUser.bind(Object(l.a)(a)),a.newWorld=a.newWorld.bind(Object(l.a)(a)),a.saveWorld=a.saveWorld.bind(Object(l.a)(a)),a.connecToServer=a.connecToServer.bind(Object(l.a)(a)),a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.connecToServer()}},{key:"connecToServer",value:function(){fetch("/")}},{key:"setUser",value:function(e,t,n,a,r,o,s){this.setState({userName:e,id:t,garden:n,world:a,worldChosen:r,seeds:o,lastLogin:s,today:Ge().stamp})}},{key:"newWorld",value:function(){var e=new Ie;this.setState({world:e})}},{key:"saveWorld",value:function(){this.setState({worldChosen:!0}),Me(this.state.id,[],this.state.world,!0,this.state.seeds)}},{key:"render",value:function(){return Object(g.jsxs)("div",{style:{position:"relative",width:"100%",height:"100%"},children:[Object(g.jsx)(J.a,{children:Object(g.jsx)(V,{user:this.state.userName,setUser:this.setUser})}),this.state.userName?Object(g.jsx)(Ot,{id:this.state.id,newWorld:this.newWorld,world:this.state.world,worldChosen:this.state.worldChosen,saveWorld:this.saveWorld,seeds:this.state.seeds,garden:this.state.garden,lastLogin:this.state.lastLogin,today:this.state.today}):Object(g.jsxs)("div",{children:[Object(g.jsx)(dt,{setUser:this.setUser})," ",Object(g.jsx)(ot,{setUser:this.setUser})]})]})}}]),n}(r.a.Component));s.a.render(Object(g.jsx)(ft,{}),document.getElementById("root"))},49:function(e,t,n){},98:function(e,t,n){}},[[100,1,2]]]);
//# sourceMappingURL=main.97607c74.chunk.js.map
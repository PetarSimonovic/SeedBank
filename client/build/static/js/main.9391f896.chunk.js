(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{100:function(e,t,n){"use strict";n.r(t);var o=n(2),r=n.n(o),a=n(57),c=n.n(a),s=n(0),i=n(3),l=n(10),u=n(4),d=n(5);function f(e,t){for(var n=0;n<t.length;n++){if(t[n].type===e.type)return!0}return!1}var j=[{type:"generic_plant",quantity:3},{type:"tulip",quantity:3},{type:"sunflower",quantity:3},{type:"crocus",quantity:3},{type:"snowdrop",quantity:3},{type:"rose",quantity:3},{type:"venusFlyTrap",quantity:3}];function b(e,t){var n=new Date(e),o=new Date(t).getTime()-n.getTime();return Math.round(o/864e5)}var h=n(104);function O(){return Object(h.a)()}var p=n(7),g=n(11),m=n(1);function x(e,t){for(var n=[],o=(e.removeBalloon,e.updateSeeds),r=e.acceptFriend,a=e.seeds,c=function(e){var c=t[e];c.type;n.push(Object(m.jsx)(B,{balloonId:c.balloonId,seeds:a,position:c.position,index:e,handleClick:function(e){"friendRequest"===c.type?r(c.sender):o(c.quantity,c.type)},updateBalloons:dt,colour:c.colour,type:c.type,sender:c.sender,quantity:c.quantity,message:c.message},c.balloonId))},s=0;s<t.length;s++)c(s);return n}var v=function(e){var t=Object(o.useRef)(),n=Object(o.useState)([]),r=Object(g.a)(n,2),a=r[0],c=r[1];return Object(o.useEffect)((function(){(function(e,t,n,o){return ze.apply(this,arguments)})(e.seeds,e.lastLogin,e.userId,e.today).then((function(e){return c(e)}))}),[]),Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("mesh",Object(p.a)(Object(p.a)({},e),{},{ref:t,scale:1,children:x(e,a)}))})},y=n(102),w=n(105),C=n(20);function k(e){var t="#293241",n="#b1b5c8",r=Object(o.useRef)();return Object(m.jsx)("mesh",Object(p.a)(Object(p.a)({},e),{},{ref:r,scale:.8,children:Object(m.jsxs)(w.a,{fontSize:.2,outlineWidth:.2,outlineColor:n,color:t,children:[" ",e.displayMessage||"introBalloon"===e.type?e.message:""," "]})}))}function S(e){var t=Object(o.useRef)();return Object(C.c)((function(e,n){return t.current.rotation.y+=.01})),Object(m.jsxs)("mesh",Object(p.a)(Object(p.a)({},e),{},{ref:t,scale:1,children:[Object(m.jsx)("dodecahedronGeometry",{args:[.153,8]}),Object(m.jsx)("meshToonMaterial",{color:e.colour})]}))}function N(e){var t=Object(o.useRef)();return Object(C.c)((function(e,n){return t.current.rotation.y+=.01})),Object(m.jsxs)("mesh",Object(p.a)(Object(p.a)({},e),{},{ref:t,scale:1,children:[Object(m.jsx)("cylinderGeometry",{args:[.005,.005,.5,3]}),Object(m.jsx)("meshToonMaterial",{color:"#16161D"})]}))}function I(e){var t=Object(o.useRef)();return Object(C.c)((function(e,n){return t.current.rotation.y+=.01})),Object(m.jsxs)("mesh",Object(p.a)(Object(p.a)({},e),{},{ref:t,scale:1,children:[Object(m.jsx)("cylinderGeometry",{args:[.15,-.01,.3,16]}),Object(m.jsx)("meshToonMaterial",{color:e.colour})]}))}function R(e){var t=Object(o.useRef)();return Object(C.c)((function(e,n){return t.current.rotation.y+=.01})),Object(m.jsxs)("mesh",Object(p.a)(Object(p.a)({},e),{},{ref:t,scale:1,children:[Object(m.jsx)("boxGeometry",{args:[.15,.15,.15]}),Object(m.jsx)("meshToonMaterial",{color:"#7f5539"})]}))}var B=function(e){var t=Object(o.useRef)(),n=Object(o.useState)(!1),r=Object(g.a)(n,2),a=r[0],c=r[1],s=Object(o.useState)(!1),i=Object(g.a)(s,2),l=i[0],u=i[1];return Object(o.useEffect)((function(){c(a),u(l)}),[]),Object(m.jsx)("group",{children:Object(m.jsxs)("mesh",Object(p.a)(Object(p.a)({},e),{},{ref:t,scale:.8,onClick:function(){a||(e.handleClick(),"introBalloon"!==e.type&&(c((function(e){return!e})),dt(e.balloonId))),u((function(e){return!e}))},children:[Object(m.jsx)(S,{colour:e.colour}),Object(m.jsx)(I,{colour:e.colour,position:[0,-.18,0]}),Object(m.jsx)(N,{position:[0,-.15,0]}),Object(m.jsx)(R,{position:[0,-.48,0]}),Object(m.jsx)(y.a,{follow:!0,lockX:!1,lockY:!1,lockZ:!1,children:Object(m.jsx)(k,{type:e.type,displayMessage:l,position:[0,-.9,0],claimed:a,message:e.message})})]}))})};function E(e){console.log("In balloonsForSale");for(var t=["#db504a","#ff6f59","#ffe200","#9bf6ff","#ffd6a5","#caffbf","#ffc6ff","#bdb2ff","#e9ff70","#ff70a6","#ff9770","#c64664","#54428e","#ef476f","#eb5e28"],n=[],o=0;o<e.seeds.length;o++){var r=Math.cos(Math.PI*o/t.length),a=1+Math.sin(Math.PI*o/t.length);n.push(Object(m.jsx)(P,{buyBalloon:e.buyBalloon,textColour:"#293241",outline:t[o],position:[r,a,0]}))}return console.log(n),n}function P(e){var t=Object(o.useRef)(),n=Object(o.useState)(1),r=Object(g.a)(n,2),a=r[0],c=r[1];return Object(m.jsx)("mesh",Object(p.a)(Object(p.a)({},e),{},{ref:t,scale:a,onClick:function(t){return function(t){t.stopPropagation(),console.log(e),e.buyBalloon(e.outline),c(.95),setTimeout((function(){c(1)}),100)}(t)},children:Object(m.jsx)(y.a,{position:e.position,follow:!0,lockX:!1,lockY:!1,lockZ:!1,children:Object(m.jsx)(w.a,{fontSize:.1,outlineWidth:.1,outlineColor:e.outline,color:e.textColour,children:"\xa31"})})}))}var U=function(e){var t=Object(o.useRef)();return Object(m.jsx)("mesh",Object(p.a)(Object(p.a)({},e),{},{ref:t,scale:1,onClick:function(){},children:E(e)}))},F=[.5,2.8,5];function W(e){switch(console.log("OPTION "+e),e){case 0:st();return"   | | ".concat("\n"," \\__/ ");case 1:return"Choose Seed";case 2:return"Send friend request";case 3:return"Buy balloon";default:return"hello"}}function M(e,t){switch(e){case 1:return Object(m.jsx)(Me,{seeds:t.seeds,selectSeed:t.selectSeed,toggleSeeds:t.toggleSeeds,chosenSeed:t.chosenSeed});case 2:return Object(m.jsx)(H,{handleSubmit:t.sendFriendRequest});case 3:if(t.seeds.length>0)return Object(m.jsx)(U,{seeds:t.seeds,buyBalloon:t.buyBalloon});default:return""}}var T=function(e){var t=Object(o.useRef)(),n=Object(o.useState)(0),r=Object(g.a)(n,2),a=r[0],c=r[1],s="#293241",i="#b1b5c8";return Object(m.jsxs)("mesh",Object(p.a)(Object(p.a)({},e),{},{ref:t,scale:1,onClick:function(){console.log("In handleClick!"),c(a>=3?0:function(e){return e+1}),console.log(a)},children:[Object(m.jsx)(y.a,{position:F,follow:!0,lockX:!1,lockY:!1,lockZ:!1,children:Object(m.jsx)(w.a,{fontSize:.5,outlineWidth:.5,outlineColor:i,color:s,children:W(a)})}),M(a,e)]}))},D=n(17),L="abcdefghijklmnopqrstuvwxyz0123456789".split(""),q="#293241",A="#b1b5c8",G="#b1b5c8",Y="#293241",X=.1;function z(e,t,n,o,r){console.log("User is "+e.userName);for(var a=[],c=.5,s=3,i=1,l=0;l<L.length;l++){var u=L[l];c+=.3,a.push(Object(m.jsx)(_,{buildSentence:t,character:u,fontX:c,fontY:s},O())),i%8===0&&(s-=.3,c=.5),i++}return a.push(Object(m.jsx)(Z,{handleClick:n,fontX:c+.3,fontY:s,character:"X"},O())),a.push(Object(m.jsx)(Z,{handleClick:r,fontX:c+.6,fontY:s,character:"+"},O())),a.push(Object(m.jsx)(J,{sentence:o,fontX:.8,fontY:s-.3},O())),a}function _(e){var t=Object(o.useRef)();return Object(m.jsx)("mesh",Object(p.a)(Object(p.a)({},e),{},{ref:t,onClick:function(t){return function(t,n){t.stopPropagation(),e.buildSentence(n)}(t,e.character)},children:Object(m.jsx)(y.a,{follow:!0,lockX:!1,lockY:!1,lockZ:!1,children:Object(m.jsx)(w.a,{fontSize:X,position:[e.fontX,e.fontY,1],outlineWidth:X,outlineColor:A,color:q,children:e.character})})}))}function Z(e){var t=Object(o.useRef)();return Object(m.jsx)("mesh",Object(p.a)(Object(p.a)({},e),{},{ref:t,onClick:function(t){return function(t){t.stopPropagation(),e.handleClick()}(t)},children:Object(m.jsx)(y.a,{follow:!0,lockX:!1,lockY:!1,lockZ:!1,children:Object(m.jsx)(w.a,{fontSize:X,position:[e.fontX,e.fontY,1],outlineWidth:X,outlineColor:Y,color:G,children:e.character})})}))}function J(e){var t=Object(o.useRef)();return Object(m.jsx)("mesh",Object(p.a)(Object(p.a)({},e),{},{ref:t,onClick:function(t){return function(e,t){e.stopPropagation()}(t,e.character)},children:Object(m.jsx)(y.a,{follow:!0,lockX:!1,lockY:!1,lockZ:!1,children:Object(m.jsx)(w.a,{fontSize:X,position:[e.fontX,e.fontY,1],outlineWidth:X,outlineColor:Y,color:G,children:e.sentence})})}))}var H=function(e){var t=Object(o.useState)([]),n=Object(g.a)(t,2),r=n[0],a=n[1],c=Object(o.useState)(""),s=Object(g.a)(c,2),i=s[0],l=s[1],u=Object(o.useState)(!1),d=Object(g.a)(u,2),f=d[0],j=d[1];return Object(o.useEffect)((function(){l(r.join("")),j(f)})),Object(o.useRef)(),Object(m.jsxs)(m.Fragment,{children:[f?Object(m.jsx)(J,{sentence:i,fontX:.8,fontY:1.8},O()):z(e,(function(e){a((function(t){return[].concat(Object(D.a)(t),[e])}))}),(function(){console.log(r);var e=r.length-1;a((function(t){return t.filter((function(t,n){return n!==e}))})),console.log(r)}),i,(function(){j(!0),e.handleSubmit(i)}))," />"]})},K=n(103);Object(C.b)({OrbitControls:K.a});var V=function(){var e=Object(C.d)(),t=e.camera,n=e.gl.domElement,r=Object(o.useRef)();return Object(C.c)((function(e){return r.current.update()})),Object(m.jsx)("orbitControls",{ref:r,position:[0,-10,0],args:[t,n],autoRotate:!1,autoRotateSpeed:.2,enabled:!0})};var Q=function(e){var t=Object(o.useRef)();return Object(m.jsxs)("mesh",Object(p.a)(Object(p.a)({},e),{},{ref:t,scale:1,children:[Object(m.jsx)("cylinderGeometry",{args:e.args}),Object(m.jsx)("meshToonMaterial",{color:"#a7c957"})]}))},$=n(106);function ee(e){return Object(m.jsx)($.a,Object(p.a)({turbidity:.01,distance:45e4,sunPosition:[0,1,0],inclination:.47,elevation:.6,exposure:.3,mieDirectionalG:.04,mieCoefficient:.0045,rayleigh:.1,azimuth:.6},e))}function te(e,t){console.log("In createFriends"),console.log(e.sendPlant),console.log(t);for(var n=[],o=0;o<t.length;o++){var r=t[o];console.log(r),n.push(Object(m.jsx)(se,{sendPlant:e.sendPlant,friend:!0,position:r.position,name:r.name,friendId:r.friendId,world:r.world}))}return console.log("CREATED FRIENDS"),console.log(n),n}var ne=function(e){var t=Object(o.useState)([]),n=Object(g.a)(t,2),r=n[0],a=n[1],c=Object(o.useRef)();return Object(o.useEffect)((function(){(function(e){return Ke.apply(this,arguments)})(e.userId).then((function(e){return a(e)}))}),[]),Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("mesh",Object(p.a)(Object(p.a)({},e),{},{ref:c,scale:1,children:te(e,r)}))})};var oe=function(e){var t=Object(o.useRef)();return Object(m.jsxs)("mesh",Object(p.a)(Object(p.a)({},e),{},{ref:t,scale:1,onClick:function(t){return e.sowPlant(t)},children:[Object(m.jsx)("cylinderGeometry",{args:e.args}),Object(m.jsx)("meshToonMaterial",{color:"#a7c957"})]}))};function re(e){for(var t=e.world,n=[],o=0;o<t.stalactites.length;o++){var r=t.stalactites[o];n.push(Object(m.jsx)(ae,{friend:e.friend,sowPlant:e.sowPlant,args:r.geometry,position:r.position,colour:r.colour},O()))}return n}function ae(e){var t=Object(o.useRef)(),n=Object(g.a)(e.args,4),r=n[0],a=(n[1],n[2]),c=n[3];return Object(m.jsx)("group",{children:Object(m.jsxs)("mesh",Object(p.a)(Object(p.a)({},e),{},{ref:t,scale:1,onClick:function(t){return function(t){e.friend?console.log("friend island click"):t.stopPropagation()}(t)},children:[Object(m.jsx)("cylinderGeometry",{args:e.args}),Object(m.jsx)("meshToonMaterial",{color:e.colour}),e.friend?Object(m.jsx)(Q,{position:[0,a/2,0],args:[r,r,.01,c]}):Object(m.jsx)(oe,{sowPlant:e.sowPlant,position:[0,a/2,0],args:[r,r,.01,c]})]}))})}function ce(e){var t="#293241",n="#b1b5c8",r=Object(o.useRef)();return Object(m.jsx)("mesh",Object(p.a)(Object(p.a)({},e),{},{ref:r,scale:.8,children:Object(m.jsxs)(w.a,{fontSize:1.2,outlineWidth:1,outlineColor:n,color:t,children:[" ",e.name," "]})}))}var se=function(e){var t=Object(o.useRef)(),n=Object(o.useState)(!0),r=Object(g.a)(n,2),a=r[0],c=r[1];return Object(o.useEffect)((function(){c(a),console.log("name "+a),console.log("friend "+e.friend)})),Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("mesh",Object(p.a)(Object(p.a)({},e),{},{ref:t,scale:1,onClick:function(t){return function(t){e.friend&&(t.stopPropagation(),e.sendPlant(e.name,e.friendId))}(t)},children:[re(e),a&&e.friend?Object(m.jsx)(ce,{name:e.name,position:[0,2,0]}):""]}))})};var ie,le,ue=function(e){var t=Object(o.useRef)();return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("mesh",Object(p.a)(Object(p.a)({},e),{},{ref:t,scale:1,children:[Object(m.jsx)(B,{type:"introBalloon",position:[-.6,2,0],handleClick:e.newWorld,colour:"#ee6055",message:"New garden"}),Object(m.jsx)(B,{type:"introBalloon",position:[.6,2,0],handleClick:e.saveWorld,colour:"#ffd97d",message:"Save garden"})]}))})},de=n(18),fe=n(19),je=n.p+"static/media/seedbankProto.6cdc7966.png",be=fe.a.a.attrs({className:"navbar-brand"})(ie||(ie=Object(de.a)([""]))),he=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(m.jsx)(be,{href:"https://example.com",children:Object(m.jsx)("img",{src:je,height:"50",alt:"seedbank"})})}}]),n}(o.Component),Oe=he,pe=n(33),ge=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(m.jsxs)(r.a.Fragment,{children:[Object(m.jsx)(pe.b,{to:"/",className:"navbar-brand",children:"SeedBank"}),Object(m.jsx)(pe.b,{to:"/",className:"navbar-brand",children:this.props.user})]})}}]),n}(o.Component),me=ge,xe=fe.a.nav.attrs({className:"navbar navbar-expand-lg navbar-dark bg-dark"})(le||(le=Object(de.a)(["\n    margin-bottom: 20 px;\n"]))),ve=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(m.jsxs)(xe,{height:"50%",children:[Object(m.jsx)(Oe,{}),Object(m.jsx)(me,{user:this.props.user,setUser:this.props.setUser})]})}}]),n}(o.Component),ye=ve;function we(e){var t=Object(g.a)(e.position,3),n=(t[0],t[1],t[2],function(e){switch(e){case"generic_plant":return{bloom:1,leafColour:"#377F34",stemColour:"#499B4A",flowerColour:"#832134"};case"tulip":return{bloom:2,leafColour:"#2D5A27",stemColour:"#567d46",flowerColour:"#ff878d"};case"sunflower":return{bloom:4,leafColour:"#75ae92",stemColour:"#82ac80",flowerColour:"#f8ec89"};case"crocus":return{bloom:1,leafColour:"#76c893",stemColour:"#52b69a",flowerColour:"#3a0ca3"};case"snowdrop":return{bloom:1,leafColour:"#76c893",stemColour:"#52b69a",flowerColour:"#f8f9fa"};case"rose":return{bloom:5,leafColour:"#499B4A",stemColour:"#75ae92",flowerColour:"#9e0059"};case"venusFlyTrap":return{bloom:7,leafColour:"#ccd5ae",stemColour:"#ccd5ae",flowerColour:"#ccd5ae"};default:return}}(e.type)),o=n.bloom,r=n.leafColour,a=n.stemColour,c=n.flowerColour,s=e.growth;s>=o&&(s=o);for(var i=s/24,l=[Object(m.jsx)(Ce,{},O()),Object(m.jsx)(ke,{stemColour:a,stemLength:i,position:[0,.05,0]},O())],u=0;u<=s;u++)l.push(Object(m.jsx)(Se,{color:r,position:[.02,.1+u/18,.05]},O()),Object(m.jsx)(Se,{color:r,position:[-.02,.1+u/18,-.05]},O()));return s>=o&&l.push(Object(m.jsx)(Ne,{color:c,position:[0,.1+s/11,0]},O())),l}function Ce(e){var t=Object(o.useRef)();return Object(m.jsxs)("mesh",Object(p.a)(Object(p.a)({},e),{},{ref:t,children:[Object(m.jsx)("dodecahedronGeometry",{args:[.035,2]}),Object(m.jsx)("meshToonMaterial",{color:"#947352"})]}))}function ke(e){var t=Object(o.useRef)();return Object(m.jsxs)("mesh",Object(p.a)(Object(p.a)({},e),{},{ref:t,scale:.5,children:[Object(m.jsx)("cylinderGeometry",{args:[.01,.03,.3+e.stemLength,12]}),Object(m.jsx)("meshToonMaterial",{color:e.stemColour})]}))}function Se(e){var t=Object(o.useRef)();return Object(m.jsxs)("mesh",Object(p.a)(Object(p.a)({},e),{},{ref:t,children:[Object(m.jsx)("cylinderGeometry",{args:[.02,.05,.02,6]}),Object(m.jsx)("meshToonMaterial",{color:e.color})]}))}function Ne(e){var t=Object(o.useRef)();return Object(m.jsxs)("mesh",Object(p.a)(Object(p.a)({},e),{},{ref:t,children:[Object(m.jsx)("dodecahedronGeometry",{args:[.06]}),Object(m.jsx)("meshToonMaterial",{color:e.color})]}))}var Ie=function(e){var t=Object(o.useRef)();return Object(m.jsx)("group",{children:Object(m.jsx)("mesh",Object(p.a)(Object(p.a)({},e),{},{ref:t,onClick:function(t){return function(t){t.stopPropagation(),console.log("This plant is:"),console.log(e)}(t)},scale:.2,children:we(e)}))})},Re={type:"#293241",outline:"#b1b5c8"},Be={type:"#b1b5c8",outline:"#293241"};function Ee(e){for(var t=[],n=0;n<e.seeds.length;n++){var o=e.seeds[n];if(0!==o.quantity){var r=Math.cos(2*Math.PI*n/e.seeds.length),a=3+Math.sin(Math.PI*n/e.seeds.length*2),c={};c=o.type===e.chosenSeed?Be:Re,t.push(Object(m.jsx)(Pe,{position:[r,a,0],selectSeed:e.selectSeed,toggleSeeds:e.toggleSeeds,seed:o,colours:c,index:n},O()))}}return 0===t.length&&t.push(Object(m.jsx)(Ue,{colours:Re,index:1},O())),t}function Pe(e){var t=e.seed,n=Object(o.useRef)(),r=Object(o.useState)(!1),a=Object(g.a)(r,2);a[0],a[1];return Object(m.jsx)("mesh",Object(p.a)(Object(p.a)({},e),{},{ref:n,children:Object(m.jsx)(y.a,{follow:!0,lockX:!1,lockY:!1,lockZ:!1,children:Object(m.jsxs)(w.a,{fontSize:.15,onClick:function(n){return function(n){n.stopPropagation(),e.selectSeed(t.type,e.index)}(n)},outlineWidth:.15,outlineColor:e.colours.outline,color:e.colours.type,rotation:[0,0,0],children:[t.type," ","\n","x ",t.quantity]})})}))}function Ue(e){var t=Object(o.useRef)();return Object(m.jsx)("mesh",Object(p.a)(Object(p.a)({},e),{},{ref:t,children:Object(m.jsx)(y.a,{follow:!0,lockX:!1,lockY:!1,lockZ:!1,children:Object(m.jsx)(w.a,{fontSize:.25,position:[1,3,1],outlineWidth:.25,outlineColor:e.colours.outline,color:e.colours.type,rotation:[0,0,0],children:"No seeds available"})})}))}var Fe,We,Me=function(e){var t=Object(o.useRef)();return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("mesh",Object(p.a)(Object(p.a)({},e),{},{ref:t,scale:1,children:Ee(e)}))})};fe.a.button(Fe||(Fe=Object(de.a)(["\ncolor: palevioletred;\nfont-size: 1em;\nmargin: 1em;\npadding: 0.25em 1em;\nborder: 2px solid palevioletred;\nborder-radius: 3px;\n"]))),fe.a.div(We||(We=Object(de.a)(["\n  background-color: lightgrey;\n  "])));var Te=function(e){Object(o.useRef)();var t=Object(o.useRef)();return Object(m.jsx)("group",{children:Object(m.jsx)("mesh",Object(p.a)(Object(p.a)({ref:t},e),{},{children:Object(m.jsx)("directionalLight",{position:[0,.5,1],intensity:.7})}))})};var De=n(12),Le=n.n(De),qe=n(15),Ae=n(65),Ge=n.n(Ae).a.create({baseURL:"/api"}),Ye={addUser:function(e){return Ge.post("/user",e)},getUser:function(e){return Ge.get("/user/".concat(e))},updateGarden:function(e,t){return Ge.put("/user/".concat(e),t)},addBalloons:function(e){return Ge.post("/balloons",e)},getBalloons:function(e){return Ge.get("/balloons/".concat(e))},updateBalloons:function(e,t){return Ge.put("/balloons/".concat(e),t)},getFriends:function(e){return Ge.get("/friends/".concat(e))},addFriends:function(e){return Ge.post("/friends",e)},getFriendByName:function(e,t){return Ge.get("/friend/".concat(e,"/").concat(t))}};var Xe=function e(t,n,o,r){Object(s.a)(this,e),this.userId=t,this.friendId=n,this.friendName=o,this.friendWorld=r};function ze(){return(ze=Object(qe.a)(Le.a.mark((function e(t,n,o,r){var a,c,s;return Le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),b(n,r),e.next=4,Ye.getBalloons(o);case 4:return a=e.sent,c=a.data.data,console.log("LOADED BALLOONS"),console.log(c),s=_e(c),console.log("LOADED BALLOONS"),console.log(s),e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _e(e){for(var t=[],n=0;n<e.length;n++){console.log("In parsedballoons");var o=e[n];o.balloonId=o._id,console.log(o),o.claimed||t.push(Object.assign(new jt,o))}return t}var Ze={max:20,min:-20},Je={max:10,min:-10},He={max:-10,min:-30};function Ke(){return(Ke=Object(qe.a)(Le.a.mark((function e(t){var n,o,r,a,c;return Le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("LOADING FRIENDS FOR "+t),e.next=3,Ye.getFriends(t);case 3:for(n=e.sent,o=n.data.data,r=[],a=0;a<o.length;a++)c=o[a],r.push({friendId:c.friendId,name:c.friendName,world:JSON.parse(c.friendWorld),position:[ut(Ze),ut(Je),ut(He)]});return e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ve(e){for(var t=[],n=st(Date()).stamp,o=0;o<e.length;o++){var r=e[o],a=Qe(r.date,n);t.push(Object(m.jsx)(Ie,{growth:a,date:r.date,position:r.position,type:r.type},r.key))}return t}function Qe(e,t){return b(e.stamp,t)}function $e(){return($e=Object(qe.a)(Le.a.mark((function e(t,n,o){return Le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!0,e.next=3,Ye.getFriendByName(o,t).then((function(e){console.log("Already friends?"),console.log(e),e.data.data.friendName!==o||e.data.data.userId!==t?et(t,n,o):console.log("YES ALREADY FRIENDS")}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function et(e,t,n){return tt.apply(this,arguments)}function tt(){return(tt=Object(qe.a)(Le.a.mark((function e(t,n,o){return Le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Making friend request to "+o+"from userName"),e.next=3,Ye.getUser(o).then((function(e){it(e.data.data._id,"friendRequest",1,"".concat(n," wants to connect!"),n)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nt(){return(nt=Object(qe.a)(Le.a.mark((function e(t,n,o,r){return Le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye.getUser(o).then((function(e){console.log("IN MAKEFRIENDS");var o=e.data.data._id,a=e.data.data.world,c=e.data.data.name,s=new Xe(o,t,n,JSON.stringify(r));console.log(s);var i=new Xe(t,o,c,a);console.log(i),Ye.addFriends(s).then((function(e){console.log("ME ".concat(s.friendName," is friends with ").concat(i.friendName))})),Ye.addFriends(i).then((function(e){console.log('"FRIEND "'.concat(i.friendName," is friends with ").concat(s.friendName))}))}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ot(e){return e[Math.floor(Math.random()*e.length)]}function rt(e,t,n,o,r){return at.apply(this,arguments)}function at(){return(at=Object(qe.a)(Le.a.mark((function e(t,n,o,r,a){var c,s,i,l,u,d,f,j;return Le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=ct(n),s={garden:c},i={world:JSON.stringify(o)},l={seeds:a},u={worldChosen:r},d=st(),f={lastLogin:d.stamp},j={garden:s,world:i,worldChosen:u,seeds:l,lastLogin:f},console.log("Attempting to save garden"),console.log("SEEDS ARE"),console.log(l),console.log(j),e.next=14,Ye.updateGarden(t,j).then((function(e){console.log(e),console.log("Garden updated successfully")}));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ct(e){for(var t=[],n=0;n<e.length;n++){var o=e[n].key,r=e[n].props,a={key:o,growth:r.growth,date:r.date,position:r.position,type:r.type};t.push(a)}return t}function st(){var e=new Date,t=e.getDate(),n=e.getMonth()+1,o=e.getFullYear();return{year:o,month:n,day:t,stamp:"".concat(o,"/").concat(n,"/").concat(t)}}function it(e,t,n,o){return lt.apply(this,arguments)}function lt(){return lt=Object(qe.a)(Le.a.mark((function e(t,n,o,r){var a,c,s,i=arguments;return Le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>4&&void 0!==i[4]?i[4]:"SeedBank",c=i.length>5&&void 0!==i[5]?i[5]:ot(["#db504a","#ff6f59","#ffe200","#9bf6ff","#ffd6a5","#caffbf","#ffc6ff","#bdb2ff","#e9ff70","#ff70a6","#ff9770","#c64664","#54428e","#ef476f","#eb5e28"]),console.log("In sendBalloon "+n),s=new jt(t,n,o,r,a,c),console.log(s),e.next=7,Ye.addBalloons(s).then((function(e){console.log("".concat(n," balloon sent!"))}));case 7:case"end":return e.stop()}}),e)}))),lt.apply(this,arguments)}function ut(e){return Math.random()*(e.max-e.min)+e.min}function dt(e){return ft.apply(this,arguments)}function ft(){return(ft=Object(qe.a)(Le.a.mark((function e(t){return Le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),console.log("In UPDATED!"),e.next=4,Ye.updateBalloons(t,{}).then((function(e){console.log("Balloon updated successfully")}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var jt=function e(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"SeedBank",c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ot(["#db504a","#ff6f59","#ffe200","#9bf6ff","#ffd6a5","#caffbf","#ffc6ff","#bdb2ff","#e9ff70","#ff70a6","#ff9770","#c64664","#54428e","#ef476f","#eb5e28"]);Object(s.a)(this,e),this.balloonId=O(),this.userId=t,this.colour=c,this.position=bt(),this.type=n,this.quantity=o,this.message=r,this.claimed=!1,this.sender=a};function bt(){return[ut({max:2,min:-2}),ut({max:1.8,min:1.5}),ut({max:1.8,min:-1.8})]}var ht=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ot();Object(s.a)(this,e),this.stalactites=t};function Ot(){for(var e=[],t=0,n=0;n<10;n++)e.push(pt(t)),t+=.1;return e}function pt(e){return{geometry:gt(e),position:mt(e),colour:ot(["#6C6460","#8a817c","#6c757d"])}}function gt(e){var t={max:.8-e,min:.01};return[ut({max:1.3-e,min:1-e}),ut(t),ut({max:2.3,min:1}),ut({max:12,min:6})]}function mt(e){var t={max:0+e,min:1+e},n={max:.5,min:-.5};return[ut(n),-ut(t),ut(n)]}n(97);var xt,vt,yt,wt,Ct,kt,St,Nt,It,Rt,Bt,Et=fe.a.h1.attrs({className:"h1"})(xt||(xt=Object(de.a)([""]))),Pt=fe.a.div.attrs({className:"form-group"})(vt||(vt=Object(de.a)(["\n    margin: 0 30px;\n"]))),Ut=fe.a.label(yt||(yt=Object(de.a)(["\n    margin: 5px;\n"]))),Ft=fe.a.input.attrs({className:"form-control"})(wt||(wt=Object(de.a)(["\n    margin: 5px;\n"]))),Wt=fe.a.button.attrs({className:"btn btn-primary"})(Ct||(Ct=Object(de.a)(["\n    margin: 15px 15px 15px 5px;\n"]))),Mt=fe.a.a.attrs({className:"btn btn-danger"})(kt||(kt=Object(de.a)(["\n    margin: 15px 15px 15px 5px;\n"]))),Tt=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var o;return Object(s.a)(this,n),(o=t.call(this,e)).handleChangeInputName=function(){var e=Object(qe.a)(Le.a.mark((function e(t){var n;return Le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.value,o.setState({name:n});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o.handleChangeInputEmail=function(){var e=Object(qe.a)(Le.a.mark((function e(t){var n;return Le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.value,o.setState({email:n});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o.handleChangeInputPassword=function(){var e=Object(qe.a)(Le.a.mark((function e(t){var n;return Le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.value,o.setState({password:n});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o.handleAddUser=Object(qe.a)(Le.a.mark((function e(){var t,n,r,a,c,s,i,l,u,d,f,j,b,h;return Le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.state,n=t.name,r=t.email,a=t.password,c="",s=new ht,i=JSON.stringify(s),l=[],!1,u=st(),d=u.stamp,!0,f={name:n,email:r,password:a,world:i,worldChosen:false,seeds:l,lastLogin:d,newUser:true},console.log(f),j=!1,e.next=14,Ye.getUser(n).then((function(e){204===e.status?j=!0:window.alert("Username taken")}));case 14:if(o.setState({name:"",email:"",password:""}),!j){e.next=27;break}return e.next=18,Ye.addUser(f).then((function(e){window.alert("User added"),console.log("SEEDS on SIGN UP"),console.log(l),o.props.setUser(n,e.data.id,[],s,!1,l,d),c=e.data.id}));case 18:return console.log("ID is"),console.log(c),b=new jt(c,"generic_plant",3,"Welcome to SeedBank!"),h=new jt(c,"tulip",3,"Welcome to SeedBank!"),console.log(b),e.next=25,Ye.addBalloons(b).then((function(e){console.log("Welcome balloon one added")}));case 25:return e.next=27,Ye.addBalloons(h).then((function(e){console.log("Welcome balloon two added")}));case 27:case"end":return e.stop()}}),e)}))),o.state={name:"",email:"",password:""},o}return Object(i.a)(n,[{key:"render",value:function(){var e=this.state,t=e.name,n=e.email,o=e.password;return Object(m.jsxs)(Pt,{children:[Object(m.jsx)(Et,{children:"Sign Up"}),Object(m.jsx)(Ut,{children:"Name: "}),Object(m.jsx)(Ft,{type:"text",value:t,onChange:this.handleChangeInputName}),Object(m.jsx)(Ut,{children:"Email: "}),Object(m.jsx)(Ft,{type:"text",value:n,onChange:this.handleChangeInputEmail}),Object(m.jsx)(Ut,{children:"Password: "}),Object(m.jsx)(Ft,{type:"text",value:o,onChange:this.handleChangeInputPassword}),Object(m.jsx)(Wt,{onClick:this.handleAddUser,children:"Sign Up"}),Object(m.jsx)(Mt,{href:"/movies/list",children:"Cancel"})]})}}]),n}(o.Component),Dt=Tt,Lt=fe.a.h1.attrs({className:"h1"})(St||(St=Object(de.a)([""]))),qt=fe.a.div.attrs({className:"form-group"})(Nt||(Nt=Object(de.a)(["\n    margin: 0 30px;\n"]))),At=fe.a.label(It||(It=Object(de.a)(["\n    margin: 5px;\n"]))),Gt=fe.a.input.attrs({className:"form-control"})(Rt||(Rt=Object(de.a)(["\n    margin: 5px;\n"]))),Yt=fe.a.button.attrs({className:"btn btn-primary"})(Bt||(Bt=Object(de.a)(["\n    margin: 15px 15px 15px 5px;\n"]))),Xt=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var o;return Object(s.a)(this,n),(o=t.call(this,e)).handleChangeInputName=function(){var e=Object(qe.a)(Le.a.mark((function e(t){var n;return Le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.value,o.setState({name:n});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o.handleChangeInputPassword=function(){var e=Object(qe.a)(Le.a.mark((function e(t){var n;return Le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.value,o.setState({password:n});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o.handleGetUser=Object(qe.a)(Le.a.mark((function e(){return Le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye.getUser(o.state.name).then((function(e){if(console.log(e),204===e.status)window.alert("No user found");else if(o.state.password===e.data.data.password){var t=e.data.data.name,n=e.data.data._id,r=Ve(e.data.data.garden),a=JSON.parse(e.data.data.world),c=e.data.data.seeds,s=e.data.data.worldChosen,i=e.data.data.lastLogin;window.alert("Welcome back ".concat(t)),o.props.setUser(t,n,r,a,s,c,i,!1)}else window.alert("Incorrect password")}));case 2:case"end":return e.stop()}}),e)}))),o.state={name:"",email:"",password:""},o}return Object(i.a)(n,[{key:"render",value:function(){var e=this.state,t=e.name,n=(e.email,e.password);return Object(m.jsxs)(qt,{children:[Object(m.jsx)(Lt,{children:"Log In"}),Object(m.jsx)(At,{children:"Name: "}),Object(m.jsx)(Gt,{type:"text",value:t,onChange:this.handleChangeInputName}),Object(m.jsx)(At,{children:"Password: "}),Object(m.jsx)(Gt,{type:"text",value:n,onChange:this.handleChangeInputPassword}),Object(m.jsx)(Yt,{onClick:this.handleGetUser,children:"Log In"})]})}}]),n}(o.Component),zt=Xt;n(98);var _t=function(e){var t=Object(o.useState)(e.garden),n=Object(g.a)(t,2),r=n[0],a=n[1],c=Object(o.useState)(""),s=Object(g.a)(c,2),i=s[0],l=s[1],u=Object(o.useState)(e.seeds),d=Object(g.a)(u,2),b=d[0],h=d[1],p=Object(o.useState)(null),x=Object(g.a)(p,2),y=(x[0],x[1]),w=Object(o.useState)([]),k=Object(g.a)(w,2),S=(k[0],k[1],function(){l(""),N(-1,i),rt(e.id,r,e.world,e.worldChosen,b)}),N=function(e,t){var n=Object(D.a)(b),o=n.findIndex((function(e){return e.type===t}));-1===o?(console.log("adding newSeed "+t),h((function(n){return[].concat(Object(D.a)(n),[{type:t,quantity:e}])}))):(n[o].quantity+=e,h(n)),console.log(b),y(null),console.log(r.length)},I=function(){console.log("CHECKING ACHIEVEMENTS");var t=r.length;console.log("Plants "+t),console.log("Seeds "+b.length),console.log(t);var n=t%5,o=t/5+2;if(console.log("AchievementTracker "+o),0===n&&0!==t&&b.length<o){console.log("Achievement!");var a=function(e,t,n){console.log("In Achievement Calculator seeds are:"),console.log(e);var o=!0,r={};if(e.length===j.length){var a=ot(e);return console.log("bonusSeeds"),void it(t,a.type,3,"".concat(n," plants! Bonus ").concat(a.type," seeds!"))}for(;o;)o=f(r=ot(j),e);return it(t,r.type,3,"".concat(n," plants! ","\n"," ").concat(r.type," unlocked!")),r}(b,e.id,t);console.log(a),h((function(e){return[].concat(Object(D.a)(e),[{type:a.type,quantity:0}])}))}};return Object(o.useEffect)((function(){console.log("in uSEEFFECT"),console.log(b),console.log(r.length),console.log("Calling saveGarden"),rt(e.id,r,e.world,e.worldChosen,b),I()})),Object(m.jsx)("div",{className:"App",children:Object(m.jsxs)(C.a,{id:"canvas",camera:{position:[0,2,3.5]},children:[Object(m.jsx)(V,{}),Object(m.jsxs)(o.Suspense,{fallback:console.log("loading"),children:[Object(m.jsx)(se,{friend:!1,sowPlant:function(e){if(i){var t=function(e,t){console.log("In createPlant");var n=[e.point.x,e.point.y,e.point.z],o=O(),r=st();return Object(m.jsx)(Ie,{growth:0,date:r,position:n,type:t},o)}(e,i);a((function(e){return[t].concat(Object(D.a)(e))})),S()}},position:[0,0,0],world:e.world,seeds:b}),r,Object(m.jsx)(Te,{}),Object(m.jsx)(ee,{}),Object(m.jsx)(ne,{sendPlant:function(t,n){if(console.log("Sending ".concat(i," to ").concat(t," ").concat(n)),i){var o="".concat(e.userName," sent you ","\n"," a ").concat(i," seed!");it(n,i,1,o,e.userName),console.log(o),console.log("Sending ".concat(i," to ").concat(t," ").concat(n)),S()}else console.log("No seed selected")},userId:e.id})]}),e.worldChosen?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(v,{updateSeeds:N,acceptFriend:function(t){!function(e,t,n,o){nt.apply(this,arguments)}(e.id,e.userName,t,e.world)},userId:e.id,today:e.today,lastLogin:e.lastLogin,seeds:b}),Object(m.jsx)(T,{seeds:b,chosenSeed:i,buyBalloon:function(t){console.log("Buying ".concat(t," balloon"));var n=ot(b),o="Bought: ".concat(n.type," x 3!");it(e.id,n.type,3,o,"SeedBank",t)},position:[0,-.8,1],sendFriendRequest:function(t){!function(e,t,n){$e.apply(this,arguments)}(e.id,e.userName,t,e.world)},selectSeed:function(e,t){b[t];b[t].quantity>0&&(l(e),y(t))}})]}):Object(m.jsx)(ue,{saveWorld:e.saveWorld,newWorld:e.newWorld})]})})},Zt=(n(99),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var o;return Object(s.a)(this,n),(o=t.call(this,e)).state={userName:"",id:0,garden:[],world:{},chosenWorld:!1,seeds:[],lastLogin:"",newUser:!0},o.setUser=o.setUser.bind(Object(l.a)(o)),o.newWorld=o.newWorld.bind(Object(l.a)(o)),o.saveWorld=o.saveWorld.bind(Object(l.a)(o)),o.connecToServer=o.connecToServer.bind(Object(l.a)(o)),o}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.connecToServer()}},{key:"connecToServer",value:function(){fetch("/")}},{key:"setUser",value:function(e,t,n,o,r,a,c,s){this.setState({userName:e,id:t,garden:n,world:o,worldChosen:r,seeds:a,lastLogin:c,today:st().stamp,newUser:s})}},{key:"newWorld",value:function(){var e=new ht;this.setState({world:e})}},{key:"saveWorld",value:function(){this.setState({worldChosen:!0}),rt(this.state.id,[],this.state.world,!0,this.state.seeds)}},{key:"render",value:function(){return Object(m.jsxs)("div",{style:{position:"relative",width:"100%",height:"100%"},children:[Object(m.jsx)(pe.a,{children:Object(m.jsx)(ye,{user:this.state.userName,setUser:this.setUser})}),this.state.userName?Object(m.jsx)(_t,{id:this.state.id,userName:this.state.userName,newWorld:this.newWorld,world:this.state.world,worldChosen:this.state.worldChosen,saveWorld:this.saveWorld,seeds:this.state.seeds,garden:this.state.garden,lastLogin:this.state.lastLogin,today:this.state.today}):Object(m.jsxs)("div",{children:[Object(m.jsx)(zt,{setUser:this.setUser}),Object(m.jsx)(Dt,{setUser:this.setUser})]})]})}}]),n}(r.a.Component));c.a.render(Object(m.jsx)(Zt,{}),document.getElementById("root"))},97:function(e,t,n){},98:function(e,t,n){}},[[100,1,2]]]);
//# sourceMappingURL=main.9391f896.chunk.js.map
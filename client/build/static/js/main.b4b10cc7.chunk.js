(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{101:function(e,t,n){"use strict";n.r(t);var a=n(4),r=n.n(a),o=n(54),s=n.n(o),c=n(0),i=n(1),l=n(9),u=n(2),j=n(3),d=n(55),b=n.n(d).a.create({baseURL:"/api"}),h={addUser:function(e){return b.post("/user",e)},getUser:function(e){return b.get("/user/".concat(e))},updateGarden:function(e,t){return b.put("/user/".concat(e),t)}},p=function e(){Object(c.a)(this,e),this.type="generic_plant",this.bloom=1,this.leafColour="#ff006e",this.stemColour="#ffbe0b",this.flowerColour="#55dde0"};function O(){var e=new Date,t=e.getDate(),n=e.getMonth()+1,a=e.getFullYear();return{year:a,month:n,day:t,stamp:"".concat(a,"-").concat(n,"-").concat(t)}}var m=n(8),f=n(15),g=n(5);var x=function(e){var t=Object(a.useRef)(),n=Object(a.useState)(!1),r=Object(f.a)(n,2),o=(r[0],r[1]),s=Object(a.useState)(!1),c=Object(f.a)(s,2);return c[0],c[1],Object(g.jsxs)("mesh",Object(m.a)(Object(m.a)({},e),{},{ref:t,scale:1,onClick:function(t){return e.sowPlant(t)},onPointerOver:function(e){return o(!0)},onPointerOut:function(e){return o(!1)},children:[Object(g.jsx)("cylinderGeometry",{args:e.world.grass.geometry}),Object(g.jsx)("meshToonMaterial",{color:e.world.grass.colour})]}))};function v(e){console.log("In create stalactites"),console.log(e);for(var t=[],n=0;n<e.stalactites.length;n++){var a=e.stalactites[n];t.push(Object(g.jsx)(w,{args:a.geometry,position:a.position,colour:a.colour},he()))}return t}function w(e){var t=Object(a.useRef)();return Object(g.jsx)("group",{children:Object(g.jsxs)("mesh",Object(m.a)(Object(m.a)({},e),{},{ref:t,scale:1,children:[Object(g.jsx)("cylinderGeometry",{args:e.args}),Object(g.jsx)("meshToonMaterial",{color:e.colour})]}))})}var y=function(e){var t=e.world,n=Object(a.useRef)();return console.log("WORLD in EARTH is"),console.log(t),Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("mesh",Object(m.a)(Object(m.a)({},e),{},{ref:n,scale:1,onClick:function(e){return function(e){e.stopPropagation()}(e)},children:[Object(g.jsx)("cylinderGeometry",{args:t.earth.geometry}),Object(g.jsx)("meshToonMaterial",{color:t.earth.colour}),v(t)]}))})};function C(e){var t=function(e){switch(e){case"generic_plant":return{bloom:1,leafColour:"#377F34",stemColour:"#499B4A",flowerColour:"#832134"};case"tulip":return{bloom:2,leafColour:"#2D5A27",stemColour:"#567d46",flowerColour:"#ff878d"};default:return}}(e.type),n=t.bloom,a=t.leafColour,r=t.stemColour,o=t.flowerColour,s=e.growth;s>=n&&(s=n);for(var c=s/12,i=[Object(g.jsx)(k,{},he()),Object(g.jsx)(N,{stemColour:r,stemLength:c},he())],l=0;l<=s;l++)i.push(Object(g.jsx)(S,{color:a,position:[.02,.1+l/18,.05]},he()),Object(g.jsx)(S,{color:a,position:[-.02,.1+l/18,-.05]},he()));return s>=n&&i.push(Object(g.jsx)(U,{color:o,position:[0,.1+s/11,0]},he())),i}function k(e){var t=Object(a.useRef)();return Object(g.jsxs)("mesh",Object(m.a)(Object(m.a)({},e),{},{ref:t,children:[Object(g.jsx)("dodecahedronGeometry",{args:[.035,2]}),Object(g.jsx)("meshToonMaterial",{color:"#947352"})]}))}function N(e){var t=Object(a.useRef)();return Object(g.jsxs)("mesh",Object(m.a)(Object(m.a)({},e),{},{ref:t,children:[Object(g.jsx)("cylinderGeometry",{args:[.01,.03,.3+e.stemLength,12]}),Object(g.jsx)("meshToonMaterial",{color:e.stemColour})]}))}function S(e){var t=Object(a.useRef)();return Object(g.jsxs)("mesh",Object(m.a)(Object(m.a)({},e),{},{ref:t,children:[Object(g.jsx)("cylinderGeometry",{args:[.02,.05,.02,6]}),Object(g.jsx)("meshToonMaterial",{color:e.color})]}))}function U(e){var t=Object(a.useRef)();return Object(g.jsxs)("mesh",Object(m.a)(Object(m.a)({},e),{},{ref:t,children:[Object(g.jsx)("dodecahedronGeometry",{args:[.06]}),Object(g.jsx)("meshToonMaterial",{color:e.color})]}))}var P,R,T=function(e){e.x,e.y,e.z;var t=Object(a.useRef)();return Object(g.jsx)("group",{children:Object(g.jsx)("mesh",Object(m.a)(Object(m.a)({},e),{},{ref:t,onClick:function(t){return function(t){t.stopPropagation(),console.log("This plant is:"),console.log(e)}(t)},scale:.5,children:C(e)}))})},G=n(14),I=n(13),D=I.a.button(P||(P=Object(G.a)(["\ncolor: palevioletred;\nfont-size: 1em;\nmargin: 1em;\npadding: 0.25em 1em;\nborder: 2px solid palevioletred;\nborder-radius: 3px;\n"]))),M=I.a.div(R||(R=Object(G.a)(["\n  background-color: lightgrey;\n  "])));var W=function(e){return Object(g.jsxs)(M,{children:[Object(g.jsx)(D,{onClick:function(t){return e.selectSeed("generic_plant")},children:" Generic Plant "}),Object(g.jsx)(D,{onClick:function(t){return e.selectSeed("tulip")},children:" Tulip "}),Object(g.jsx)(D,{onClick:e.newWorld,children:" newWorld "})]})},A=(n(53),n(21));var E=function(e){return Object(g.jsxs)(A.a,{id:"canvas",camera:{position:[0,2,3.5],lookat:[0,0,0]},children:[Object(g.jsx)(z,{}),Object(g.jsxs)(a.Suspense,{fallback:console.log("loading"),children:[Object(g.jsx)(y,{position:[0,-.16,0],world:e.world}),Object(g.jsx)(x,{sowPlant:e.sowPlant,world:e.world,position:[0,0,0]}),e.plants]}),Object(g.jsx)(B,{}),Object(g.jsx)(J,{})]})},L=n(104);Object(A.b)({OrbitControls:L.a});var z=function(){var e=Object(A.d)(),t=e.camera,n=e.gl.domElement,r=Object(a.useRef)();return Object(A.c)((function(e){return r.current.update()})),Object(g.jsx)("orbitControls",{ref:r,position:[0,-10,0],args:[t,n],autoRotate:!0,autoRotateSpeed:.2,enabled:!0})};var B=function(e){Object(a.useRef)();var t=Object(a.useRef)();return Object(g.jsx)("group",{children:Object(g.jsx)("mesh",Object(m.a)(Object(m.a)({ref:t},e),{},{children:Object(g.jsx)("directionalLight",{position:[0,.5,1],intensity:.7})}))})},F=n(106);function J(e){return Object(g.jsx)(F.a,Object(m.a)({turbidity:.01,distance:45e4,sunPosition:[0,1,0],inclination:.47,elevation:.6,exposure:.3,mieDirectionalG:.04,mieCoefficient:.0045,rayleigh:.1,azimuth:.6},e))}var _,H,V,Y,q,K,Q=n.p+"static/media/seedbankProto.6cdc7966.png",X=I.a.a.attrs({className:"navbar-brand"})(_||(_=Object(G.a)([""]))),Z=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(g.jsx)(X,{href:"https://example.com",children:Object(g.jsx)("img",{src:Q,height:"50",alt:"seedbank"})})}}]),n}(a.Component),$=Z,ee=n(31),te=(I.a.div.attrs({className:"collpase navbar-collapse"})(H||(H=Object(G.a)([""]))),I.a.div.attrs({className:"navbar-nav mr-auto"})(V||(V=Object(G.a)([""]))),I.a.div.attrs({className:"collpase navbar-collapse"})(Y||(Y=Object(G.a)([""]))),function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(g.jsxs)(r.a.Fragment,{children:[Object(g.jsx)(ee.b,{to:"/",className:"navbar-brand",children:"SeedBank"}),Object(g.jsx)(ee.b,{to:"/",className:"navbar-brand",children:this.props.user})]})}}]),n}(a.Component)),ne=te,ae=(I.a.div.attrs({className:"container"})(q||(q=Object(G.a)([""]))),I.a.nav.attrs({className:"navbar navbar-expand-lg navbar-dark bg-dark"})(K||(K=Object(G.a)(["\n    margin-bottom: 20 px;\n"])))),re=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(g.jsxs)(ae,{height:"50%",children:[Object(g.jsx)($,{}),Object(g.jsx)(ne,{user:this.props.user,setUser:this.props.setUser})]})}}]),n}(a.Component),oe=re;function se(e){for(var t=[],n=O(Date()).stamp,a=0;a<e.length;a++){var r=e[a],o=ce(r.date,n);t.push(Object(g.jsx)(T,{growth:o,date:r.date,position:r.position,type:r.type},r.key))}return console.log(t),t}function ce(e,t){console.log("Plant date is"),console.log(e.stamp),console.log("Today is"),console.log(t);var n=function(e,t){var n=new Date(e),a=new Date(t).getTime()-n.getTime();return Math.round(a/864e5)}(e.stamp,t);return console.log("".concat(n," days have passed")),n}var ie=n(12),le=n.n(ie),ue=n(18);function je(){return(je=Object(ue.a)(le.a.mark((function e(t,n){var a,r;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=de(n),r={garden:a},console.log("Attempting to save garden"),e.next=5,h.updateGarden(t,r).then((function(e){console.log("Garden updated successfully")}));case 5:console.log("SAVED GARDEN"),console.log(a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function de(e){for(var t=[],n=0;n<e.length;n++){var a=e[n].key,r=e[n].props,o={key:a,growth:r.growth,date:r.date,position:r.position,type:r.type};t.push(o)}return t}var be=n(105);function he(){return Object(be.a)()}var pe=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe(),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:me(),a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fe();Object(c.a)(this,e),this.grass=t,this.earth=n,this.stalactites=a};function Oe(){return{geometry:[1.6,1,.3,25],colour:"#5AAB61"}}function me(){return{geometry:[1.6*1.1,1,.6,9],colour:"#8a817c"}}function fe(){for(var e=[],t=0,n=0;n<11;n++)e.push(ve(t)),t+=.1;return e}function ge(e){return Math.random()*(e.max-e.min)+e.min}function xe(){var e;return(e=["#6C6460","#8a817c","#6c757d"])[Math.floor(Math.random()*e.length)]}function ve(e){return{geometry:we(e),position:ye(e),colour:xe()}}function we(e){var t={max:.8-e,min:0-e};return[ge({max:2-e,min:1-e}),ge(t),ge({max:2.3,min:1}),ge({max:12,min:6})]}function ye(e){var t={max:1.8+e,min:1.5+e},n={max:1,min:-1};return[ge(n),-ge(t),ge(n)]}n(99);var Ce,ke,Ne,Se,Ue,Pe,Re,Te,Ge,Ie,De,Me,We=I.a.h1.attrs({className:"h1"})(Ce||(Ce=Object(G.a)([""]))),Ae=I.a.div.attrs({className:"form-group"})(ke||(ke=Object(G.a)(["\n    margin: 0 30px;\n"]))),Ee=I.a.label(Ne||(Ne=Object(G.a)(["\n    margin: 5px;\n"]))),Le=I.a.input.attrs({className:"form-control"})(Se||(Se=Object(G.a)(["\n    margin: 5px;\n"]))),ze=I.a.button.attrs({className:"btn btn-primary"})(Ue||(Ue=Object(G.a)(["\n    margin: 15px 15px 15px 5px;\n"]))),Be=I.a.a.attrs({className:"btn btn-danger"})(Pe||(Pe=Object(G.a)(["\n    margin: 15px 15px 15px 5px;\n"]))),Fe=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).handleChangeInputName=function(){var e=Object(ue.a)(le.a.mark((function e(t){var n;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.value,a.setState({name:n});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleChangeInputEmail=function(){var e=Object(ue.a)(le.a.mark((function e(t){var n;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.value,a.setState({email:n});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleChangeInputPassword=function(){var e=Object(ue.a)(le.a.mark((function e(t){var n;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.value,a.setState({password:n});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleAddUser=Object(ue.a)(le.a.mark((function e(){var t,n,r,o,s,c,i;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state,n=t.name,r=t.email,o=t.password,s=new pe,c=JSON.stringify(s),i={name:n,email:r,password:o,world:c},e.next=6,h.addUser(i).then((function(e){window.alert("User added"),a.setState({name:"",email:"",password:""})}));case 6:case"end":return e.stop()}}),e)}))),a.state={name:"",email:"",password:""},a}return Object(i.a)(n,[{key:"render",value:function(){var e=this.state,t=e.name,n=e.email,a=e.password;return Object(g.jsxs)(Ae,{children:[Object(g.jsx)(We,{children:"Sign Up"}),Object(g.jsx)(Ee,{children:"Name: "}),Object(g.jsx)(Le,{type:"text",value:t,onChange:this.handleChangeInputName}),Object(g.jsx)(Ee,{children:"Email: "}),Object(g.jsx)(Le,{type:"text",value:n,onChange:this.handleChangeInputEmail}),Object(g.jsx)(Ee,{children:"Password: "}),Object(g.jsx)(Le,{type:"text",value:a,onChange:this.handleChangeInputPassword}),Object(g.jsx)(ze,{onClick:this.handleAddUser,children:"Sign Up"}),Object(g.jsx)(Be,{href:"/movies/list",children:"Cancel"})]})}}]),n}(a.Component),Je=Fe,_e=I.a.h1.attrs({className:"h1"})(Re||(Re=Object(G.a)([""]))),He=I.a.div.attrs({className:"form-group"})(Te||(Te=Object(G.a)(["\n    margin: 0 30px;\n"]))),Ve=I.a.label(Ge||(Ge=Object(G.a)(["\n    margin: 5px;\n"]))),Ye=I.a.input.attrs({className:"form-control"})(Ie||(Ie=Object(G.a)(["\n    margin: 5px;\n"]))),qe=I.a.button.attrs({className:"btn btn-primary"})(De||(De=Object(G.a)(["\n    margin: 15px 15px 15px 5px;\n"]))),Ke=(I.a.a.attrs({className:"btn btn-danger"})(Me||(Me=Object(G.a)(["\n    margin: 15px 15px 15px 5px;\n"]))),function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).handleChangeInputName=function(){var e=Object(ue.a)(le.a.mark((function e(t){var n;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.value,a.setState({name:n});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleChangeInputPassword=function(){var e=Object(ue.a)(le.a.mark((function e(t){var n;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.value,a.setState({password:n});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleGetUser=Object(ue.a)(le.a.mark((function e(){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.getUser(a.state.name).then((function(e){if(console.log(e),console.log("Name is "+e.data.data.name),a.state.password===e.data.data.password){window.alert("Logged in");var t=e.data.data.name,n=e.data.data._id,r=se(e.data.data.garden),o=Object.assign(JSON.parse(e.data.data.world));console.log("Loaded world"),console.log(o),a.props.setUser(t,n,r,o)}else window.alert("Incorrect password")}));case 2:case"end":return e.stop()}}),e)}))),a.state={name:"",email:"",password:""},a}return Object(i.a)(n,[{key:"render",value:function(){var e=this.state,t=e.name,n=(e.email,e.password);return Object(g.jsxs)(He,{children:[Object(g.jsx)(_e,{children:"Log In"}),Object(g.jsx)(Ve,{children:"Name: "}),Object(g.jsx)(Ye,{type:"text",value:t,onChange:this.handleChangeInputName}),Object(g.jsx)(Ve,{children:"Password: "}),Object(g.jsx)(Ye,{type:"text",value:n,onChange:this.handleChangeInputPassword}),Object(g.jsx)(qe,{onClick:this.handleGetUser,children:"Log In"})]})}}]),n}(a.Component)),Qe=Ke,Xe=n(17);var Ze=function(e){var t=Object(a.useState)(e.garden),n=Object(f.a)(t,2),r=n[0],o=n[1],s=Object(a.useState)(null),c=Object(f.a)(s,2),i=c[0],l=c[1];return Object(a.useEffect)((function(){console.log("Calling saveGarden"),function(e,t){je.apply(this,arguments)}(e.id,r)})),Object(g.jsxs)("div",{className:"App",children:[Object(g.jsx)(E,{plants:r,world:e.world,newWorld:e.newWorld,sowPlant:function(e){if(i){var t=function(e,t){var n=[e.point.x,e.point.y,e.point.z],a=he(),r=O(),o=new p;console.log("plantData is:"),console.log(o);var s=Object(g.jsx)(T,{growth:0,date:r,position:n,type:t},a);return console.log("New Plant"),console.log(s),s}(e,i);l(null),o((function(e){return[t].concat(Object(Xe.a)(e))}))}}}),Object(g.jsx)(W,{className:"App-header",newWorld:e.newWorld,selectSeed:function(e){console.log(e),l(e),console.log(i)}})]})},$e=(n(100),function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={userName:"",id:0,garden:[],world:{}},a.setUser=a.setUser.bind(Object(l.a)(a)),a.newWorld=a.newWorld.bind(Object(l.a)(a)),a.connecToServer=a.connecToServer.bind(Object(l.a)(a)),a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.connecToServer()}},{key:"connecToServer",value:function(){fetch("/")}},{key:"setUser",value:function(e,t,n,a){console.log("SETTING USER"),console.log("WORLD IS"),console.log(a),this.setState({userName:e,id:t,garden:n,world:a}),console.log("User is "+this.state.id+" "+this.state.userName),console.log(this.state.garden)}},{key:"newWorld",value:function(){var e=new pe;this.setState({world:e})}},{key:"render",value:function(){return Object(g.jsxs)("div",{style:{position:"relative",width:"100%",height:"100%"},children:[Object(g.jsx)(ee.a,{children:Object(g.jsx)(oe,{user:this.state.userName,setUser:this.setUser})}),this.state.userName?Object(g.jsx)(Ze,{id:this.state.id,newWorld:this.newWorld,world:this.state.world,garden:this.state.garden}):Object(g.jsxs)("div",{children:[Object(g.jsx)(Qe,{setUser:this.setUser})," ",Object(g.jsx)(Je,{setUser:this.setUser})]})]})}}]),n}(r.a.Component));s.a.render(Object(g.jsx)($e,{}),document.getElementById("root"))},53:function(e,t,n){},99:function(e,t,n){}},[[101,1,2]]]);
//# sourceMappingURL=main.b4b10cc7.chunk.js.map
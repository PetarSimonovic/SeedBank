(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{100:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(58),s=n.n(o),c=n(0),i=n(3),l=n(10),u=n(4),j=n(5);function d(e){var t,n=!0,a={};if(e.length===h.length)return e;for(;n;)n=b(a=(t=h)[Math.floor(Math.random()*t.length)],e);return function(e,t,n){for(var a=[],r=0;r<e.length;r++){var o=e[r];o.type===t.type&&(console.log(t),o.quantity+=t.quantity,console.log(o)),a.push(o)}n&&a.push(t);return a}(e,a,!0)}function b(e,t){for(var n=0;n<t.length;n++){if(t[n].type===e.type)return!0}return!1}var h=[{type:"generic_plant",quantity:3},{type:"tulip",quantity:3},{type:"sunflower",quantity:3},{type:"crocus",quantity:3},{type:"snowdrop",quantity:3},{type:"rose",quantity:3},{type:"venusFlyTrap",quantity:3}];function O(e,t){var n=new Date(e),a=new Date(t).getTime()-n.getTime();return Math.round(a/864e5)}var f=n(105);function p(){return Object(f.a)()}var m=n(8),g=n(2),x=function(e){if(!e.claimed){var t=Math.floor(Math.random()*e.seeds.length);e.updateSeeds(3,t),e.removeBalloon(e.index)}};function v(e){for(var t=[],n=e.balloons,a=e.removeBalloon,r=e.updateSeeds,o=e.seeds,s=0;s<n.length;s++){var c=n[s];t.push(Object(g.jsx)(P,{claimed:c.claimed,updateSeeds:r,removeBalloon:a,seeds:o,position:c.position,index:s,handleClick:x,colour:c.colour},p()))}return t}var y=function(e){var t=Object(a.useRef)();return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)("mesh",Object(m.a)(Object(m.a)({},e),{},{ref:t,scale:1,children:v(e)}))})},w=n(102),C=n(106),S=n(20);function k(e){var t=Object(a.useRef)();return Object(g.jsxs)("mesh",Object(m.a)(Object(m.a)({},e),{},{ref:t,scale:1,children:[Object(g.jsx)("dodecahedronGeometry",{args:[.153,8]}),Object(g.jsx)("meshToonMaterial",{color:e.colour})]}))}function N(e){var t=Object(a.useRef)();return Object(g.jsxs)("mesh",Object(m.a)(Object(m.a)({},e),{},{ref:t,scale:1,children:[Object(g.jsx)("cylinderGeometry",{args:[.005,.005,.5,3]}),Object(g.jsx)("meshToonMaterial",{color:"#16161D"})]}))}function R(e){var t=Object(a.useRef)();return Object(g.jsxs)("mesh",Object(m.a)(Object(m.a)({},e),{},{ref:t,scale:1,children:[Object(g.jsx)("cylinderGeometry",{args:[.15,-.01,.3,16]}),Object(g.jsx)("meshToonMaterial",{color:e.colour})]}))}function U(e){var t=Object(a.useRef)();return Object(g.jsxs)("mesh",Object(m.a)(Object(m.a)({},e),{},{ref:t,scale:1,children:[Object(g.jsx)("boxGeometry",{args:[.15,.15,.15]}),Object(g.jsx)("meshToonMaterial",{color:"#7f5539"})]}))}var P=function(e){var t=Object(a.useRef)(),n="#293241",r="#b1b5c8";return Object(S.c)((function(e,n){return t.current.rotation.y+=.01})),Object(g.jsx)("group",{children:Object(g.jsxs)("mesh",Object(m.a)(Object(m.a)({},e),{},{ref:t,scale:.8,onClick:e.handleClick,children:[Object(g.jsx)(k,{colour:e.colour}),Object(g.jsx)(R,{colour:e.colour,position:[0,-.18,0]}),Object(g.jsx)(N,{position:[0,-.15,0]}),Object(g.jsx)(U,{position:[0,-.48,0]}),Object(g.jsx)(w.a,{follow:!0,lockX:!1,lockY:!1,lockZ:!1,children:Object(g.jsxs)(C.a,{position:[0,-.7,0],fontSize:.09,outlineWidth:.04,outlineColor:r,color:n,children:[" ",e.message," "]})})]}))})},T=n(103);Object(S.b)({OrbitControls:T.a});var G=function(){var e=Object(S.d)(),t=e.camera,n=e.gl.domElement,r=Object(a.useRef)();return Object(S.c)((function(e){return r.current.update()})),Object(g.jsx)("orbitControls",{ref:r,position:[0,-10,0],args:[t,n],autoRotate:!0,autoRotateSpeed:.2,enabled:!0})},M=n(107);function W(e){return Object(g.jsx)(M.a,Object(m.a)({turbidity:.01,distance:45e4,sunPosition:[0,1,0],inclination:.47,elevation:.6,exposure:.3,mieDirectionalG:.04,mieCoefficient:.0045,rayleigh:.1,azimuth:.6},e))}n(49);var L=function(e){var t=Object(a.useRef)();return Object(g.jsxs)("mesh",Object(m.a)(Object(m.a)({},e),{},{ref:t,scale:1,onClick:function(t){return e.sowPlant(t)},children:[Object(g.jsx)("cylinderGeometry",{args:e.args}),Object(g.jsx)("meshToonMaterial",{color:"#a7c957"})]}))};var I,q,E=function(e){var t=Object(a.useRef)();return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("mesh",Object(m.a)(Object(m.a)({},e),{},{ref:t,scale:1,children:[Object(g.jsx)(P,{position:[-.6,1.5,0],handleClick:e.newWorld,colour:"#ee6055",message:"New world"}),Object(g.jsx)(P,{position:[.6,1.5,0],handleClick:e.saveWorld,colour:"#ffd97d",message:"Save world"})]}))})},D=n(16),F=n(17),B=n.p+"static/media/seedbankProto.6cdc7966.png",z=F.a.a.attrs({className:"navbar-brand"})(I||(I=Object(D.a)([""]))),A=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(g.jsx)(z,{href:"https://example.com",children:Object(g.jsx)("img",{src:B,height:"50",alt:"seedbank"})})}}]),n}(a.Component),J=A,X=n(32),Y=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(g.jsxs)(r.a.Fragment,{children:[Object(g.jsx)(X.b,{to:"/",className:"navbar-brand",children:"SeedBank"}),Object(g.jsx)(X.b,{to:"/",className:"navbar-brand",children:this.props.user})]})}}]),n}(a.Component),Z=Y,_=F.a.nav.attrs({className:"navbar navbar-expand-lg navbar-dark bg-dark"})(q||(q=Object(D.a)(["\n    margin-bottom: 20 px;\n"]))),H=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(g.jsxs)(_,{height:"50%",children:[Object(g.jsx)(J,{}),Object(g.jsx)(Z,{user:this.props.user,setUser:this.props.setUser})]})}}]),n}(a.Component),K=H;var Q=function(e){var t=We();return Object(g.jsx)(w.a,{position:[.5,1,6],args:[20,200],follow:!0,lockX:!1,lockY:!1,lockZ:!1,children:Object(g.jsxs)(C.a,{fontSize:.5,color:"#857c8d",children:[t.day," ",t.month," ",t.year]})})},V=n(11);function $(e){var t=Object(V.a)(e.position,3),n=(t[0],t[1],t[2],function(e){switch(e){case"generic_plant":return{bloom:1,leafColour:"#377F34",stemColour:"#499B4A",flowerColour:"#832134"};case"tulip":return{bloom:2,leafColour:"#2D5A27",stemColour:"#567d46",flowerColour:"#ff878d"};case"sunflower":return{bloom:4,leafColour:"#75ae92",stemColour:"#82ac80",flowerColour:"#f8ec89"};case"crocus":return{bloom:1,leafColour:"#76c893",stemColour:"#52b69a",flowerColour:"#3a0ca3"};case"snowdrop":return{bloom:1,leafColour:"#76c893",stemColour:"#52b69a",flowerColour:"#f8f9fa"};case"rose":return{bloom:5,leafColour:"#499B4A",stemColour:"#75ae92",flowerColour:"#9e0059"};case"venusFlyTrap":return{bloom:7,leafColour:"#ccd5ae",stemColour:"#ccd5ae",flowerColour:"#ccd5ae"};default:return}}(e.type)),a=n.bloom,r=n.leafColour,o=n.stemColour,s=n.flowerColour,c=e.growth;c>=a&&(c=a);for(var i=c/24,l=[Object(g.jsx)(ee,{},p()),Object(g.jsx)(te,{stemColour:o,stemLength:i,position:[0,.05,0]},p())],u=0;u<=c;u++)l.push(Object(g.jsx)(ne,{color:r,position:[.02,.1+u/18,.05]},p()),Object(g.jsx)(ne,{color:r,position:[-.02,.1+u/18,-.05]},p()));return c>=a&&l.push(Object(g.jsx)(ae,{color:s,position:[0,.1+c/11,0]},p())),l}function ee(e){var t=Object(a.useRef)();return Object(g.jsxs)("mesh",Object(m.a)(Object(m.a)({},e),{},{ref:t,children:[Object(g.jsx)("dodecahedronGeometry",{args:[.035,2]}),Object(g.jsx)("meshToonMaterial",{color:"#947352"})]}))}function te(e){var t=Object(a.useRef)();return Object(g.jsxs)("mesh",Object(m.a)(Object(m.a)({},e),{},{ref:t,scale:.5,children:[Object(g.jsx)("cylinderGeometry",{args:[.01,.03,.3+e.stemLength,12]}),Object(g.jsx)("meshToonMaterial",{color:e.stemColour})]}))}function ne(e){var t=Object(a.useRef)();return Object(g.jsxs)("mesh",Object(m.a)(Object(m.a)({},e),{},{ref:t,children:[Object(g.jsx)("cylinderGeometry",{args:[.02,.05,.02,6]}),Object(g.jsx)("meshToonMaterial",{color:e.color})]}))}function ae(e){var t=Object(a.useRef)();return Object(g.jsxs)("mesh",Object(m.a)(Object(m.a)({},e),{},{ref:t,children:[Object(g.jsx)("dodecahedronGeometry",{args:[.06]}),Object(g.jsx)("meshToonMaterial",{color:e.color})]}))}var re=function(e){var t=Object(a.useRef)();return Object(g.jsx)("group",{children:Object(g.jsx)("mesh",Object(m.a)(Object(m.a)({},e),{},{ref:t,onClick:function(t){return function(t){t.stopPropagation(),console.log("This plant is:"),console.log(e)}(t)},scale:.2,children:$(e)}))})},oe=n(104),se={type:"#293241",outline:"#b1b5c8"},ce={type:"#b1b5c8",outline:"#293241"};function ie(e){if(console.log("PROPS in SEEDSELECTORS"),console.log(e),!e.seedList)return[];for(var t=[],n=0;n<e.seeds.length;n++){console.log("Generating seedselectors");var a=e.seeds[n];if(0!==a.quantity){var r={};r=a.type===e.chosenSeed?ce:se,t.push(Object(g.jsx)(ue,{selectSeed:e.selectSeed,seed:a,colours:r,index:n,position:[0,0,0]}))}}return 0===t.length&&t.push(Object(g.jsx)(je,{colours:se,index:1})),t}function le(e){var t=Object(a.useRef)(),n=Object(a.useState)(1),r=Object(V.a)(n,2),o=r[0],s=r[1],c=function(){s(.97),e.toggleSeeds(),setTimeout((function(){s(1)}),100)};return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)("mesh",Object(m.a)(Object(m.a)({},e),{},{ref:t,onClick:c,scale:o,children:Object(g.jsx)(oe.a,Object(m.a)(Object(m.a)({onClick:c,args:[.2,.2,.2],radius:.05,smoothness:4},e),{},{children:Object(g.jsx)("meshToonMaterial",{attach:"material",color:"#212529"})}))}))})}function ue(e){var t=e.seed,n=Object(a.useRef)(),r=Object(a.useState)(!1),o=Object(V.a)(r,2);o[0],o[1];return Object(g.jsx)("mesh",Object(m.a)(Object(m.a)({},e),{},{ref:n,children:Object(g.jsx)(w.a,{follow:!0,lockX:!1,lockY:!1,lockZ:!1,children:Object(g.jsxs)(C.a,{fontSize:.05,onClick:function(n){return function(n){n.stopPropagation(),console.log(t.type),e.selectSeed(t.type,e.index)}(n)},position:[.5,e.index/4,0],outlineWidth:.04,outlineColor:e.colours.outline,color:e.colours.type,rotation:[0,0,0],children:["seed: ",t.type," ","\n","quantity: ",t.quantity]})})}))}function je(e){var t=Object(a.useRef)();return Object(g.jsx)("mesh",Object(m.a)(Object(m.a)({},e),{},{ref:t,children:Object(g.jsx)(w.a,{follow:!0,lockX:!1,lockY:!1,lockZ:!1,children:Object(g.jsx)(C.a,{fontSize:.05,position:[.5,e.index/4,0],outlineWidth:.04,outlineColor:e.colours.outline,color:e.colours.type,rotation:[0,0,0],children:"No seeds available"})})}))}function de(e){var t=Object(a.useRef)();return Object(g.jsx)("group",{children:Object(g.jsxs)("mesh",Object(m.a)(Object(m.a)({},e),{},{ref:t,scale:1,onClick:function(e){return function(e){e.stopPropagation()}(e)},children:[Object(g.jsx)("cylinderGeometry",{args:[.2,.01,.5,12]}),Object(g.jsx)("meshToonMaterial",{color:"#6c757d"})]}))})}var be,he,Oe=function(e){console.log("PROPS IN SEEDBOX"),console.log(e);var t=Object(a.useRef)();return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("mesh",Object(m.a)(Object(m.a)({},e),{},{ref:t,scale:1,children:[Object(g.jsx)(de,{seeds:e.seeds,selectSeed:e.selectSeed}),Object(g.jsx)(le,{position:[0,.1,0],toggleSeeds:e.toggleSeeds}),ie(e)]}))})};F.a.button(be||(be=Object(D.a)(["\ncolor: palevioletred;\nfont-size: 1em;\nmargin: 1em;\npadding: 0.25em 1em;\nborder: 2px solid palevioletred;\nborder-radius: 3px;\n"]))),F.a.div(he||(he=Object(D.a)(["\n  background-color: lightgrey;\n  "])));var fe=function(e){Object(a.useRef)();var t=Object(a.useRef)();return Object(g.jsx)("group",{children:Object(g.jsx)("mesh",Object(m.a)(Object(m.a)({ref:t},e),{},{children:Object(g.jsx)("directionalLight",{position:[0,.5,1],intensity:.7})}))})};function pe(e){for(var t=e.world,n=[],a=0;a<t.stalactites.length;a++){var r=t.stalactites[a];n.push(Object(g.jsx)(me,{sowPlant:e.sowPlant,args:r.geometry,position:r.position,colour:r.colour},p()))}return n}function me(e){var t=Object(a.useRef)(),n=Object(V.a)(e.args,4),r=n[0],o=(n[1],n[2]),s=n[3];return Object(g.jsx)("group",{children:Object(g.jsxs)("mesh",Object(m.a)(Object(m.a)({},e),{},{ref:t,scale:1,onClick:function(e){return function(e){e.stopPropagation()}(e)},children:[Object(g.jsx)("cylinderGeometry",{args:e.args}),Object(g.jsx)("meshToonMaterial",{color:e.colour}),Object(g.jsx)(L,{sowPlant:e.sowPlant,position:[0,o/2,0],args:[r,r,.01,s]})]}))})}var ge,xe,ve=function(e){var t=Object(a.useRef)();return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)("mesh",Object(m.a)(Object(m.a)({},e),{},{ref:t,scale:1,children:pe(e)}))})};F.a.button(ge||(ge=Object(D.a)(["\ncolor: palevioletred;\nfont-size: 1em;\nmargin: 1em;\npadding: 0.25em 1em;\nborder: 2px solid palevioletred;\nborder-radius: 3px;\n"]))),F.a.div(xe||(xe=Object(D.a)(["\n  background-color: lightgrey;\n  "])));function ye(e){for(var t=[],n=We(Date()).stamp,a=0;a<e.length;a++){var r=e[a],o=we(r.date,n);t.push(Object(g.jsx)(re,{growth:o,date:r.date,position:r.position,type:r.type},r.key))}return console.log(t),t}function we(e,t){return console.log(e.stamp),console.log(t),O(e.stamp,t)}function Ce(e){return e[Math.floor(Math.random()*e.length)]}var Se=n(14),ke=n.n(Se),Ne=n(19),Re=n(66),Ue=n.n(Re).a.create({baseURL:"/api"}),Pe={addUser:function(e){return Ue.post("/user",e)},getUser:function(e){return Ue.get("/user/".concat(e))},updateGarden:function(e,t){return Ue.put("/user/".concat(e),t)}};function Te(e,t,n,a,r){return Ge.apply(this,arguments)}function Ge(){return(Ge=Object(Ne.a)(ke.a.mark((function e(t,n,a,r,o){var s,c,i,l,u,j,d,b;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=Me(n),c={garden:s},i={world:JSON.stringify(a)},l={seeds:o},u={worldChosen:r},j=We(),d={lastLogin:j.stamp},b={garden:c,world:i,worldChosen:u,seeds:l,lastLogin:d},console.log("Attempting to save garden"),e.next=11,Pe.updateGarden(t,b).then((function(e){console.log("Garden updated successfully")}));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Me(e){for(var t=[],n=0;n<e.length;n++){var a=e[n].key,r=e[n].props,o={key:a,growth:r.growth,date:r.date,position:r.position,type:r.type};t.push(o)}return t}function We(){var e=new Date,t=e.getDate(),n=e.getMonth()+1,a=e.getFullYear();return{year:a,month:n,day:t,stamp:"".concat(a,"/").concat(n,"/").concat(t)}}function Le(e){return Math.random()*(e.max-e.min)+e.min}var Ie=function e(t){Object(c.a)(this,e),this.id=p(),this.colour=Ce(["#db504a","#ff6f59","#ffe200","#9bf6ff","#ffd6a5","#caffbf","#ffc6ff","#bdb2ff","#e9ff70","#ff70a6","#ff9770"]),this.position=function(){var e={max:1.8,min:1.5},t={max:1.8,min:-1.8};return[Le({max:2,min:-2}),Le(e),Le(t)]}(),this.claimed=!1};var qe=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee();Object(c.a)(this,e),this.stalactites=t};function Ee(){for(var e=[],t=0,n=0;n<10;n++)e.push(De(t)),t+=.1;return e}function De(e){return{geometry:Fe(e),position:Be(e),colour:Ce(["#6C6460","#8a817c","#6c757d"])}}function Fe(e){var t={max:.8-e,min:.01};return[Le({max:1.3-e,min:1-e}),Le(t),Le({max:2.3,min:1}),Le({max:12,min:6})]}function Be(e){var t={max:0+e,min:1+e},n={max:.5,min:-.5};return[Le(n),-Le(t),Le(n)]}n(98);var ze,Ae,Je,Xe,Ye,Ze,_e,He,Ke,Qe,Ve,$e=F.a.h1.attrs({className:"h1"})(ze||(ze=Object(D.a)([""]))),et=F.a.div.attrs({className:"form-group"})(Ae||(Ae=Object(D.a)(["\n    margin: 0 30px;\n"]))),tt=F.a.label(Je||(Je=Object(D.a)(["\n    margin: 5px;\n"]))),nt=F.a.input.attrs({className:"form-control"})(Xe||(Xe=Object(D.a)(["\n    margin: 5px;\n"]))),at=F.a.button.attrs({className:"btn btn-primary"})(Ye||(Ye=Object(D.a)(["\n    margin: 15px 15px 15px 5px;\n"]))),rt=F.a.a.attrs({className:"btn btn-danger"})(Ze||(Ze=Object(D.a)(["\n    margin: 15px 15px 15px 5px;\n"]))),ot=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).handleChangeInputName=function(){var e=Object(Ne.a)(ke.a.mark((function e(t){var n;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.value,a.setState({name:n});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleChangeInputEmail=function(){var e=Object(Ne.a)(ke.a.mark((function e(t){var n;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.value,a.setState({email:n});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleChangeInputPassword=function(){var e=Object(Ne.a)(ke.a.mark((function e(t){var n;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.value,a.setState({password:n});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleAddUser=Object(Ne.a)(ke.a.mark((function e(){var t,n,r,o,s,c,i,l,u,j;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state,n=t.name,r=t.email,o=t.password,s=new qe,c=JSON.stringify(s),i=[{type:"generic_plant",quantity:3},{type:"tulip",quantity:3}],!1,l=We(),u=l.stamp,j={name:n,email:r,password:o,world:c,worldChosen:false,seeds:i,lastLogin:u},console.log(j),e.next=11,Pe.addUser(j).then((function(e){window.alert("User added"),a.setState({name:"",email:"",password:""}),console.log("SEEDS on SIGN UP"),console.log(i),a.props.setUser(n,e.data.id,[],s,!1,i,u)}));case 11:case"end":return e.stop()}}),e)}))),a.state={name:"",email:"",password:""},a}return Object(i.a)(n,[{key:"render",value:function(){var e=this.state,t=e.name,n=e.email,a=e.password;return Object(g.jsxs)(et,{children:[Object(g.jsx)($e,{children:"Sign Up"}),Object(g.jsx)(tt,{children:"Name: "}),Object(g.jsx)(nt,{type:"text",value:t,onChange:this.handleChangeInputName}),Object(g.jsx)(tt,{children:"Email: "}),Object(g.jsx)(nt,{type:"text",value:n,onChange:this.handleChangeInputEmail}),Object(g.jsx)(tt,{children:"Password: "}),Object(g.jsx)(nt,{type:"text",value:a,onChange:this.handleChangeInputPassword}),Object(g.jsx)(at,{onClick:this.handleAddUser,children:"Sign Up"}),Object(g.jsx)(rt,{href:"/movies/list",children:"Cancel"})]})}}]),n}(a.Component),st=ot,ct=F.a.h1.attrs({className:"h1"})(_e||(_e=Object(D.a)([""]))),it=F.a.div.attrs({className:"form-group"})(He||(He=Object(D.a)(["\n    margin: 0 30px;\n"]))),lt=F.a.label(Ke||(Ke=Object(D.a)(["\n    margin: 5px;\n"]))),ut=F.a.input.attrs({className:"form-control"})(Qe||(Qe=Object(D.a)(["\n    margin: 5px;\n"]))),jt=F.a.button.attrs({className:"btn btn-primary"})(Ve||(Ve=Object(D.a)(["\n    margin: 15px 15px 15px 5px;\n"]))),dt=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).handleChangeInputName=function(){var e=Object(Ne.a)(ke.a.mark((function e(t){var n;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.value,a.setState({name:n});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleChangeInputPassword=function(){var e=Object(Ne.a)(ke.a.mark((function e(t){var n;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.value,a.setState({password:n});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleGetUser=Object(Ne.a)(ke.a.mark((function e(){return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pe.getUser(a.state.name).then((function(e){if(console.log(e),console.log("Name is "+e.data.data.name),a.state.password===e.data.data.password){var t=e.data.data.name,n=e.data.data._id,r=ye(e.data.data.garden),o=JSON.parse(e.data.data.world),s=e.data.data.seeds,c=e.data.data.worldChosen,i=e.data.data.lastLogin;window.alert("Welcome back ".concat(t)),a.props.setUser(t,n,r,o,c,s,i)}else window.alert("Incorrect password")}));case 2:case"end":return e.stop()}}),e)}))),a.state={name:"",email:"",password:""},a}return Object(i.a)(n,[{key:"render",value:function(){var e=this.state,t=e.name,n=(e.email,e.password);return Object(g.jsxs)(it,{children:[Object(g.jsx)(ct,{children:"Log In"}),Object(g.jsx)(lt,{children:"Name: "}),Object(g.jsx)(ut,{type:"text",value:t,onChange:this.handleChangeInputName}),Object(g.jsx)(lt,{children:"Password: "}),Object(g.jsx)(ut,{type:"text",value:n,onChange:this.handleChangeInputPassword}),Object(g.jsx)(jt,{onClick:this.handleGetUser,children:"Log In"})]})}}]),n}(a.Component),bt=dt,ht=n(13),Ot=n(18);var ft=function(e){var t,n=Object(a.useState)(e.garden),r=Object(V.a)(n,2),o=r[0],s=r[1],c=Object(a.useState)(""),i=Object(V.a)(c,2),l=i[0],u=i[1],j=Object(a.useState)(e.seeds),b=Object(V.a)(j,2),h=b[0],f=b[1],m=Object(a.useState)(null),x=Object(V.a)(m,2),v=x[0],w=x[1],C=Object(a.useState)(function(e,t,n,a){O(n,a);var r=[];return O(n,a)>0&&r.push(new Ie),r}(0,0,e.lastLogin,e.today)),k=Object(V.a)(C,2),N=k[0],R=k[1],U=Object(a.useState)(!1),P=Object(V.a)(U,2),T=P[0],M=P[1],L=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v,n=Object(Ot.a)(h);n[t].quantity+=e,f(n),w(null)};return Object(a.useEffect)((function(){console.log("Calling saveGarden"),Te(e.id,o,e.world,e.worldChosen,h),M(T),function(){var e=o.length%5,t=o.length/5;if(0===e&&o.length>0&&h.length<t+2){console.log("Achievement!");var n=d(h);console.log("New seeds is"),console.log(n),f(n)}}()})),Object(g.jsx)("div",{className:"App",children:Object(g.jsxs)(S.a,{id:"canvas",camera:{position:[0,2,3.5]},children:[Object(g.jsx)(G,{}),Object(g.jsxs)(a.Suspense,{fallback:console.log("loading"),children:[Object(g.jsx)(ve,{sowPlant:function(e){if(l){var t=function(e,t){console.log("In createPlant");var n=[e.point.x,e.point.y,e.point.z],a=p(),r=We();return Object(g.jsx)(re,{growth:0,date:r,position:n,type:t},a)}(e,l);u(""),s((function(e){return[t].concat(Object(Ot.a)(e))})),L(-1)}},position:[0,0,0],world:e.world,seeds:h}),o,Object(g.jsx)(y,{removeBalloon:function(e){var t=N[e];t.claimed=!0,R((function(e){return[e.filter((function(e){return e.id!==t.id})),t]}))},updateSeeds:L,balloons:N,seeds:h}),Object(g.jsx)(fe,{}),Object(g.jsx)(W,{}),Object(g.jsx)(Q,{today:e.today})]}),e.worldChosen?Object(g.jsx)(Oe,(t={seeds:h,chosenSeed:l,seedList:T,position:[-1,-1,1.9],selectSeed:function(e,t){h[t];h[t].quantity>0&&(u(e),w(t))}},Object(ht.a)(t,"chosenSeed",l),Object(ht.a)(t,"toggleSeeds",(function(){M((function(e){return!e})),console.log("TOGGLE "+T)})),t)):Object(g.jsx)(E,{saveWorld:e.saveWorld,newWorld:e.newWorld})]})})},pt=(n(99),function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={userName:"",id:0,garden:[],world:{},chosenWorld:!1,seeds:[],lastLogin:""},a.setUser=a.setUser.bind(Object(l.a)(a)),a.newWorld=a.newWorld.bind(Object(l.a)(a)),a.saveWorld=a.saveWorld.bind(Object(l.a)(a)),a.connecToServer=a.connecToServer.bind(Object(l.a)(a)),a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.connecToServer()}},{key:"connecToServer",value:function(){fetch("/")}},{key:"setUser",value:function(e,t,n,a,r,o,s){this.setState({userName:e,id:t,garden:n,world:a,worldChosen:r,seeds:o,lastLogin:s,today:We().stamp})}},{key:"newWorld",value:function(){var e=new qe;this.setState({world:e})}},{key:"saveWorld",value:function(){this.setState({worldChosen:!0}),Te(this.state.id,[],this.state.world,!0,this.state.seeds)}},{key:"render",value:function(){return Object(g.jsxs)("div",{style:{position:"relative",width:"100%",height:"100%"},children:[Object(g.jsx)(X.a,{children:Object(g.jsx)(K,{user:this.state.userName,setUser:this.setUser})}),this.state.userName?Object(g.jsx)(ft,{id:this.state.id,newWorld:this.newWorld,world:this.state.world,worldChosen:this.state.worldChosen,saveWorld:this.saveWorld,seeds:this.state.seeds,garden:this.state.garden,lastLogin:this.state.lastLogin,today:this.state.today}):Object(g.jsxs)("div",{children:[Object(g.jsx)(bt,{setUser:this.setUser})," ",Object(g.jsx)(st,{setUser:this.setUser})]})]})}}]),n}(r.a.Component));s.a.render(Object(g.jsx)(pt,{}),document.getElementById("root"))},49:function(e,t,n){},98:function(e,t,n){}},[[100,1,2]]]);
//# sourceMappingURL=main.164f62f3.chunk.js.map
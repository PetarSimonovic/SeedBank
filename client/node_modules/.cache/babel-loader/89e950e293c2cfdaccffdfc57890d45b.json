{"ast":null,"code":"import _regeneratorRuntime from\"/Users/petarsimonovic/Library/Mobile Documents/com~apple~CloudDocs/Pete/Coding/Projects/SeedBankServer/seedbank/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/petarsimonovic/Library/Mobile Documents/com~apple~CloudDocs/Pete/Coding/Projects/SeedBankServer/seedbank/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{sample,randomiser,createId,calculateDays}from'./';import{Balloon}from'../gameObjects';import api from'../api';var defaultQuantity=3;// default quantity for a pack of new seeds\nexport default function loadBalloons(_x,_x2,_x3,_x4){return _loadBalloons.apply(this,arguments);}function _loadBalloons(){_loadBalloons=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(seeds,login,id,today){var dateDifference,loadedBalloons,balloonData,balloons;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(seeds);dateDifference=calculateDays(login,today);_context.next=4;return api.getBalloons(id);case 4:loadedBalloons=_context.sent;balloonData=loadedBalloons.data.data;console.log(\"LOADED BALLOONS\");console.log(balloonData);balloons=parseBalloons(balloonData);if(seeds.length>0){balloons.push(dailyBalloon(seeds));}console.log(\"LOADED BALLOONS\");console.log(balloons);return _context.abrupt(\"return\",balloons);case 13:case\"end\":return _context.stop();}}},_callee);}));return _loadBalloons.apply(this,arguments);}function parseBalloons(balloonData){var parsedBalloons=[];for(var index=0;index<balloonData.length;index++){console.log(\"In parsedballoons\");var balloon=balloonData[index];balloon.balloonId=balloon._id;// Can only get the DB to findOne using its own _id! \nconsole.log(balloon);if(balloon.claimed){continue;}parsedBalloons.push(Object.assign(new Balloon(),balloon));}return parsedBalloons;}function dailyBalloon(seeds,id){// This is not being added to the database at the moment\nvar sampleSeeds=sample(seeds);var newSeeds={type:sampleSeeds.type,quantity:defaultQuantity};var dailyMessage=\"\".concat(newSeeds.quantity,\" x \").concat(newSeeds.type,\"!\");return new Balloon(id,newSeeds.type,newSeeds.quantity,dailyMessage);}","map":{"version":3,"sources":["/Users/petarsimonovic/Library/Mobile Documents/com~apple~CloudDocs/Pete/Coding/Projects/SeedBankServer/seedbank/client/src/functions/LoadBalloons.js"],"names":["sample","randomiser","createId","calculateDays","Balloon","api","defaultQuantity","loadBalloons","seeds","login","id","today","console","log","dateDifference","getBalloons","loadedBalloons","balloonData","data","balloons","parseBalloons","length","push","dailyBalloon","parsedBalloons","index","balloon","balloonId","_id","claimed","Object","assign","sampleSeeds","newSeeds","type","quantity","dailyMessage"],"mappings":"udAAA,OAAQA,MAAR,CAAgBC,UAAhB,CAA4BC,QAA5B,CAAsCC,aAAtC,KAA0D,IAA1D,CACA,OAASC,OAAT,KAAwB,gBAAxB,CACA,MAAOC,CAAAA,GAAP,KAAgB,QAAhB,CAEA,GAAMC,CAAAA,eAAe,CAAG,CAAxB,CAA0B;AAE1B,uBAA8BC,CAAAA,YAA9B,6D,+FAAe,iBAA4BC,KAA5B,CAAmCC,KAAnC,CAA0CC,EAA1C,CAA8CC,KAA9C,yKACbC,OAAO,CAACC,GAAR,CAAYL,KAAZ,EAEMM,cAHO,CAGUX,aAAa,CAACM,KAAD,CAAQE,KAAR,CAHvB,uBAIcN,CAAAA,GAAG,CAACU,WAAJ,CAAgBL,EAAhB,CAJd,QAITM,cAJS,eAKTC,WALS,CAKKD,cAAc,CAACE,IAAf,CAAoBA,IALzB,CAMbN,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAEAD,OAAO,CAACC,GAAR,CAAYI,WAAZ,EAGIE,QAXS,CAWEC,aAAa,CAACH,WAAD,CAXf,CAYb,GAAIT,KAAK,CAACa,MAAN,CAAe,CAAnB,CAAsB,CACpBF,QAAQ,CAACG,IAAT,CAAcC,YAAY,CAACf,KAAD,CAA1B,EACD,CAEDI,OAAO,CAACC,GAAR,CAAY,iBAAZ,EACAD,OAAO,CAACC,GAAR,CAAYM,QAAZ,EAjBa,gCAkBNA,QAlBM,yD,+CAqBf,QAASC,CAAAA,aAAT,CAAuBH,WAAvB,CAAoC,CAClC,GAAIO,CAAAA,cAAc,CAAG,EAArB,CACA,IAAK,GAAIC,CAAAA,KAAK,CAAG,CAAjB,CAAoBA,KAAK,CAAGR,WAAW,CAACI,MAAxC,CAAgDI,KAAK,EAArD,CAAyD,CACvDb,OAAO,CAACC,GAAR,CAAY,mBAAZ,EACA,GAAMa,CAAAA,OAAO,CAAGT,WAAW,CAACQ,KAAD,CAA3B,CACAC,OAAO,CAACC,SAAR,CAAoBD,OAAO,CAACE,GAA5B,CAAgC;AAChChB,OAAO,CAACC,GAAR,CAAYa,OAAZ,EACA,GAAIA,OAAO,CAACG,OAAZ,CAAqB,CAClB,SAAU,CACbL,cAAc,CAACF,IAAf,CAAoBQ,MAAM,CAACC,MAAP,CAAc,GAAI3B,CAAAA,OAAJ,EAAd,CAA6BsB,OAA7B,CAApB,EACD,CACD,MAAOF,CAAAA,cAAP,CACD,CAED,QAASD,CAAAA,YAAT,CAAsBf,KAAtB,CAA6BE,EAA7B,CAAiC,CAE/B;AACA,GAAMsB,CAAAA,WAAW,CAAGhC,MAAM,CAACQ,KAAD,CAA1B,CACA,GAAMyB,CAAAA,QAAQ,CAAG,CAACC,IAAI,CAAEF,WAAW,CAACE,IAAnB,CAAyBC,QAAQ,CAAE7B,eAAnC,CAAjB,CACA,GAAM8B,CAAAA,YAAY,WAAMH,QAAQ,CAACE,QAAf,eAA6BF,QAAQ,CAACC,IAAtC,KAAlB,CACA,MAAO,IAAI9B,CAAAA,OAAJ,CAAYM,EAAZ,CAAgBuB,QAAQ,CAACC,IAAzB,CAA+BD,QAAQ,CAACE,QAAxC,CAAkDC,YAAlD,CAAP,CACD","sourcesContent":["import {sample, randomiser, createId, calculateDays} from './'\nimport { Balloon } from '../gameObjects'\nimport api from '../api';\n\nconst defaultQuantity = 3 // default quantity for a pack of new seeds\n\nexport default async function loadBalloons(seeds, login, id, today) {\n  console.log(seeds)\n\n  const dateDifference = calculateDays(login, today)\n  let loadedBalloons = await api.getBalloons(id)\n  let balloonData = loadedBalloons.data.data\n  console.log(\"LOADED BALLOONS\")\n\n  console.log(balloonData)\n\n\n  let balloons = parseBalloons(balloonData)\n  if (seeds.length > 0) {\n    balloons.push(dailyBalloon(seeds))\n  }\n\n  console.log(\"LOADED BALLOONS\")\n  console.log(balloons)\n  return balloons\n}\n\nfunction parseBalloons(balloonData) {\n  let parsedBalloons = []\n  for (let index = 0; index < balloonData.length; index++) {\n    console.log(\"In parsedballoons\")\n    const balloon = balloonData[index]\n    balloon.balloonId = balloon._id // Can only get the DB to findOne using its own _id! \n    console.log(balloon)\n    if (balloon.claimed) {\n       continue }\n    parsedBalloons.push(Object.assign(new Balloon(), balloon))\n  }\n  return parsedBalloons\n}\n\nfunction dailyBalloon(seeds, id) {\n\n  // This is not being added to the database at the moment\n  const sampleSeeds = sample(seeds)\n  const newSeeds = {type: sampleSeeds.type, quantity: defaultQuantity}\n  const dailyMessage = `${newSeeds.quantity} x ${newSeeds.type}!`\n  return new Balloon(id, newSeeds.type, newSeeds.quantity, dailyMessage)\n}\n"]},"metadata":{},"sourceType":"module"}
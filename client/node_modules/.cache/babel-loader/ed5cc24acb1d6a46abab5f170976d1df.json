{"ast":null,"code":"import _objectSpread from\"/Users/petarsimonovic/Library/Mobile Documents/com~apple~CloudDocs/Pete/Coding/Projects/SeedBankServer/seedbank/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/petarsimonovic/Library/Mobile Documents/com~apple~CloudDocs/Pete/Coding/Projects/SeedBankServer/seedbank/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Billboard,Text}from'@react-three/drei';import React,{Component,useState,useRef,useEffect}from'react';import{balloonColours,sendBalloon,sample,createId}from'../../functions';import{Cloud}from'../';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var size=0.07;function BalloonShop(props){var mesh=useRef();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),on=_useState2[0],setOn=_useState2[1];var _useState3=useState('balloon shop'),_useState4=_slicedToArray(_useState3,2),text=_useState4[0],setText=_useState4[1];// eventhandler for Cloud\nvar handleClick=function handleClick(){setOn(function(prev){return!prev;});};useEffect(function(){on?setText(\"choose balloon\"):setText(\"balloon shop\");},[on]);return/*#__PURE__*/_jsxs(\"mesh\",_objectSpread(_objectSpread({},props),{},{ref:mesh,scale:1,position:[5,0.5,0],onClick:handleClick,children:[/*#__PURE__*/_jsx(Cloud,{handleClick:handleClick,text:text}),on?balloonsForSale(props):'']}));}function balloonsForSale(props){var colours=balloonColours();var balloons=[];for(var balloon=0;balloon<props.seeds.length;balloon++){var ballonTextColour={message:\"#293241\",outline:\"#b1b5c8\"};var x=-2.5+Math.cos(Math.PI*balloon/colours.length);var y=0+Math.sin(Math.PI*balloon/colours.length);balloons.push(/*#__PURE__*/_jsx(BalloonForSale,{buyBalloon:props.buyBalloon,textColour:\"#293241\",outline:colours[balloon],position:[x,y,0]},createId()));}return balloons;}function BalloonForSale(props){var mesh=useRef();var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),scale=_useState6[0],setScale=_useState6[1];var handleClick=function handleClick(event){event.stopPropagation();props.buyBalloon(props.outline);setScale(0.95);setTimeout(function(){setScale(1);},100);//  constructor(userId, type, colour = sample(balloonColours()), quantity = 0, message, sender = \"SeedBank\") {\n};return/*#__PURE__*/_jsx(\"mesh\",_objectSpread(_objectSpread({},props),{},{ref:mesh,scale:scale,onClick:function onClick(event){return handleClick(event);},children:/*#__PURE__*/_jsx(Billboard,{position:props.position,follow:true,lockX:false,lockY:false,lockZ:false// Lock the rotation on the z axis (default=false)\n,children:/*#__PURE__*/_jsx(Text,{fontSize:size,outlineWidth:size+0.05,outlineColor:props.outline,color:props.textColour,children:\"\\xA31\"})})}));}export default BalloonShop;","map":{"version":3,"sources":["/Users/petarsimonovic/Library/Mobile Documents/com~apple~CloudDocs/Pete/Coding/Projects/SeedBankServer/seedbank/client/src/components/Clouds/BalloonShop.jsx"],"names":["Billboard","Text","React","Component","useState","useRef","useEffect","balloonColours","sendBalloon","sample","createId","Cloud","size","BalloonShop","props","mesh","on","setOn","text","setText","handleClick","prev","balloonsForSale","colours","balloons","balloon","seeds","length","ballonTextColour","message","outline","x","Math","cos","PI","y","sin","push","buyBalloon","BalloonForSale","scale","setScale","event","stopPropagation","setTimeout","position","textColour"],"mappings":"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","sourcesContent":["import { Billboard, Text } from '@react-three/drei'\nimport React, { Component, useState, useRef, useEffect } from 'react';\nimport {balloonColours, sendBalloon, sample, createId} from '../../functions'\nimport { Cloud } from '../'\nconst size = 0.07\n\nfunction BalloonShop(props) {\n  const mesh = useRef()\n\n  const [on, setOn] = useState(false)\n  const [text, setText] = useState('balloon shop')\n\n  // eventhandler for Cloud\n\n  const handleClick = () => {\n    setOn(prev => !prev)\n  }\n\n  useEffect(() => {\n    on ? setText(\"choose balloon\") : setText(\"balloon shop\")\n  }, [on])\n\n\n  return (\n    <mesh\n      {...props}\n      ref={mesh}\n      scale={1}\n      position={[5, 0.5, 0]}\n      onClick={handleClick}\n      >\n    <Cloud handleClick={handleClick} text={text} />\n    {on ? balloonsForSale(props) : '' }\n    </mesh>\n  )\n}\n\nfunction balloonsForSale(props) {\n  const colours = balloonColours()\n  let balloons = []\n  for (let balloon = 0; balloon < props.seeds.length; balloon++) {\n    const ballonTextColour = {\n      message: \"#293241\",\n      outline: \"#b1b5c8\"\n    }\n    const x = -2.5 + Math.cos(Math.PI * balloon / colours.length)\n    const y = 0 + Math.sin((Math.PI * balloon / colours.length  ))\n\n    balloons.push(<BalloonForSale key={createId()} buyBalloon={props.buyBalloon} textColour=\"#293241\" outline={colours[balloon]} position={[x, y, 0]}/>)\n  }\n  return balloons\n}\n\nfunction BalloonForSale(props) {\n\n  const mesh = useRef()\n  const [scale, setScale] = useState(1)\n\n  const handleClick = (event) => {\n    event.stopPropagation()\n    props.buyBalloon(props.outline)\n    setScale(0.95)\n    setTimeout(() => {\n      setScale(1)\n    }, 100)\n\n    //  constructor(userId, type, colour = sample(balloonColours()), quantity = 0, message, sender = \"SeedBank\") {\n  }\n\n  return (\n    <mesh\n      {...props}\n      ref={mesh}\n      scale={scale}\n      onClick={(event) => handleClick(event)}\n      >\n    <Billboard\n      position={props.position}\n      follow={true}\n      lockX={false}\n      lockY={false}\n      lockZ={false} // Lock the rotation on the z axis (default=false)\n      >\n      <Text fontSize={size} outlineWidth={size + 0.05} outlineColor={props.outline} color={props.textColour}>\n      Â£1\n       </Text>\n      </Billboard>\n      </mesh>\n    )\n}\n\nexport default BalloonShop\n"]},"metadata":{},"sourceType":"module"}
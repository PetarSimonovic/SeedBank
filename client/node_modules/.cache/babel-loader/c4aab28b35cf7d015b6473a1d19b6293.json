{"ast":null,"code":"import _regeneratorRuntime from\"/Users/petarsimonovic/Library/Mobile Documents/com~apple~CloudDocs/Pete/Coding/Projects/SeedBankServer/seedbank/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/petarsimonovic/Library/Mobile Documents/com~apple~CloudDocs/Pete/Coding/Projects/SeedBankServer/seedbank/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{sample,randomiser,createId,calculateDays}from'./';import{Balloon}from'../gameObjects';import api from'../api';var defaultQuantity=3;// default quantity for a pack of new seeds\nexport default function loadBalloons(_x,_x2,_x3,_x4){return _loadBalloons.apply(this,arguments);}function _loadBalloons(){_loadBalloons=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(seeds,login,id,today){var dateDifference,loadedBalloons,balloonData,balloons;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dateDifference=calculateDays(login,today);console.log(\"DATE DIFFERENCE in loadBalloons: \"+dateDifference);_context.next=4;return api.getBalloons(id);case 4:loadedBalloons=_context.sent;balloonData=loadedBalloons.data.data;balloons=parseBalloons(balloonData);// NO LONGER SENDING A 'DAILY BALLOON'\n// if (seeds.length > 0) {\n//   balloons.push(dailyBalloon(seeds))\n// }\nreturn _context.abrupt(\"return\",balloons);case 8:case\"end\":return _context.stop();}}},_callee);}));return _loadBalloons.apply(this,arguments);}function parseBalloons(balloonData){var parsedBalloons=[];for(var index=0;index<balloonData.length;index++){var balloon=balloonData[index];balloon.balloonId=balloon._id;// Can only get the DB to findOne using its own _id!\nif(balloon.claimed){continue;}parsedBalloons.push(Object.assign(new Balloon(),balloon));}return parsedBalloons;}//NOT IN USE ANYMORE\nfunction dailyBalloon(seeds,id){// This is not being added to the balloon database at the moment\nvar sampleSeeds=sample(seeds);var newSeeds={type:sampleSeeds.type,quantity:defaultQuantity};var dailyMessage=\"\".concat(newSeeds.quantity,\" x \").concat(newSeeds.type,\"!\");return new Balloon(id,newSeeds.type,newSeeds.quantity,dailyMessage);}","map":{"version":3,"sources":["/Users/petarsimonovic/Library/Mobile Documents/com~apple~CloudDocs/Pete/Coding/Projects/SeedBankServer/seedbank/client/src/functions/LoadBalloons.js"],"names":["sample","randomiser","createId","calculateDays","Balloon","api","defaultQuantity","loadBalloons","seeds","login","id","today","dateDifference","console","log","getBalloons","loadedBalloons","balloonData","data","balloons","parseBalloons","parsedBalloons","index","length","balloon","balloonId","_id","claimed","push","Object","assign","dailyBalloon","sampleSeeds","newSeeds","type","quantity","dailyMessage"],"mappings":"udAAA,OAAQA,MAAR,CAAgBC,UAAhB,CAA4BC,QAA5B,CAAsCC,aAAtC,KAA0D,IAA1D,CACA,OAASC,OAAT,KAAwB,gBAAxB,CACA,MAAOC,CAAAA,GAAP,KAAgB,QAAhB,CAEA,GAAMC,CAAAA,eAAe,CAAG,CAAxB,CAA0B;AAE1B,uBAA8BC,CAAAA,YAA9B,6D,+FAAe,iBAA4BC,KAA5B,CAAmCC,KAAnC,CAA0CC,EAA1C,CAA8CC,KAA9C,yKAEPC,cAFO,CAEUT,aAAa,CAACM,KAAD,CAAQE,KAAR,CAFvB,CAGbE,OAAO,CAACC,GAAR,CAAY,oCAAsCF,cAAlD,EAHa,sBAIcP,CAAAA,GAAG,CAACU,WAAJ,CAAgBL,EAAhB,CAJd,QAITM,cAJS,eAKTC,WALS,CAKKD,cAAc,CAACE,IAAf,CAAoBA,IALzB,CAQTC,QARS,CAQEC,aAAa,CAACH,WAAD,CARf,CAUb;AACA;AACA;AACA;AAba,gCAeNE,QAfM,wD,+CAkBf,QAASC,CAAAA,aAAT,CAAuBH,WAAvB,CAAoC,CAClC,GAAII,CAAAA,cAAc,CAAG,EAArB,CACA,IAAK,GAAIC,CAAAA,KAAK,CAAG,CAAjB,CAAoBA,KAAK,CAAGL,WAAW,CAACM,MAAxC,CAAgDD,KAAK,EAArD,CAAyD,CACvD,GAAME,CAAAA,OAAO,CAAGP,WAAW,CAACK,KAAD,CAA3B,CACAE,OAAO,CAACC,SAAR,CAAoBD,OAAO,CAACE,GAA5B,CAAgC;AAChC,GAAIF,OAAO,CAACG,OAAZ,CAAqB,CAClB,SAAU,CACbN,cAAc,CAACO,IAAf,CAAoBC,MAAM,CAACC,MAAP,CAAc,GAAI1B,CAAAA,OAAJ,EAAd,CAA6BoB,OAA7B,CAApB,EACD,CACD,MAAOH,CAAAA,cAAP,CACD,CAGD;AACA,QAASU,CAAAA,YAAT,CAAsBvB,KAAtB,CAA6BE,EAA7B,CAAiC,CAE/B;AACA,GAAMsB,CAAAA,WAAW,CAAGhC,MAAM,CAACQ,KAAD,CAA1B,CACA,GAAMyB,CAAAA,QAAQ,CAAG,CAACC,IAAI,CAAEF,WAAW,CAACE,IAAnB,CAAyBC,QAAQ,CAAE7B,eAAnC,CAAjB,CACA,GAAM8B,CAAAA,YAAY,WAAMH,QAAQ,CAACE,QAAf,eAA6BF,QAAQ,CAACC,IAAtC,KAAlB,CACA,MAAO,IAAI9B,CAAAA,OAAJ,CAAYM,EAAZ,CAAgBuB,QAAQ,CAACC,IAAzB,CAA+BD,QAAQ,CAACE,QAAxC,CAAkDC,YAAlD,CAAP,CACD","sourcesContent":["import {sample, randomiser, createId, calculateDays} from './'\nimport { Balloon } from '../gameObjects'\nimport api from '../api';\n\nconst defaultQuantity = 3 // default quantity for a pack of new seeds\n\nexport default async function loadBalloons(seeds, login, id, today) {\n\n  const dateDifference = calculateDays(login, today)\n  console.log(\"DATE DIFFERENCE in loadBalloons: \" + dateDifference)\n  let loadedBalloons = await api.getBalloons(id)\n  let balloonData = loadedBalloons.data.data\n\n\n  let balloons = parseBalloons(balloonData)\n\n  // NO LONGER SENDING A 'DAILY BALLOON'\n  // if (seeds.length > 0) {\n  //   balloons.push(dailyBalloon(seeds))\n  // }\n\n  return balloons\n}\n\nfunction parseBalloons(balloonData) {\n  let parsedBalloons = []\n  for (let index = 0; index < balloonData.length; index++) {\n    const balloon = balloonData[index]\n    balloon.balloonId = balloon._id // Can only get the DB to findOne using its own _id!\n    if (balloon.claimed) {\n       continue }\n    parsedBalloons.push(Object.assign(new Balloon(), balloon))\n  }\n  return parsedBalloons\n}\n\n\n//NOT IN USE ANYMORE\nfunction dailyBalloon(seeds, id) {\n\n  // This is not being added to the balloon database at the moment\n  const sampleSeeds = sample(seeds)\n  const newSeeds = {type: sampleSeeds.type, quantity: defaultQuantity}\n  const dailyMessage = `${newSeeds.quantity} x ${newSeeds.type}!`\n  return new Balloon(id, newSeeds.type, newSeeds.quantity, dailyMessage)\n}\n"]},"metadata":{},"sourceType":"module"}